
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WinteremelonC 的网页">
      
      
        <meta name="author" content="WintermelonC">
      
      
        <link rel="canonical" href="https://wintermelonc.github.io/WintermelonC_Docs/zju/compulsory_courses/computer_organization/theory/ch5/">
      
      
        <link rel="prev" href="../ch4/">
      
      
        <link rel="next" href="../ch6/">
      
      
      <link rel="icon" href="../../../../../img/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>5 Large and Fast: Exploiting Memory Hierarchy - WintermelonC Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#5-large-and-fast-exploiting-memory-hierarchy" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="WintermelonC Docs" class="md-header__button md-logo" aria-label="WintermelonC Docs" data-md-component="logo">
      
  <img src="../../../../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WintermelonC Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5 Large and Fast: Exploiting Memory Hierarchy
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至黑夜模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至黑夜模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至白天模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至白天模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/WintermelonC/WintermelonC_Docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    WintermelonC_Docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
    
  
  ZJU

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../common_sense/" class="md-tabs__link">
          
  
    
  
  大学生生活常识

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../application/" class="md-tabs__link">
          
  
    
  
  软件

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="WintermelonC Docs" class="md-nav__button md-logo" aria-label="WintermelonC Docs" data-md-component="logo">
      
  <img src="../../../../../img/logo.png" alt="logo">

    </a>
    WintermelonC Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/WintermelonC/WintermelonC_Docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    WintermelonC_Docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    ZJU
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ZJU
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../political/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    思政类
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            思政类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/history_of_modern_china/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中国近现代史纲要
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/history_of_CPC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    中国共产党历史
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../military_PE/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    军体类
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            军体类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/radio_direction_finding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    无线电测向（初级）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/badminton/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    羽毛球（初级）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/military_theory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    军事理论
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../computer/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    计算机类
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            计算机类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../natural_science/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    自然科学通识类
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5" id="__nav_2_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            自然科学通识类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../natural_science/phy_2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    大学物理（乙）Ⅱ
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5_2" id="__nav_2_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            大学物理（乙）Ⅱ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../natural_science/phy_2/phy_2_doc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    整理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../natural_science/phy_exp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    大学物理实验
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../innovation_entrepreneurship/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    创新创业类
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            创新创业类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../innovation_entrepreneurship/entrepreneurship/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    创业启程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    通识选修课程
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            通识选修课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/tea_culture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    茶文化与茶健康
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/economic_law/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    经济法理论与实务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/bio_evolution_and_design/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    生物进化与设计
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_4" id="__nav_2_7_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_4">
            <span class="md-nav__icon md-icon"></span>
            生物进化与设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/bio_evolution_and_design/doc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    整理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/digital_audio_video/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字音视频基础与制作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/life_science/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    生命科学导论
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_6" id="__nav_2_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_6">
            <span class="md-nav__icon md-icon"></span>
            生命科学导论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science/doc.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    整理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science/ch1.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 细胞与细胞工程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science/ch2.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 基因与基因工程
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science_exp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    生命科学导论实验
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    专业基础课程
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            专业基础课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/discrete_math/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    离散数学及其应用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/data_structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/digital_logic_design/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    数字逻辑设计
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_4" id="__nav_2_8_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_4">
            <span class="md-nav__icon md-icon"></span>
            数字逻辑设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/digital_logic_design/lab/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    实验部分
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_4_2" id="__nav_2_8_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_8_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_4_2">
            <span class="md-nav__icon md-icon"></span>
            实验部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/digital_logic_design/lab/final/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    final
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/prob_theo_and_math_stat/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    概率论与数理统计
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_5" id="__nav_2_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_5">
            <span class="md-nav__icon md-icon"></span>
            概率论与数理统计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 概率论的基本概念
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 随机变量及其概率分布
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 多维随机变量及其分布
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 随机变量的数字特征
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 大数定律及中心极限定律
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 统计量与抽样分布
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 参数估计
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 假设检验
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    专业必修课程
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            专业必修课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ADS/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_2" id="__nav_2_9_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_2">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 AVL Trees, Splay Trees and Amortized Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Red-Black Trees and B+ Trees
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Inverted File Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Leftist Heaps and Skew Heaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Binomial Queues
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Backtracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Divide and Conquer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9 Greedy Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10 Intractability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11 Approximation Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12 Local Search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13 Randomized Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14 Parallel Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15 External Sorting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    计算机组成
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_3" id="__nav_2_9_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_9_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9_3">
            <span class="md-nav__icon md-icon"></span>
            计算机组成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_9_3_2" id="__nav_2_9_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    理论部分
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_9_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9_3_2">
            <span class="md-nav__icon md-icon"></span>
            理论部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Computer Abstractions and Technology
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Instructions: Language of the Computer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Arithmetic for Computers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 The Processor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    5 Large and Fast: Exploiting Memory Hierarchy
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    5 Large and Fast: Exploiting Memory Hierarchy
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#51-引言" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 引言
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#52-memory-technologies" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Memory Technologies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#53-cache-的基本原理" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 cache 的基本原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 cache 的基本原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#531-cache-访问" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.1 cache 访问
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532-cache-缺失处理" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.2 cache 缺失处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#533-写操作处理" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.3 写操作处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#534-一个-cache-的例子内置-fastmath-处理器" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.4 一个 cache 的例子：内置 FastMATH 处理器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#54-cache-性能的评估和改进" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 cache 性能的评估和改进
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.4 cache 性能的评估和改进">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#541-通过更灵活地放置块来减少-cache-缺失" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.1 通过更灵活地放置块来减少 cache 缺失
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#542-在-cache-中查找一个块" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.2 在 cache 中查找一个块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#543-替换块的选择" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.3 替换块的选择
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#544-使用多级-cache-结构减少缺失代价" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.4 使用多级 cache 结构减少缺失代价
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#57-虚拟存储器" class="md-nav__link">
    <span class="md-ellipsis">
      5.7 虚拟存储器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.7 虚拟存储器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#571-页的存放和查找" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.1 页的存放和查找
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#572-缺页" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.2 缺页
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#573-关于写" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.3 关于写
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#574-加快地址转换tlb" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.4 加快地址转换：TLB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.7.4 加快地址转换：TLB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#内置-fastmath-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      内置 FastMATH TLB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#575-集成虚拟存储器tlb-和-cache" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.5 集成虚拟存储器、TLB 和 cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#576-虚拟存储器中的保护" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.6 虚拟存储器中的保护
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#577-处理-tlb-缺失和缺页" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.7 处理 TLB 缺失和缺页
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#578-小结" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.8 小结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Storage and Other I/O Topics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../lab/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    实验部分
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_9_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_3_3">
            <span class="md-nav__icon md-icon"></span>
            实验部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../practical_teaching/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    实践教学环节
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_10" id="__nav_2_10_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            实践教学环节
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../practical_teaching/practical_course_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    课程综合实践Ⅰ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../common_sense/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    大学生生活常识
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            大学生生活常识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/hospital/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    医院看病流程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/medical_insurance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    医保
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/transportation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何乘坐交通工具
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/rent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    租房流程及注意事项
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/cooking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    做饭的基本逻辑
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    软件
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            软件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/br/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Br
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Br
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/br/ch1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 首选项
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/br/ch2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 基本操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/br/ch3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 文件整理/归纳/筛选
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/lr/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Lr
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Lr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/ps/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Ps
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Ps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/pr/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Pr
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Pr
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/pr/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    插件
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/ae/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Ae
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Ae
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/ae/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    插件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_3" >
        
          
          <label class="md-nav__link" for="__nav_4_6_3" id="__nav_4_6_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_3">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/ae/other/shadow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    物体阴影
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/au/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Au
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Au
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/me/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Me
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Me
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/Vivado/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Vivado
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            Vivado
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/vscode/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    VS Code
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_10">
            <span class="md-nav__icon md-icon"></span>
            VS Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/vscode/copilot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Github Copilot
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#51-引言" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 引言
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#52-memory-technologies" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Memory Technologies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#53-cache-的基本原理" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 cache 的基本原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 cache 的基本原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#531-cache-访问" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.1 cache 访问
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#532-cache-缺失处理" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.2 cache 缺失处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#533-写操作处理" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.3 写操作处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#534-一个-cache-的例子内置-fastmath-处理器" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.4 一个 cache 的例子：内置 FastMATH 处理器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#54-cache-性能的评估和改进" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 cache 性能的评估和改进
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.4 cache 性能的评估和改进">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#541-通过更灵活地放置块来减少-cache-缺失" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.1 通过更灵活地放置块来减少 cache 缺失
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#542-在-cache-中查找一个块" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.2 在 cache 中查找一个块
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#543-替换块的选择" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.3 替换块的选择
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#544-使用多级-cache-结构减少缺失代价" class="md-nav__link">
    <span class="md-ellipsis">
      5.4.4 使用多级 cache 结构减少缺失代价
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#57-虚拟存储器" class="md-nav__link">
    <span class="md-ellipsis">
      5.7 虚拟存储器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.7 虚拟存储器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#571-页的存放和查找" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.1 页的存放和查找
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#572-缺页" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.2 缺页
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#573-关于写" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.3 关于写
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#574-加快地址转换tlb" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.4 加快地址转换：TLB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.7.4 加快地址转换：TLB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#内置-fastmath-tlb" class="md-nav__link">
    <span class="md-ellipsis">
      内置 FastMATH TLB
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#575-集成虚拟存储器tlb-和-cache" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.5 集成虚拟存储器、TLB 和 cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#576-虚拟存储器中的保护" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.6 虚拟存储器中的保护
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#577-处理-tlb-缺失和缺页" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.7 处理 TLB 缺失和缺页
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#578-小结" class="md-nav__link">
    <span class="md-ellipsis">
      5.7.8 小结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/WintermelonC/WintermelonC_Docs/edit/main/docs/zju/compulsory_courses/computer_organization/theory/ch5.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/WintermelonC/WintermelonC_Docs/raw/main/docs/zju/compulsory_courses/computer_organization/theory/ch5.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="5-large-and-fast-exploiting-memory-hierarchy">5 Large and Fast: Exploiting Memory Hierarchy<a class="headerlink" href="#5-large-and-fast-exploiting-memory-hierarchy" title="Permanent link">&para;</a></h1>
<!-- !!! tip "说明"

    此文档正在更新中…… -->

<div class="admonition info">
<p class="admonition-title">说明</p>
<ol>
<li>部分内容由 AI 翻译课本原文，可能存在错误</li>
<li>本文档只涉及部分知识点，仅可用来复习重点知识</li>
<li>部分课本练习题答案可能存在错误，欢迎在评论区指出，也可以写下你的疑问</li>
</ol>
</div>
<h2 id="51-引言">5.1 引言<a class="headerlink" href="#51-引言" title="Permanent link">&para;</a></h2>
<p>主存储器由 DRAM （动态随机存取存储器）实现，靠近处理器的那层（cache）则由 SRAM （静态随机存取存储器）来实现。磁盘（disk）通常是存储层次结构中容量最大且速度最慢的一层。在很多嵌入式设备中，常用闪存（flash memory）来替代磁盘</p>
<figure>
    <img alt="Img 1" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img1.png" width="600" />
</figure>
<p>存储器层次结构可以由多层构成，但是数据每次只能在相邻的两个层次之间进行复制。因此我们将注意力重点集中在两个层次上。高层的存储器靠近处理器，比低层存储器容量小且访问速度更快，我们将一个两级层次结构中存储信息的最小单元称为 <strong>块</strong>（block）或 <strong>行</strong>（line）</p>
<figure>
    <img alt="Img 2" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img2.png" width="600" />
</figure>
<p>如果处理器需要的数据存放在高层存储器中的某个块中，则称为一次 <strong>命中</strong>（hit）。如果在高层存储器中没有找到所需的数据，这次数据请求则称为一次 <strong>缺失</strong>（miss）。随后访问低层存储器来寻找包含所需数据的那一块。<strong>命中率</strong>（hit rate），或命中比率（hit ratio），是在高层存储器中找到数据的存储访问比例，通常被当成存储器层次结构性能的一个衡量标准。<strong>缺失率</strong>（miss rate）（1－命中率）则是数据在高层存储器中没有找到的存储访问比例</p>
<p>追求高性能是我们使用存储器层次结构的主要目的，因而命中和缺失的执行时间就显得尤为重要。<strong>命中时间</strong>（hit time）是指访问存储器层次结构中的高层存储器所需要的时间，包括了判断当前访问是命中还是缺失所需的时间。<strong>缺失代价</strong>（miss penalty）是将相应的块从低层存储器替换到高层存储器中，以及将该信息块传送给处理器的时间之和，由于较高存储层次容量较小并且使用了快速的存储器部件，因此比起对存储层次中较低层的访问，命中时间要少得多，这也是缺失代价的主要组成部分</p>
<figure>
    <img alt="Img 3" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img3.png" width="600" />
</figure>
<h2 id="52-memory-technologies">5.2 Memory Technologies<a class="headerlink" href="#52-memory-technologies" title="Permanent link">&para;</a></h2>
<ol>
<li>SRAM Technology</li>
<li>DRAM Technology</li>
<li>Flash Memory</li>
<li>Disk Memory</li>
</ol>
<h2 id="53-cache-的基本原理">5.3 cache 的基本原理<a class="headerlink" href="#53-cache-的基本原理" title="Permanent link">&para;</a></h2>
<p>要访问的数据项最初不在 cache 中，该请求导致了一次缺失，<span class="arithmatex">\(X_n\)</span> 被从主存调入 cache 之中</p>
<figure>
    <img alt="Img 4" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img4.png" width="600" />
</figure>
<p>在 cache 中为主存中每个字分配一个位置的最简单方法就是根据这个字的主存地址进行分配，这种 cache 结构称为 <strong>直接映射</strong>（direct mapped）。每个主存地址对应到 cache 中一个确定的地址</p>
<div class="arithmatex">\[
（块地址） mod （cache 中的块数）
\]</div>
<p>如果 cache 中的块数是 2 的幂，则只需要取地址的低 <span class="arithmatex">\(\log_2\)</span> 位</p>
<figure>
    <img alt="Img 5" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img5.png" width="600" />
</figure>
<p>由于 cache 中每个位置可能对应于主存中多个不同的地址，我们如何知道 cache 中的数据项是否是所请求的字呢？即如何知道所请求的字是否在 cache 中？我们可以在 cache 中增加一组 <strong>标记</strong>（tag），标记中包含了地址信息，这些地址信息可以用来判断 cache 中的字是否就是所请求的字。标记只需包含地址的高位，也就是没有用来检索 cache 的那些位。例如，在上图中，标记位只需使用 5 位地址中的高 2 位，地址低 3 位的索引域则用来选择 cache 中的块</p>
<p>我们还需要一种方法来判断 cache 块中确实没有包含有效信息。例如，当一个处理器启动时，cache 中没有数据，标记域中的值没有意义。甚至在执行了一些指令后，cache 中的一些块依然为空。因此，在 cache 中，这些块的标记应该被忽略。最常用的方法就是增加一个 <strong>有效位</strong>（valid bit）来标识一个块是否含有一个有效地址。如果该位没有被设置，则不能使用该块中的内容</p>
<h3 id="531-cache-访问">5.3.1 cache 访问<a class="headerlink" href="#531-cache-访问" title="Permanent link">&para;</a></h3>
<figure>
    <img alt="Img 6" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img6.png" width="600" />
</figure>
<figure>
    <img alt="Img 7" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img7.png" width="600" />
</figure>
<p>由于 cache 初始为空，第一次访问的一些数据都会发生缺失。图 5-6 对每一次访问行为进行了描述。第 8 次访问将会对 cache 中的一个块产生冲突的请求。地址 18（<span class="arithmatex">\(10010_2\)</span>）的字将被取到 cache 的第 2 块（<span class="arithmatex">\(010_2\)</span>）中。因此，它将替换掉原先存在于 cache 第 2 块（<span class="arithmatex">\(010_2\)</span>）中的地址为 26（<span class="arithmatex">\(11010_2\)</span>）中的字。这种行为令 cache 具有时间局部性：最近访问过的字替换掉较早访问的字</p>
<ul>
<li>标记域（tag field）：用来与 cache 中标记域的值进行比较</li>
<li>cache 索引：用来选择块</li>
</ul>
<figure>
    <img alt="Img 8" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img8.png" width="600" />
</figure>
<p>假设有以下情况：</p>
<ol>
<li>64-bit 地址</li>
<li>直接映射 cache</li>
<li>cache 大小为 <span class="arithmatex">\(2^n\)</span> 个块，因此 <span class="arithmatex">\(n\)</span> 位被用来索引</li>
<li>块大小为 <span class="arithmatex">\(2^m\)</span> 个字（<span class="arithmatex">\(2^{m+2}\)</span> 个字节），因此 <span class="arithmatex">\(m\)</span> 位用来查找块中的字，两位是字节偏移信息</li>
</ol>
<p>tag field 的大小为：<span class="arithmatex">\(64 - (n + m + 2)\)</span></p>
<p>直接映射的 cache 总位数为：<span class="arithmatex">\(2^n \times (block\ size + tag\ size + valid\ field\ size)\)</span></p>
<p>块大小为 <span class="arithmatex">\(2^m\)</span> 个字（<span class="arithmatex">\(2^{m+5}\)</span> 位），同时我们需要 1 位有效位，因此这样一个 cache 的位数是 <span class="arithmatex">\(2^n \times (2^m \times 32 + (64 - m - n -2) + 1) = 2^n \times (2^m \times 32 + 63 - n - m)\)</span></p>
<p>尽管以上计算是实际的大小，但是通常对 cache 命名只考虑数据的大小而不考虑标记域和有效位域的大小，因此上图中是一个 4 KiB 的 cache</p>
<div class="admonition example">
<p class="admonition-title">cache 中的位数</p>
<p>假设一个直接映射的 cache，有 16 KiB 的数据，块大小为 4 个字，地址为 64 位，那么该 cache 总共需要多少位？</p>
<details class="success">
<summary>答案</summary>
<p>数据共 <span class="arithmatex">\(16\ KiB = 2^{14}\ bytes = 2^{12}\ words\)</span>，一个块 4 个 word，则一共有 <span class="arithmatex">\(2^{10}\)</span> 个块，因此用来索引的位有 10 位，标记域有 <span class="arithmatex">\(64 - 10 - 2 - 2 = 50\)</span> 位，有效位 1 位。则 cache 大小总共为 <span class="arithmatex">\(2^{10} \times (4 \times 32 + 50 + 1) = 2^{10} \times 179 = 179\ Kibibits = 22.4\ KiB\)</span></p>
</details>
</div>
<div class="admonition example">
<p class="admonition-title">将一个地址映射到多字大小的 cache 块中</p>
<p>考虑一个 cache 有 64 个块，每个块 16 字节，那么字节地址为 1200 将被映射到 cache 中的哪一块？</p>
<details class="success">
<summary>答案</summary>
<p><span class="arithmatex">\(块地址 = \lfloor \dfrac{字节地址}{每块字节数} \rfloor = \lfloor \dfrac{1200}{16} \rfloor = 75\)</span></p>
<p><span class="arithmatex">\(（块地址）mod（cache 中的块数）= 75\ mod\ 64 = 11\)</span>。事实上地址 1200 和 1215 之间的所有地址都映射在这一块</p>
</details>
</div>
<h3 id="532-cache-缺失处理">5.3.2 cache 缺失处理<a class="headerlink" href="#532-cache-缺失处理" title="Permanent link">&para;</a></h3>
<ol>
<li>把 PC 的原始值（当前 PC - 4）送到存储器中</li>
<li>通知主存执行一次读操作，并等待主存访问完成</li>
<li>写 cache 项，将从主存取回的数据写入 cache 中存放数据的部分，并将地址的高位（从 ALU 中得到）写入标记域，设置有效位</li>
<li>重新返回指令执行第一步，重新取值，这次该指令在 cache 中</li>
</ol>
<p>read miss 时：从 memory 中把整个 block 复制到 cache 中</p>
<p>write miss 时：</p>
<ol>
<li>write-allocate：从 memory 把整个 block 复制到 cache 中</li>
<li>write-around：只将 cache 中的数据写回 memory</li>
</ol>
<h3 id="533-写操作处理">5.3.3 写操作处理<a class="headerlink" href="#533-写操作处理" title="Permanent link">&para;</a></h3>
<p><strong>write-through</strong>（写直达法）：</p>
<p>将数据同时写入主存和 cache 中。但这样会花费大量的时间，一种解决方法是 write-buffer（写缓冲），当一个数据在等待写入主存时，先将它放入写缓冲中</p>
<p><strong>write-back</strong>（写回机制）：</p>
<p>新值仅仅被写入 cache 块中，只有当修改过的块被替换时才需要写到较低层次存储结构中</p>
<h3 id="534-一个-cache-的例子内置-fastmath-处理器">5.3.4 一个 cache 的例子：内置 FastMATH 处理器<a class="headerlink" href="#534-一个-cache-的例子内置-fastmath-处理器" title="Permanent link">&para;</a></h3>
<figure>
    <img alt="Img 9" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img9.png" width="600" />
</figure>
<p>cache 容量为 16 KB，有 256 个块，每个块有 16 个字</p>
<p>对 cache 的读请求的步骤如下：</p>
<ol>
<li>
<p>将地址送到适当的 cache 中去，该地址来自程序计数器（对于指令访问），或者来自于ALU（对于数据访问）</p>
</li>
<li>
<p>如果 cache 发出命中信号，请求的字就出现在数据线上。由于在请求的数据块中有16个字，因此需要选择那个正确的字。块索引域用来控制多路选择器（如图5-9底部所示），从检索到的块中选择16个字中的某个字</p>
</li>
<li>
<p>如果 cache 发出缺失信号，我们把地址送到主存。当主存返回数据时，把它写入 cache 后再读出以满足请求</p>
</li>
</ol>
<p>对于写操作，内置 FastMATH 处理器同时提供写直达和写回机制，由操作系统来决定某种应用该使用哪个机制。它有一个只包含一项的写缓冲</p>
<details class="question" open="open">
<summary>课本 5.3</summary>
<p>By convention, a cache is named according to the amount of data it contains (i.e., a 4 KiB cache can hold 4 KiB of data); however, caches also require SRAM to store metadata such as tags and valid bits. For this exercise, you will examine how a cache’s configuration affects the total amount of SRAM needed to implement it as well as the performance of the cache. For all parts, assume that the caches are byte addressable, and that addresses and words are 64 bits.</p>
<p>(1) Calculate the total number of bits required to implement a 32 KiB cache with two-word blocks.</p>
<p>(2) Calculate the total number of bits required to implement a 64 KiB cache with 16-word blocks. How much bigger is this cache than the 32 KiB cache described in Exercise 5.3.1? (Notice that, by changing the block size, we doubled the amount of data without doubling the total size of the cache.)</p>
<p>(3) Explain why this 64 KiB cache, despite its larger data size, might provide slower performance than the first cache.</p>
<p>(4) Generate a series of read requests that have a lower miss rate on a 32 KiB two-way set associative cache than on the cache described in Exercise 5.3.1.</p>
<details class="success">
<summary>答案</summary>
<p>(1) 一共 <span class="arithmatex">\(32 KiB = 2^{15} bytes\)</span> 的数据，一个块 <span class="arithmatex">\(2 words = 2^4 bytes (题目中 1 word = 64 bit = 8 bytes)\)</span>，所以块的数量为 <span class="arithmatex">\(\dfrac{2^{15}}{2^4} = 2^{11}\)</span> 个，即 index 位数为 11。一个地址中还有 3 位字节偏移，1 位用于选择块中的字。所以 tag 有 64 - 11 - 3 - 1 = 49 位。那么 cache 的总大小为 <span class="arithmatex">\(2^{11} \times (2^4 \times 2^3 + 49 + 1(valid)) = 364544 bit\)</span></p>
<hr />
<p>(2) 一个块 <span class="arithmatex">\(16 word = 2^7 bytes\)</span>，块的数量为 <span class="arithmatex">\(\dfrac{2^{16}}{2^7} = 2^9\)</span>，即 index 位数为 9，一个地址中还有 3 位字节偏移，4 位用于选择块中的字。所以 tag 有 64 - 9 - 3 - 4 = 48 位。那么 cache 的总大小为 <span class="arithmatex">\(2^9 \times (2^7 \times 2^3 + 48 + 1) = 549376 bit\)</span></p>
<p>比 (1) 的 cache 大 <span class="arithmatex">\(\dfrac{549376}{364544} = 1.51\)</span> 倍</p>
<hr />
<p>(3) The larger block size may require an increased hit time and an increased miss penalty than the original cache. The fewer number of blocks may cause a higher conflict miss rate than the original cache.</p>
<hr />
<p>(4) Associative caches are designed to reduce the rate of conflict misses. As such, a sequence of read requests with the same 12-bit index fi eld but a different tag fi eld will generate many misses. For the cache described above, the sequence 0, 32768, 0, 32768, 0, 32768, … , would miss on every access, while a two-way set associate cache with LRU replacement, even one with a significantly smaller overall capacity, would hit on every access aft er the fi rst two.</p>
</details>
</details>
<details class="question" open="open">
<summary>课本 5.5</summary>
<p>For a direct-mapped cache design with a 64-bit address, the following bits of the address are used to access the cache.</p>
<p><figure markdown="span">
    <img alt="Img 27" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img27.png" width="400" />
</figure></p>
<p>(1) What is the cache block size (in words)?</p>
<p>(2) How many blocks does the cache have?</p>
<p>(3) What is the ratio between total bits required for such a cache implementation over the data storage bits?</p>
<p>Beginning from power on, the following byte-addressed cache references are recorded.</p>
<p><figure markdown="span">
    <img alt="Img 28" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img28.png" width="600" />
</figure></p>
<p>(4) For each reference, list (1) its tag, index, and offset, (2) whether it is a hit or a miss, and (3) which bytes were replaced (if any)</p>
<p>(5) What is the hit ratio?</p>
<p>(6) List the final state of the cache, with each valid entry represented as a record of <code>&lt;index, tag, data&gt;</code>. For example, &lt;0, 3, Mem[0xC00]-Mem[0xC1F]&gt;</p>
<details class="success">
<summary>答案</summary>
<p>(1) offset 有 5 位，其中字节偏移有 3 位，那么用于选择块中字的有 2 位，所以 1 个块 <span class="arithmatex">\(2^2 = 4\)</span> 个 word</p>
<hr />
<p>(2) index 有 5 位，那么一共有 <span class="arithmatex">\(2^5 = 32\)</span> 个块</p>
<hr />
<p>(3) 只考虑数据位的话，cache 大小为 <span class="arithmatex">\(2^5 \times 2^2 \times 2^6 = 2^{13} bit\)</span></p>
<p>tag 有 54 位，cache 总大小为 <span class="arithmatex">\(2^5 \times (2^2 \times 2^6 + 54 + 1) = 9952 bit\)</span></p>
<p><span class="arithmatex">\(ratio = \dfrac{9952}{2^{13}} = 1.21\)</span></p>
<hr />
<p>(4)</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Byte Address</th>
<th style="text-align: center;">Binary Address</th>
<th style="text-align: center;">Tag</th>
<th style="text-align: center;">Index</th>
<th style="text-align: center;">Offset</th>
<th style="text-align: center;">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0000 0000 0000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0000 0000 0100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x10</td>
<td style="text-align: center;">0000 0001 0000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x10</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x84</td>
<td style="text-align: center;">0000 1000 0100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">块地址 = <span class="arithmatex">\(\lfloor \dfrac{132}{32} \rfloor= 4\)</span>，<span class="arithmatex">\(4 mod 32 = 4\)</span>，因此 index 为 4，offset 为 4（<span class="arithmatex">\(132 - 32 \times 4\)</span>），或者直接看 Binary Address，4 - 0 位为 offset，9 - 5 位为 index</td>
</tr>
<tr>
<td style="text-align: center;">0xe8</td>
<td style="text-align: center;">0000 1110 1000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x07</td>
<td style="text-align: center;">0x08</td>
<td style="text-align: center;">直接看 Binary Address，4 - 0 位为 offset (01000 = 0x8)，9 - 5 位为 index (00111 = 0x7)</td>
</tr>
<tr>
<td style="text-align: center;">0xa0</td>
<td style="text-align: center;">0000 1010 0000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x05</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x400</td>
<td style="text-align: center;">0100 0000 0000</td>
<td style="text-align: center;">0x1</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">63 - 10 位为 tag (01 = 0x1) 或者块地址 <span class="arithmatex">\(\lfloor \dfrac{1024}{32} \rfloor = 32\)</span>，<span class="arithmatex">\(32 mod 32 = 0\)</span>，那么 tag 为 0x1，index 为 0x0，offset 为 0x0</td>
</tr>
<tr>
<td style="text-align: center;">0x1e</td>
<td style="text-align: center;">0000 0001 1110</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x1e</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x8c</td>
<td style="text-align: center;">0000 1000 1100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0x0c</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xc1c</td>
<td style="text-align: center;">1100 0001 1100</td>
<td style="text-align: center;">0x3</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x1c</td>
<td style="text-align: center;">块地址 = <span class="arithmatex">\(\lfloor \dfrac{3100}{32} \rfloor = 96\)</span>，<span class="arithmatex">\(96 mod 32 = 0\)</span>， 那么 tag 为 0x3，index 为 0，offset 为 28 = 0x1c（<span class="arithmatex">\(3100 - 32 \times 96\)</span>）</td>
</tr>
<tr>
<td style="text-align: center;">0xb4</td>
<td style="text-align: center;">0000 1011 0100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x05</td>
<td style="text-align: center;">0x14</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x884</td>
<td style="text-align: center;">1000 1000 0100</td>
<td style="text-align: center;">0x2</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: center;">Byte Address</th>
<th style="text-align: center;">Binary Address</th>
<th style="text-align: center;">Tag</th>
<th style="text-align: center;">Index</th>
<th style="text-align: center;">Offset</th>
<th style="text-align: center;">Hit/Miss</th>
<th style="text-align: center;">Bytes Replaced</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0000 0000 0000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0000 0000 0100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x10</td>
<td style="text-align: center;">0000 0001 0000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x10</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x84</td>
<td style="text-align: center;">0000 1000 0100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xe8</td>
<td style="text-align: center;">0000 1110 1000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x07</td>
<td style="text-align: center;">0x08</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xa0</td>
<td style="text-align: center;">0000 1010 0000</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x05</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x400</td>
<td style="text-align: center;">0100 0000 0000</td>
<td style="text-align: center;">0x1</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">0x00 - 0x1f</td>
</tr>
<tr>
<td style="text-align: center;">0x1e</td>
<td style="text-align: center;">0000 0001 1110</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x1e</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">0x400 - 0x41f</td>
</tr>
<tr>
<td style="text-align: center;">0x8c</td>
<td style="text-align: center;">0000 1000 1100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0x0c</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xc1c</td>
<td style="text-align: center;">1100 0001 1100</td>
<td style="text-align: center;">0x3</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x1c</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">0x00 - 0x1f</td>
</tr>
<tr>
<td style="text-align: center;">0xb4</td>
<td style="text-align: center;">0000 1011 0100</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">0x05</td>
<td style="text-align: center;">0x14</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x884</td>
<td style="text-align: center;">1000 1000 0100</td>
<td style="text-align: center;">0x2</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">0x04</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">0x80 - 0x9f</td>
</tr>
</tbody>
</table>
<hr />
<p>(5) <span class="arithmatex">\(\dfrac{4}{12} = \dfrac{1}{3} = 33\%\)</span></p>
<hr />
<p>(6) &lt;0, 3, Mem[c00] - Mem[c1f]&gt;<br/>
&lt;4, 2, Mem[880] - Mem[89f]&gt;<br/>
&lt;5, 0, Mem[a0] - Mem[bf]&gt;<br/>
&lt;7, 0, Mem[e0] - Mem[ff]&gt;</p>
</details>
</details>
<details class="question" open="open">
<summary>课本 5.7</summary>
<p>Consider the following program and cache behaviors.</p>
<p><figure markdown="span">
    <img alt="Img 29" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img29.png" width="600" />
</figure></p>
<p>(1) Suppose a CPU with a write-through, write-allocate cache achieves a CPI of 2. What are the read and write bandwidths (measured by bytes per cycle) between RAM and the cache? (Assume each miss generates a request for one block.)</p>
<p>(2) For a write-back, write-allocate cache, assuming 30% of replaced data cache blocks are dirty, what are the read and write bandwidths needed for a CPI of 2?</p>
<details class="success">
<summary>答案</summary>
<p>(1) CPI 为 2，即 2 cycles/instr，即 0.5 instr/cycle。</p>
<p>当发生 instruction cache miss 时，产生 <span class="arithmatex">\(0.5 \times 0.003 \times 64 = 0.096\ bytes/cycle\)</span> 的 read traffic</p>
<p>当发生 data miss 时：</p>
<p>1）read miss：需要把 memory 中的数据复制到 cache 中，所以 <span class="arithmatex">\(0.5 \times 0.25 \times 0.02 \times 64 = 0.16\ bytes/cycle\)</span> read traffic</p>
<p>2）write miss：首先由于是 write-through，不管有没有数据缺失，都要将 cache 的数据写回 memory 中，但只有 1 word（8 bytes）数据需要写回，所以 <span class="arithmatex">\(0.5 \times 0.1 \times 8 = 0.4\ bytes/cycle\)</span> write traffic</p>
<p>由于是 write-allocate，需要读取 RAM 中的数据，将其复制到 cache 中，所以 <span class="arithmatex">\(0.5 \times 0.1 \times 0.02 \times 64 = 0.064\ bytes/cycle\)</span> read traffic</p>
<p>总结：read bandwidth：0.096 + 0.16 + 0.064 = 0.32 bytes/cycle，write bandwidth：0.4 bytes/cycle </p>
<blockquote>
<p>没太看明白，为什么只有 1 word 数据需要写回？</p>
</blockquote>
<p>(2) read bandwidth 还是 0.32 bytes/cycle</p>
<p>dirty 标记为 1 的数据需要写回 memory，因此 write bandwidth 为 <span class="arithmatex">\(0.5 \times (0.25 + 0.1) \times 0.02 \times 0.3 \times 64 = 0.0672\ bytes/cycle\)</span></p>
</details>
</details>
<h2 id="54-cache-性能的评估和改进">5.4 cache 性能的评估和改进<a class="headerlink" href="#54-cache-性能的评估和改进" title="Permanent link">&para;</a></h2>
<p><span class="arithmatex">\(CPU\ time = (CPU\ execution\ clock\ cycles + Memory-stall\ clock\ cycles) \times Clock\ cycle\ time\)</span><br/>
<span class="arithmatex">\(CPU\ 时间 = （CPU\ 执行时钟周期 + 存储器阻塞的时钟周期）\times 时钟周期\)</span></p>
<p><span class="arithmatex">\(Memory-stall\ clock\ cycles = (Read-stall\ cycles + Write-stall\ cycles)\)</span><br/>
<span class="arithmatex">\(存储器阻塞时钟周期 = 读操作引起阻塞时的时钟周期 + 写操作引起阻塞的时钟周期\)</span></p>
<p><span class="arithmatex">\(Read-stall\ cycles = \dfrac{Reads}{Program} \times Read\ miss\ rate \times Read\ miss\ penalty\)</span><br/>
<span class="arithmatex">\(读操作阻塞的时钟周期数 = \dfrac{读的次数}{程序数} \times 读缺失率 \times 读确实代价\)</span></p>
<p><span class="arithmatex">\(Write-stall\ cycles = (\dfrac{Writes}{Program} \times Write\ miss\ rate \times Write\ miss\ penalty) + Write\ buffer\ stalls\)</span><br/>
<span class="arithmatex">\(写操作阻塞的时钟周期数 = (\dfrac{写的次数}{程序数} \times 写缺失率 \times 写缺失代价) + 写缓冲区阻塞\)</span></p>
<p>在大部分写直达 cache 结构中，读和写的缺失代价是一样的（都是从主存中取回数据块的时间）。如果假设写缓冲区阻塞可以被忽略，那么我们可以合并读写操作并共用一个缺失率和缺失代价</p>
<p><span class="arithmatex">\(Memory-stall\ clock\ cycles = \dfrac{Memory\ accesses}{Program} \times Miss\ rate \times Miss\ penalty\)</span><br/>
<span class="arithmatex">\(存储器阻塞时钟周期 = \dfrac{存储器访问次数}{程序数} \times 缺失率 \times 缺失代价\)</span></p>
<p><span class="arithmatex">\(Memory-stall\ clock\ cycles = \dfrac{Instructions}{Program} \times \dfrac{Misses}{Instructions} \times Miss\ penalty\)</span><br/>
<span class="arithmatex">\(存储器阻塞时钟周期 = \dfrac{指令数}{程序数} \times \dfrac{缺失数}{指令} \times 缺失代价\)</span></p>
<div class="admonition example">
<p class="admonition-title">计算 cache 性能</p>
<p>假设指令 cache 的缺失率为 2%，数据 cache 的缺失率为 4%，处理器的 CPI 为 2，没有存储器阻塞，且每次缺失的代价为 100 个时钟周期，那么配置一个从不发生缺失的理想的 cache，处理器的速度快多少？这里假定全部 load 和 store 的频率为 36%</p>
<p>根据指令计数器(I)，由指令缺失引起的时钟周期损失数为：</p>
<p>指令缺失时钟周期 = I × 2% × 100 = 2.00 × I</p>
<p>由于所有load和store指令出现的频率为36%，我们可以计算出数据缺失引起的时钟周期损失数：</p>
<p>数据缺失时钟周期 = I × 36% × 4% × 100 = 1.44 × I</p>
<p>总的存储器阻塞时钟周期为：</p>
<p>2.00 × I + 1.44 × I = 3.44 × I</p>
<p>每条指令的存储器阻塞超过3个时钟周期。因此，包括存储器阻塞在内的总的CPI是：<span class="arithmatex">\(2 + 3.44 = 5.44\)</span>。由于指令计数器或时钟频率都没有改变，CPU 执行时间的比率为：</p>
<p><span class="arithmatex">\(\dfrac{有阻塞的 CPU 执行时间}{配置理想 cache 的 CPU 执行时间} = \dfrac{I × CPI阻塞 × 时钟周期}{I × CPI理想 × 时钟周期} = \dfrac{CPI 阻塞}{CPI 理想} = \dfrac{5.44}{2}\)</span></p>
<p>因此，配置了理想的cache的CPU的性能是原来的：</p>
<p><span class="arithmatex">\(\dfrac{5.44}{2} = 2.72 倍\)</span></p>
<p>所以，配置了理想的 cache 的 CPU 的性能是原来的 2.72 倍</p>
</div>
<p>如果处理器速度很快，而存储系统却不快，那样又会发生什么？存储器阻塞花费的时间占据执行时间的比例会上升。一些简单的例子会说明这个问题有多严重。假设我们加速上面例子中的计算机，通过改进流水线，在不改变时钟频率的情况下，将 CPI 从 2 降到 1。那么具有 cache 缺失的系统的 CPI 为 1 + 3.44 = 4.44，而配置理想的 cache 的系统性能是它的 4.44 / 1 = 4.44 倍。存储器阻塞所花费的时间占据整个执行时间的比例则从 3.44 / 5.4 = 63% 上升到 3.44 / 4.44 = 77%</p>
<p>同样，仅仅提高时钟频率而不改进存储系统也会因cache缺失的增加而加剧性能的流失</p>
<p><strong>平均存储器访问时间</strong>（AMAT）：<span class="arithmatex">\(Time\ for\ a\ hit + Miss\ rate \times Miss\ penalty\)</span><br/>
<span class="arithmatex">\(命中时间 + 缺失率 \times 缺失代价\)</span></p>
<div class="admonition example">
<p class="admonition-title">计算平均存储器访问时间</p>
<p>处理器时钟周期的时间为 1 ns，缺失代价是 20 个时钟周期，缺失率为每条指令 0.05 次缺失，cache 访问时间（包括命中判断）为 1 个时钟周期。假设读操作和写操作的缺失代价相同并且忽略其他写阻塞。请计算 AMAT</p>
<p><span class="arithmatex">\(AMAT = 1 + 0.05 \times 20 = 2 个时钟周期\)</span></p>
<p>即为 2 ns</p>
</div>
<h3 id="541-通过更灵活地放置块来减少-cache-缺失">5.4.1 通过更灵活地放置块来减少 cache 缺失<a class="headerlink" href="#541-通过更灵活地放置块来减少-cache-缺失" title="Permanent link">&para;</a></h3>
<p><strong>全相联：</strong>（fully associative） 一个块可以被放置在 cache 中的任何位置</p>
<p><strong>组相联：</strong>（set associative） 每个块可被放置的位置数是固定的（至少两个）</p>
<p>每个块有 n 个位置可放的 cache 被称作 n 路组相联 cache（n-way set-associative cache）。一个 n 路组相联 cache 由很多个组构成，每个组有 n 块。根据索引域，存储器中的每个块对应到 cache 中唯一的组，并且可以放在这个组中的任何一个位置上</p>
<figure>
    <img alt="Img 10" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img10.png" width="600" />
</figure>
<p>在组相联 cache 中，包含存储块的组是这样给出的：</p>
<p><span class="arithmatex">\((Block\ number) mod (number\ of\ sets\ in\ the\ cache)\)</span><br/>
<span class="arithmatex">\(（块号）mod（cache 中的组数）\)</span></p>
<p>由于该块可能被放在组中的任何一个位置，因此组中所有块的标记都要被检索。而在全相联 cache 中，块可以被放在任何位置，因此 cache 中全部块的标记都要被检索</p>
<p>m 路组相联：关联度（Associativity）为 m</p>
<p>cache 中块的总数等于组数乘以关联度</p>
<figure>
    <img alt="Img 11" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img11.png" width="600" />
</figure>
<p>提高关联度的好处在于它通常能够降低缺失率，而主要的缺点则是增加了命中时间</p>
<div class="admonition example">
<p class="admonition-title">cache 的缺失与关联度</p>
<p>假设有三个小的 cache，每个 cache 都有 4 个块，块大小为 1 个字。第一个 cache 是全相联方式，第二个是两路组相联，第三个是直接映射。若按以下地址 0，8，0，6，8 依次访问时，求每个 cache 的缺失次数</p>
<p><strong>直接映射：</strong></p>
<p>首先判断每个地址对应的 cache 块：</p>
<p><figure markdown="span">
    <img alt="Img 12" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img12.png" width="400" />
</figure></p>
<p>标蓝的项表示新的</p>
<p><figure markdown="span">
    <img alt="Img 13" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img13.png" width="600" />
</figure></p>
<p>直接映射 cache 的 5 次访问产生 5 次缺失</p>
<hr />
<p><strong>组相联 cache：</strong></p>
<p>首先确定每个块地址映射到哪一组：</p>
<p><figure markdown="span">
    <img alt="Img 14" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img14.png" width="400" />
</figure></p>
<p>当产生缺失时，需要选择替换组中的某一项，因此需要一个替换规则。组相联 cache 通常会选择替换一组中最近最少被使用的块</p>
<p><figure markdown="span">
    <img alt="Img 15" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img15.png" width="600" />
</figure></p>
<p>两路组相联 cache 总共有 4 次缺失</p>
<hr />
<p><strong>全相联 cache：</strong></p>
<p><figure markdown="span">
    <img alt="Img 16" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img16.png" width="600" />
</figure></p>
<p>仅有 3 次缺失</p>
</div>
<h3 id="542-在-cache-中查找一个块">5.4.2 在 cache 中查找一个块<a class="headerlink" href="#542-在-cache-中查找一个块" title="Permanent link">&para;</a></h3>
<p>如何在组相联 cache 中查找一个 cache 块</p>
<p>索引值用来选择包含所需地址的组，该组中所有块的标记都将被查看。被选中的组中所有块的标记是并行检测的</p>
<figure>
    <img alt="Img 17" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img17.png" width="600" />
</figure>
<p>如果 cache 总容量保持不变，提高关联度就增加了每组中的块数，也就是并行查找时同时比较的次数：关联度每增加到两倍就会使每组块数加倍而使组数减半。相应地，关联度每增加到两倍，检索位就会减少 1 位，标记位增加 1 位。在全相联 cache 中，只有一组有效，所有块必须并行检测，因此没有索引，除了块内偏移地址，整个地址都需要和每个 cache 块的标记进行比较。换句话说，我们不使用索引位就可以查找整个 cache</p>
<p>四路组相联 cache 需要 4 个比较器以及一个 4 选 1 的多路选择器，用来在选定组中的 4 个成员之间进行选择</p>
<figure>
    <img alt="Img 18" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img18.png" width="600" />
</figure>
<div class="admonition example">
<p class="admonition-title">标记位大小与组相联</p>
<p>提高关联度需要更多比较器，同时 cache 块中的标记位数也需要增加。假设一个 cache，有 4K 个块，块大小为 4 个字，地址为 32 位，请分别计算在直接映射、两路组映射、四路组映射和全相联映射中，cache 的总组数以及总的标记位数</p>
<p><strong>直接映射：</strong></p>
<p>块总数为 <span class="arithmatex">\(4K = 2^{12}\)</span>，索引位有 12 位，标记位有 32 - 12 - 2 - 2 = 16 位。则总组数等于总块数为 4K 个，总的标记位数为 <span class="arithmatex">\(4K \times 16 = 64K\)</span></p>
<p><strong>两路组映射：</strong></p>
<p>总组数为 <span class="arithmatex">\(\dfrac{4K}{2} = 2K = 2^{11}\)</span> 个，索引位有 11 位，标记位有 32 - 11 - 2 - 2 = 17 位（即增加 1 位）。总的标记位数为 <span class="arithmatex">\(2K \times 2 \times 17 = 68K\)</span></p>
<p><strong>四路组映射：</strong></p>
<p>总组数为 1K 个，标记位有 18 位，总标记位数为 <span class="arithmatex">\(1K \times 4 \times 18 = 72K\)</span></p>
<p><strong>全映射：</strong></p>
<p>总组数为 1 个，标记位有 28 位，总标记位数为 <span class="arithmatex">\(1 \times 4K \times 28 = 112K\)</span></p>
</div>
<h3 id="543-替换块的选择">5.4.3 替换块的选择<a class="headerlink" href="#543-替换块的选择" title="Permanent link">&para;</a></h3>
<p>最常用的方法是 <strong>最近最少使用法</strong>（LRU）</p>
<h3 id="544-使用多级-cache-结构减少缺失代价">5.4.4 使用多级 cache 结构减少缺失代价<a class="headerlink" href="#544-使用多级-cache-结构减少缺失代价" title="Permanent link">&para;</a></h3>
<p>所有现代计算机都使用 cache。为了进一步减小现代处理器高时钟频率与日益增长的 DRAM 访问时间之间的差距，大多数微处理器都会增加额外一级 cache。这种二级 cache 通常位于芯片内，当一级 cache 缺失时就会访问它。如果二级 cache 中包含所需要的数据，那么一级 cache 的缺失代价就是二级 cache 的访问时间，这要比访问主存快得多。如果一级和二级 cache 中均不包含所需的数据，就需要访存，这样就会产生更大的缺失代价</p>
<div class="admonition example">
<p class="admonition-title">多级 cache 的性能</p>
<p>假定我们的处理器基本的 CPI 为 1.0，所有访问在一级 cache 中均命中，时钟频率为 4 GHz。假设主存访问时间为 100 ns，其中包括缺失处理时间。设一级 cache 中每条指令缺失率为 2%。如果增加一个二级 cache，命中或缺失访问的时间都是 5 ns，而且容量大到必须使访问主存的缺失率减少到 0.5%，这时的处理器速率能提高多少？</p>
<p>主存的缺失代价为</p>
<div class="arithmatex">\[ \frac{100 \text{ ns}}{0.25 \text{ ns/时钟周期}} = 400 \text{ 个时钟周期} \]</div>
<p>只有一级 cache 的处理器的有效 CPI 由下列公式给出：</p>
<div class="arithmatex">\[ \text{总的 CPI} = \text{基本 CPI} + \text{每条指令的存储器阻塞时钟周期} \]</div>
<p>因此，在本例中，只有一级 cache 时</p>
<div class="arithmatex">\[ \text{总的 CPI} = 1.0 + \text{每条指令的存储器阻塞时钟周期} = 1.0 + 2\% \times 400 = 9 \]</div>
<p>对于两级 cache，一级 cache 缺失时可以由二级 cache 或者主存来处理。访问二级 cache 时的缺失代价为</p>
<div class="arithmatex">\[ \frac{5 \text{ ns}}{0.25 \text{ ns/时钟周期}} = 20 \text{ 个时钟周期} \]</div>
<p>如果缺失能由二级 cache 处理，那么这就是整个缺失代价。如果缺失处理需要访存，总的缺失代价就是二级 cache 和主存的访问时间之和</p>
<p>因此，对一个两级的 cache，总的 CPI 是两级 cache 的阻塞时钟周期和基本 CPI 的总和</p>
<div class="arithmatex">\[ \text{总的 CPI} = 1 + \text{一级 cache 中每条指令的阻塞} + \text{二级 cache 中每条指令的阻塞} \]</div>
<div class="arithmatex">\[ = 1 + 2\% \times 20 + 0.5\% \times 400 = 1 + 0.4 + 2.0 = 3.4 \]</div>
<p>因此，有二级 cache 的处理器性能是没有二级 cache 处理器性能的 <span class="arithmatex">\( \frac{9.0}{3.4} = 2.6 \)</span> 倍</p>
<p>我们还可以使用另一种方法来计算阻塞时间。在二级 cache 命中的阻塞周期为 <span class="arithmatex">\( (2\% - 0.5\%) \times 20 = 0.3 \)</span>；而必须访问主存的阻塞周期必须同时包括访问二级 cache 和访问主存的时间，为 <span class="arithmatex">\( 0.5\% \times (20 + 400) = 2.1 \)</span>。对它们求和为 <span class="arithmatex">\( 1.0 + 0.3 + 2.1 \)</span>，同样等于 3.4</p>
</div>
<details class="question" open="open">
<summary>课本 5.11</summary>
<p>This exercise examines the effect of different cache designs, specifically comparing associative caches to the direct-mapped caches from Section 5.4. For these exercises, refer to the sequence of word address shown below.</p>
<p>0x03, 0xb4, 0x2b, 0x02, 0xbe, 0x58, 0xbf, 0x0e, 0x1f,<br/>
0xb5, 0xbf, 0xba, 0x2e, 0xce</p>
<p>(1) Sketch the organization of a three-way set associative cache with two-word blocks and a total size of 48 words. Your sketch should have a style similar to the figure below, but clearly show the width of the tag and data fields.</p>
<p><figure markdown="span">
    <img alt="Img 18" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img18.png" width="600" />
</figure></p>
<p>(2) Trace the behavior of the cache from Exercise 5.11.1. Assume a true LRU replacement policy. For each reference, identify</p>
<ul>
<li>the binary word address,</li>
<li>the tag,</li>
<li>the index,</li>
<li>the offset</li>
<li>whether the reference is a hit or a miss, and</li>
<li>which tags are in each way of the cache after the reference has been handled.</li>
</ul>
<details class="success">
<summary>答案</summary>
<p>(1) 1 行 3 个 block，6 个 word，一共 48 word，则有 8 行。所以 index 有 3 位。offset 有 4 位，tag 有 32 - 3 - 4 = 25 位，其中用来寻找块中字偏移的有 1 位</p>
<hr />
<p>(2) 注意题目中给的是 word address</p>
<p>T(x) is the tag at index x</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Word Address</th>
<th style="text-align: center;">Binary Address</th>
<th style="text-align: center;">tag</th>
<th style="text-align: center;">index</th>
<th style="text-align: center;">offset</th>
<th style="text-align: center;">hit/miss</th>
<th style="text-align: center;">way 0</th>
<th style="text-align: center;">way 1</th>
<th style="text-align: center;">way 2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0x03</td>
<td style="text-align: center;">0000 0011</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xb4</td>
<td style="text-align: center;">1011 0100</td>
<td style="text-align: center;">0xb</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x2b</td>
<td style="text-align: center;">0010 1011</td>
<td style="text-align: center;">0x2</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x02</td>
<td style="text-align: center;">0000 0010</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xbe</td>
<td style="text-align: center;">1011 1110</td>
<td style="text-align: center;">0xb</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x58</td>
<td style="text-align: center;">0101 1000</td>
<td style="text-align: center;">0x5</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0xbf</td>
<td style="text-align: center;">1011 1111</td>
<td style="text-align: center;">0xb</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x0e</td>
<td style="text-align: center;">0000 1110</td>
<td style="text-align: center;">0x0</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 0</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">0x1f</td>
<td style="text-align: center;">0001 1111</td>
<td style="text-align: center;">0x1</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 0</td>
<td style="text-align: center;">T(7) = 1</td>
</tr>
<tr>
<td style="text-align: center;">0xb5</td>
<td style="text-align: center;">1011 0101</td>
<td style="text-align: center;">0xb</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 0</td>
<td style="text-align: center;">T(7) = 1</td>
</tr>
<tr>
<td style="text-align: center;">0xbf</td>
<td style="text-align: center;">1011 1111</td>
<td style="text-align: center;">0xb</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 0</td>
<td style="text-align: center;">T(7) = 1</td>
</tr>
<tr>
<td style="text-align: center;">0xba</td>
<td style="text-align: center;">1011 1010</td>
<td style="text-align: center;">0xb</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 0<br/>T(5) = b</td>
<td style="text-align: center;">T(7) = 1</td>
</tr>
<tr>
<td style="text-align: center;">0x2e</td>
<td style="text-align: center;">0010 1110</td>
<td style="text-align: center;">0x2</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 2<br/>T(5) = b</td>
<td style="text-align: center;">T(7) = 1</td>
</tr>
<tr>
<td style="text-align: center;">0xce</td>
<td style="text-align: center;">1100 1110</td>
<td style="text-align: center;">0xc</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">M</td>
<td style="text-align: center;">T(1) = 0<br/>T(2) = b<br/>T(5) = 2<br/>T(7) = b<br/>T(4) = 5</td>
<td style="text-align: center;">T(7) = 2<br/>T(5) = b</td>
<td style="text-align: center;">T(7) = c</td>
</tr>
</tbody>
</table>
</details>
</details>
<h2 id="57-虚拟存储器">5.7 虚拟存储器<a class="headerlink" href="#57-虚拟存储器" title="Permanent link">&para;</a></h2>
<p><strong>Virtual Memory</strong></p>
<p>主存也可以为通常由磁盘实现的辅助存储器充当“cache”，这项技术被称作“虚拟存储器”。构造虚拟存储器有两个主要动机：允许在多道程序之间有效而安全地共享存储器；消除一个小而受限的主存容量对程序设计造成的影响</p>
<p>虚拟存储器中，块被称为 <strong>页</strong>（page），访问缺失则被称为 <strong>缺页</strong>（page fault）。在虚拟存储器中，处理器产生一个 <strong>虚拟地址</strong>（virtual address），再结合软硬件转换成一个 <strong>物理地址</strong>（physical address），然后就可以被用来访问主存了</p>
<figure>
    <img alt="Img 19" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img19.png" width="600" />
</figure>
<p>在虚拟存储器中，地址被划分为 <strong>虚页号</strong>（virtual page number）和 <strong>页内偏移</strong>（page offset）。页内偏移域的位数决定了页的大小</p>
<figure>
    <img alt="Img 20" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img20.png" width="600" />
</figure>
<p>缺失引发的高代价是许多设计选择虚拟存储系统的原因，缺失在虚拟存储器中通常称为缺页。一次缺页处理将花费数百万个时钟周期。这一巨大的缺失代价，主要由取得标准大小的页中第一个字所需的时间来确定，因此在设计虚拟存储系统时需要考虑一些关键性的因素</p>
<ul>
<li>为了弥补较长的访问时间，页应该足够大。目前典型的页大小从4 KB到16 KB。能支持32 KB到64 KB页的新型台式计算机和服务器正在被研发，但是新的嵌入式系统走的是相反的方向，页大小为1 KB</li>
<li>能降低缺页率的组织结构具有吸引力。这里用到的主要技术是允许存储器中的页以全相联方式放置</li>
<li>缺页可以用软件处理，这是因为与访问磁盘的时间相比，这样的开销不算大。此外，软件可以使用一些更先进的算法来选择替换页，只要缺失率减少很小一部分就足以弥补算法的开销</li>
<li>由于写时间太长，因此在虚拟存储器中，写直达机制不能很好地管理写操作。因此虚拟存储系统中都采用写回机制</li>
</ul>
<h3 id="571-页的存放和查找">5.7.1 页的存放和查找<a class="headerlink" href="#571-页的存放和查找" title="Permanent link">&para;</a></h3>
<p>在虚拟存储系统中，我们使用一个索引存储器的表来定位页，这种结构称为 <strong>页表</strong>（page table），它被存放在存储器中。页表使用虚拟地址中的页号作索引，以找到相应的物理页号。每个程序都有它自己的页表。为了指出页表在存储器中的位置，硬件包含一个指向页表首地址的寄存器，我们称之为页表寄存器</p>
<figure>
    <img alt="Img 21" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img21.png" width="600" />
</figure>
<h3 id="572-缺页">5.7.2 缺页<a class="headerlink" href="#572-缺页" title="Permanent link">&para;</a></h3>
<p>如果虚拟页的有效位关闭，就会发生缺页。操作系统获得控制权。控制的转移由异常机制完成，这点在本节稍后进行讨论。一旦操作系统获得控制权，它必须在下一级存储层次（通常是磁盘）中找到该页然后决定将请求页放到主存的什么位置。</p>
<p>虚拟地址本身并不会马上告诉我们页在磁盘中的位置。还拿图书馆作类比，我们不能仅仅依靠书名就找到图书的具体位置。而是，按目录查找，获得书在书架上的位置信息，比如说图书馆的索引书号。同样，在虚拟存储系统中，我们必须保持追踪记录虚拟地址空间的每一页在磁盘上的位置。</p>
<p>由于我们无法提前获知存储器中的某一页什么时候将被替换出去，因此操作系统在创建进程的时候候通常会在磁盘上为进程中所有的页创建空间。这一磁盘空间称为交换区。同时，它也创建一个数据结构来记录每个虚拟页在磁盘上的存放位置。这个数据结构可能是页表中的一部分，也可能是辅助数据结构，寻址方式和页表一样</p>
<figure>
    <img alt="Img 22" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img22.png" width="600" />
</figure>
<p>操作系统同样会创建一个数据结构来追踪记录使用每个物理页的是哪些进程和哪些虚拟地址。当一次缺页发生时，如果主存中所有的页都在使用，操作系统就必须选择一页进行替换。我们希望最小化缺页的次数，因而大多数操作系统都会选择它们认为近期内不会被使用的页进行替换。使用过去的信息来预测未来，操作系统遵循我们在5.3节中提到的最近最少使用替换策略（LRU）。操作系统查找最近最少使用的页，假定某一页在很长一段时间都没有被访问，那么该页再被访问的可能性比最近经常访问的页的可能性要小。被替换的页写入磁盘的交换区</p>
<p>虚拟地址为 32 位，页大小为 4KB，页表每一项为 4 个字节，我们可以计算总的页表容量为</p>
<div class="arithmatex">\[ \text{页表项数} = \frac{2^{32}}{2^{12}} = 2^{20} \]</div>
<div class="arithmatex">\[ \text{页表容量} = 2^{20} \text{个页表项} \times 2^2 \text{字节/页表项} = 4 \text{MB} \]</div>
<p>一系列的技术已经被用于减少页表所需的存储量。下面五种技术都是针对减少所需的最大存储量以及减少用于页表的主存</p>
<ol>
<li>最简单的技术是使用一个界限寄存器，对给定的进程限制其页表的大小。如果虚拟页号大于界限寄存器中的值，就必须在页表中加入该项。这种技术允许页表随着进程消耗空间的增多而增长。因此，只有当进程使用了虚拟地址空间许多页时，页表才会变得很大。这种技术要求地址空间只朝一个方向扩展</li>
<li>允许地址空间只朝一个方向增长并不够，因为多数语言需要两种大小可扩展的区域：一个用来保留栈，一个用来保留堆。由于这种二元性，如果将页表划分，使其既能从最高地址向下扩展，也能从最低地址向上扩展，就方便多了。这也就意味着有两个独立的页表和两个独立的界限。两个页表的使用将地址空间分成两段。地址的高位用来判断该地址使用了哪个段和哪个页表。由于段由地址的高位部分决定，每一段可以有地址空间的一半大。每段的界限寄存器指定了当前段的大小，该大小以页为单位增长。这种类型的段被应用于很多体系结构，包括 MIPS结构。这种形式的段对应用程序是不可见的，尽管它对操作系统可见。这种机制主要的缺陷在于当以一种稀疏方式使用地址空间而不是一组连续的虚拟地址时，它的执行效果就不太好</li>
<li>另外一种减小页表容量的方法是对虚拟地址使用哈希函数，这样，页表需要的容量仅仅是主存中的物理页数。这种结构称为反置页表（inverted page table）。当然，反置页表的查找过程略微有些复杂，因为我们不能仅仅依靠索引来访问页表</li>
<li>多级页表同样可以用来减少页表存储量。第一级映射到虚拟地址空间中较大的固定大小的块，一共有 64~256 页。这些大的块有时候被称为段，而第一级的映射表有时被称为段表，对用户来说段表是不可见的。段表中的每一项指出了该段中是否有页被分配，如果有，就指向该段的页表。地址转换发生在第一次段表查找时，使用地址的高位部分。如果段地址有效，下一组高位地址则用来索引由段表项指向的页表。这种机制允许以一种稀疏的方式（多个不相连的段同时处于活跃状态）来使用地址空间而不用分配整个页表。对很大的地址空间和在需要非连续地址分配的软件系统中，这种机制尤为有效。但是这种两级映射方式的主要缺陷在于地址转换过程更为复杂</li>
<li>为了减少页表占用的实际主存空间，现在，多数系统也允许页表分页。尽管听起来这很复杂，但是它的工作原理和虚拟存储器一样，并且允许页表驻留在虚拟地址空间中。另外，还有一些很小却很关键的问题，例如，要避免不断出现的缺页。如何克服这些问题都描述地很细节化并且一般因机器而异。简而言之，要避免这些问题，可以将全部页表置于操作系统地址空间中并且至少要把操作系统中一部分页表放在主存中的可物理寻址的一块区域中，这部分页表总是存在于主存而非磁盘中</li>
</ol>
<h3 id="573-关于写">5.7.3 关于写<a class="headerlink" href="#573-关于写" title="Permanent link">&para;</a></h3>
<p>访问 cache 和主存的时间相差上百个时钟周期，写直达机制也可以使用，但是我们需要一个写缓冲区来隐藏写延迟。在虚拟存储器系统中，对存储器层次结构中下一层（磁盘）的写操作需要数百万个处理器时钟周期；因此，创建一个缓冲区用来允许系统用写直达的方式对磁盘进行写，这种方法是完全不可行的。相反，虚拟存储器系统必须使用写回机制，对存储器中的页进行单独写，并且在该页被替换出存储器时再被复制到磁盘中去</p>
<h3 id="574-加快地址转换tlb">5.7.4 加快地址转换：TLB<a class="headerlink" href="#574-加快地址转换tlb" title="Permanent link">&para;</a></h3>
<p>由于页表存放在主存中，因此程序每次访存至少需要两次：一次访存以获得物理地址，第二次访存才获得数据。提高访问性能的关键在于依靠页表的访问局部性。当一个转换的虚拟页号被使用时，它可能在不久的将来再次被使用到，因为对该页中字的引用同时具有时间局部性和空间局部性</p>
<p>因此，现代处理器都包含一个特殊的cache 以追踪最近使用过的地址变换。这个特殊的地址转换cache通常称为 <strong>快表</strong> (TLB)（将其称为地址变换高速缓存更精确）</p>
<p>TLB的每个标记项存放虚拟页号的一部分，每个数据项中存放了物理页号。由于我们每次访问的是TLB而不是页表，TLB需要包括其他状态位，如重写位和引用位</p>
<figure>
    <img alt="Img 23" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img23.png" width="600" />
</figure>
<p>每次访问，我们都要在TLB中查找虚拟页号。如果命中，物理页号就用来形成地址，相应的引用位被置位。如果处理器执行的是写操作，重写位同样要被置位。如果TLB发生缺失，我们必须判断是发生缺页还是仅仅是一次TLB缺失。如果该页在主存中，那么TLB缺失只是一次转换缺失。在这种情况下，处理器可以通过将页表中的变换装载到TLB中并且重新访问来进行缺失处理。如果该页不在主存中，TLB缺失就是一次真的缺页。在这种情况下，处理器调用操作系统的异常处理。由于TLB中的项比主存中的页数少得多，发生TLB缺失会比缺页要频繁得多</p>
<h4 id="内置-fastmath-tlb">内置 FastMATH TLB<a class="headerlink" href="#内置-fastmath-tlb" title="Permanent link">&para;</a></h4>
<p>为了弄清楚这些想法是如何实际应用到处理器中的，我们来进一步研究内置FastMATH的TLB。存储系统页大小为4KB，地址空间为32位，因此，虚拟页号长为20位，如图顶部所示。物理地址和虚拟地址长度相等。TLB包含了16个项，采用全相联映射，由指令和数据访问共享。每个表项宽为64位，包含了20位的标记位（作为该TLB表项的虚页号）、相应的物理页号（也是20位）、一个有效位、一个重写位以及一些其他管理操作位</p>
<figure>
    <img alt="Img 24" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img24.png" width="600" />
</figure>
<figure>
    <img alt="Img 25" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img25.png" width="600" />
</figure>
<p>对于写请求来说，有一个额外的复杂情况：必须检查TLB中的写访问位。该位可以阻止程序向它仅具有读权限的页中进行写操作。如果程序试图写，且写访问位是关闭的，则会产生异常。写访问位构成了保护机制的一部分</p>
<h3 id="575-集成虚拟存储器tlb-和-cache">5.7.5 集成虚拟存储器、TLB 和 cache<a class="headerlink" href="#575-集成虚拟存储器tlb-和-cache" title="Permanent link">&para;</a></h3>
<div class="admonition example">
<p class="admonition-title">存储器层次结构的全部操作</p>
<p>在类似于由一个TLB和一个cache组成的存储器层次结构中，一次存储器访问可能遭遇三种不同类型的缺失：TLB缺失、缺页以及cache缺失。考虑这三种缺失发生一个或多个时所有可能的组合（7种可能性）。对每种可能性，说明这种情况是否会真的发生，在什么条件下发生</p>
<p><figure markdown="span">
    <img alt="Img 26" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img26.png" width="600" />
</figure></p>
</div>
<h3 id="576-虚拟存储器中的保护">5.7.6 虚拟存储器中的保护<a class="headerlink" href="#576-虚拟存储器中的保护" title="Permanent link">&para;</a></h3>
<p>虚拟存储器最重要的功能就是允许多个进程共享一个主存，同时为这些进程和操作系统提供存储保护。保护机制必须确保，尽管多个进程在共享同一个主存，但是无论有意或是无意，一个恶意进程不能写另一个用户进程或者操作系统的地址空间。TLB中的写访问位可以防止一个页被改写。如果没有这一级保护，计算机病毒将更加泛滥</p>
<h3 id="577-处理-tlb-缺失和缺页">5.7.7 处理 TLB 缺失和缺页<a class="headerlink" href="#577-处理-tlb-缺失和缺页" title="Permanent link">&para;</a></h3>
<p>尽管当TLB命中时，利用TLB将虚拟地址转换成物理地址是很简单的，但是处理TLB缺失和缺页要复杂得多。当TLB中没有一个表项能匹配虚拟地址时，TLB缺失就会发生。TLB缺失有下面两种可能性之一：</p>
<ol>
<li>页在主存中，只需要创建缺失的TLB表项。</li>
<li>页不在主存中，需要将控制权交给操作系统来解决缺页。</li>
</ol>
<p>怎么知道这两种情况中的哪一种发生了呢？当我们处理缺失时，需要查找页表项并且取回TLB。如果匹配的页表项的有效位是关闭的，那么对应的页就不在主存中，发生缺页。而不仅仅是TLB缺失。如果有效位开启，只需取回所需的表项</p>
<p>处理TLB缺失或者缺页需要使用异常机制来中断活跃的进程，将控制权传给操作系统，然后恢复执行被中断的进程。缺页将在主存访问时钟周期的某一时刻被发现。为了在缺页处理完毕后重新启动引起缺页的指令，必须保存该指令的程序计数器中的值。异常程序计数器（exception program counter, EPC）用来保存这个值</p>
<p>另外，TLB缺失或者缺页异常必须在访存发生的同一个时钟周期的末尾被判定，因此下一个时钟周期就开始进行异常处理而不是继续正常的指令执行。如果在这个时钟周期没有断定缺页发生，一条load指令可能改写寄存器，而当我们试图重新启动指令时，这可能是灾难性的错误。例如，考虑指令<code>lb x10, 0(x10)</code>：计算机必须防止写流水级发生，否则，就不能重新启动指令，因为 x10 的内容将被破坏。Store指令也会发生类似复杂情况。当发生缺页而没有完成处理时，我们必须组织写主存的操作。这通常是通令到主存写控制线为无效来完成</p>
<p>一旦操作系统知道了引起缺页的虚拟地址，它必须完成以下三个步骤：</p>
<ol>
<li>使用虚拟地址查找页表项，并在磁盘上找到被访问的页的位置</li>
<li>选择替换一个物理页；如果被选中的页被修改过，需要在把新的虚拟页装入之前将这个物理页写回到磁盘上</li>
<li>启动读操作，将被访问的页从磁盘上取回到所选择的物理页的位置上</li>
</ol>
<p>当然，最后一个步骤将花费数百万个时钟周期（如果被替换的页被重写过，那么第二步也需要花费这么多时间）；因此，操作系统通常都会选择另一个进程在处理器上执行直到磁盘访问结束。由于操作系统已经保存了当前进程的状态，因此它可以很随意地将控制权交给另一个进程</p>
<p>当从磁盘读页的操作完成后，操作系统可以恢复原先引起缺页的进程状态，并且执行从异常返回的指令。该指令将处理器从核心态恢复到用户态，同样也恢复程序计数器的值。用户进程接着重新执行引发缺页的那条指令，成功地访问请求的页，然后继续执行</p>
<p>数据访问引起的缺页异常很难处理，这是由于以下三个特性：</p>
<ol>
<li>它们发生于指令中间，不同于指令缺页</li>
<li>在异常处理前指令没有结束</li>
<li>异常处理之后，指令必须重新执行，就好像什么都没发生过一样</li>
</ol>
<p>要使指令可重新启动，这样异常可以被处理，指令稍后也能继续执行，这在类似于 RISC-V 的结构中实现相对简单。因为每条指令只能写一个数据项并且只能在指令周期的最后进行写操作，我们就可以阻止指令的完成（不执行写操作）并且在开始处重新启动指令</p>
<h3 id="578-小结">5.7.8 小结<a class="headerlink" href="#578-小结" title="Permanent link">&para;</a></h3>
<p>虚拟存储器是管理主存和磁盘之间数据缓存的一级存储层次。虚拟存储器允许单个程序在主存有限的范围内扩展地址空间。更重要的是，虚拟存储器以一种保护的方式，支持多个同时活跃的进程共享主存</p>
<p>管理主存和磁盘之间的存储器层次结构很具有挑战性，这是由于缺页的代价很高。下面一些技术被用来降低缺失率：</p>
<ol>
<li>增大页的容量以便利用空间局部性并降低缺失率</li>
<li>由页表实现的虚拟地址和物理地址之间的映射采用全相联的方式，这样虚拟页就可以被放置到主存中的任何位置</li>
<li>操作系统使用类似LRU和访问位之类的技术来选择替换哪一页</li>
</ol>
<p>写磁盘的代价是很高的，因此虚拟存储器使用写回机制并且追踪一页是否更改过（采用重写位）以避免把没有变化的页写回到磁盘</p>
<p>虚拟存储器机制提供了从被程序使用的虚拟地址到用来访问主存的物理地址空间之间的转换。这个地址转换允许对主存进行受保护的共享，同时还提供了很多额外的好处，如简化了存储器分配。为了保证进程间受到保护，要求只有操作系统才能改变地址变换，这是通过防止用户程序更改页表来实现的。进程之间受控制地共享页可以在操作系统的帮助下实现，页表中的访问位被用来指出用户程序对页进行读访问还是写访问</p>
<p>如果对于每一次访问，处理器不得不访问主存中的页表来进行转换，虚拟存储器的开销将很大，cache也将失去意义。相反，对于页表，TLB扮演了地址转换cache的角色，利用TLB中的变换，将虚拟地址转换为物理地址</p>
<details class="question" open="open">
<summary>课本 5.16</summary>
<p>As described in Section 5.7, virtual memory uses a page table to track the mapping of virtual addresses to physical addresses. This exercise shows how this table must be updated as addresses are accessed. The following data constitute a stream of virtual byte addresses as seen on a system. Assume 4 KiB pages, a fourentry fully associative TLB, and true LRU replacement. If pages must be brought in from disk, increment the next largest page number.</p>
<p><figure markdown="span">
    <img alt="Img 30" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img30.png" width="600" />
</figure></p>
<p>(1) For each access shown above, list</p>
<ul>
<li>whether the access is a hit or miss in the TLB,</li>
<li>whether the access is a hit or miss in the page table,</li>
<li>whether the access is a page fault,</li>
<li>the updated state of the TLB.</li>
</ul>
<p>(2) Repeat Exercise 5.16.1, but this time use 16 KiB pages instead of 4 KiB pages. What would be some of the advantages of having a larger page size? What are some of the disadvantages?</p>
<details class="success">
<summary>答案</summary>
<p>(1) </p>
<p><table>
    <tr>
        <th rowspan="2" id="tab-both-mid">Address</th>
        <th rowspan="2" id="tab-both-mid">Virtual Page</th>
        <th rowspan="2" id="tab-both-mid">H/M</th>
        <th colspan="3" id="tab-both-mid">TLB</th>
    </tr>
    <tr>
        <th id="tab-both-mid">valid</th>
        <th id="tab-both-mid">tag</th>
        <th id="tab-both-mid">physical page</th>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">4669<br/>0x123d</td>
        <td rowspan="4" id="tab-both-mid">1</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit<br/>page fault</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">b</td>
        <td id="tab-both-mid">12</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">13</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">2227<br/>0x08b3</td>
        <td rowspan="4" id="tab-both-mid">0</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit</td>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">0</td>
        <td id="tab-bg-both-mid">5</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">13</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">13916<br/>0x365c</td>
        <td rowspan="4" id="tab-both-mid">3</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">3</td>
        <td id="tab-bg-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">13</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">34587<br/>0x871b</td>
        <td rowspan="4" id="tab-both-mid">8</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit<br/>page fault</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">8</td>
        <td id="tab-bg-both-mid">14</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">13</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">48870<br/>0xbee6</td>
        <td rowspan="4" id="tab-both-mid">b</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">8</td>
        <td id="tab-both-mid">14</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">b</td>
        <td id="tab-bg-both-mid">12</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">12608<br/>0x3140</td>
        <td rowspan="4" id="tab-both-mid">3</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">8</td>
        <td id="tab-both-mid">14</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">3</td>
        <td id="tab-bg-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">b</td>
        <td id="tab-both-mid">12</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">49225<br/>0xc049</td>
        <td rowspan="4" id="tab-both-mid">c</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit<br/>page fault</td>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">c</td>
        <td id="tab-bg-both-mid">15</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">8</td>
        <td id="tab-both-mid">14</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">b</td>
        <td id="tab-both-mid">12</td>
    </tr>
</table></p>
<blockquote>
<p>答案部分有误，本文档已修正</p>
</blockquote>
<hr />
<p>(2) </p>
<p><table>
    <tr>
        <th rowspan="2" id="tab-both-mid">Address</th>
        <th rowspan="2" id="tab-both-mid">Virtual Page</th>
        <th rowspan="2" id="tab-both-mid">H/M</th>
        <th colspan="3" id="tab-both-mid">TLB</th>
    </tr>
    <tr>
        <th id="tab-both-mid">valid</th>
        <th id="tab-both-mid">tag</th>
        <th id="tab-both-mid">physical page</th>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">4669<br/>0x123d</td>
        <td rowspan="4" id="tab-both-mid">0</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">b</td>
        <td id="tab-both-mid">12</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">0</td>
        <td id="tab-bg-both-mid">5</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">2227<br/>0x08b3</td>
        <td rowspan="4" id="tab-both-mid">0</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">b</td>
        <td id="tab-both-mid">12</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">0</td>
        <td id="tab-bg-both-mid">5</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">13916<br/>0x365c</td>
        <td rowspan="4" id="tab-both-mid">0</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">b</td>
        <td id="tab-both-mid">12</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">0</td>
        <td id="tab-bg-both-mid">5</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">34587<br/>0x871b</td>
        <td rowspan="4" id="tab-both-mid">2</td>
        <td rowspan="4" id="tab-both-mid">TLB miss<br/>PT hit<br/>page fault</td>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">2</td>
        <td id="tab-bg-both-mid">13</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">48870<br/>0xbee6</td>
        <td rowspan="4" id="tab-both-mid">2</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">2</td>
        <td id="tab-bg-both-mid">13</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">12608<br/>0x3140</td>
        <td rowspan="4" id="tab-both-mid">0</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">2</td>
        <td id="tab-both-mid">13</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">3</td>
        <td id="tab-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">0</td>
        <td id="tab-bg-both-mid">5</td>
    </tr>
    <tr>
        <td rowspan="4" id="tab-both-mid">49225<br/>0xc049</td>
        <td rowspan="4" id="tab-both-mid">3</td>
        <td rowspan="4" id="tab-both-mid">TLB hit</td>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">2</td>
        <td id="tab-both-mid">13</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">7</td>
        <td id="tab-both-mid">4</td>
    </tr>
    <tr>
        <td id="tab-bg-both-mid">1</td>
        <td id="tab-bg-both-mid">3</td>
        <td id="tab-bg-both-mid">6</td>
    </tr>
    <tr>
        <td id="tab-both-mid">1</td>
        <td id="tab-both-mid">0</td>
        <td id="tab-both-mid">5</td>
    </tr>
</table></p>
<blockquote>
<p>答案部分有误，本文档已修正</p>
</blockquote>
<p>优点：减少了 TLB miss rate</p>
<p>缺点：可能会导致 higher fragment，降低物理内存的利用率</p>
<blockquote>
<p>higher fragment 没看懂啥意思</p>
</blockquote>
</details>
</details>
<details class="question" open="open">
<summary>课本 5.17</summary>
<p>There are several parameters that affect the overall size of the page table. Listed below are key page table parameters.</p>
<p><figure markdown="span">
    <img alt="Img 31" src="../../../../../img/computer_organization/theory/ch5/comp_ch5_img31.png" width="600" />
</figure></p>
<p>(1) Given the parameters shown above, calculate the maximum possible page table size for a system running five processes.</p>
<p>(2) Given the parameters shown above, calculate the total page table size for a system running five applications that each utilize half of the virtual memory available, given a two-level page table approach with up to 256 entries at the 1<sup>st</sup> level. Assume each entry of the main page table is 6 bytes. Calculate the minimum and maximum amount of memory required for this page table.</p>
<p>(3) A cache designer wants to increase the size of a 4 KiB virtually indexed, physically tagged cache. Given the page size shown above, is it possible to make a 16 KiB direct-mapped cache, assuming two 64-bit words per block? How would the designer increase the data size of the cache?</p>
<details class="success">
<summary>答案</summary>
<p>(1) virtual page number 有 32 - 13 = 19 位，一个 page 大小为 <span class="arithmatex">\(2^{19} \times 4 = 2^{21}\)</span> bytes，5 个 page 大小为 <span class="arithmatex">\(5 \times 2^{21} = 10 MB\)</span></p>
<hr />
<p>(2) first-level：9 位，second-level：11 位，每个 second-level 大小为 <span class="arithmatex">\(2^{11} \times 4 = 8KB\)</span></p>
<p>min：second-level 一共 <span class="arithmatex">\(5 \times 128 \times 8KB = 5MB\)</span>，first-level 一共 <span class="arithmatex">\(5 \times 128 \times 6 = 3840\)</span> bytes</p>
<p>max: second-level 一共 <span class="arithmatex">\(5 \times 256 \times 8KB = 10MB\)</span>，first-level 一共 <span class="arithmatex">\(5 \times 256 \times 6 = 7680\)</span> bytes</p>
<hr />
<p>(3) page index 有 13 位</p>
<p>cache：有 1024 个 block，index 有 10 位，offset 总共 4 位</p>
<p>可以提高 cache 的关联度来降低 cache 的 index 位数，以便 cache 的索引完全适合 page 索引</p>
</details>
</details>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年1月2日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年12月10日</span>
  </span>

    
    
    
  </aside>




<div id="__comments">

<h2>评论区</h2>

<div>欢迎在评论区指出文档错误，为文档提供宝贵意见，或写下你的疑问</div>

<br/>

<!-- Insert generated snippet here -->
<script src="https://giscus.app/client.js"
  data-repo="WintermelonC/WintermelonC_Docs"
  data-repo-id="R_kgDOM7yCjg"
  data-category="General"
  data-category-id="DIC_kwDOM7yCjs4Cj6RZ"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async>
</script>

<!-- Synchronize Giscus theme with palette -->
<script>
  var giscus = document.querySelector("script[src*=giscus]")

  // Set palette on initial load
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate"
      ? "transparent_dark"
      : "light"

    // Instruct Giscus to set theme
    giscus.setAttribute("data-theme", theme) 
  }

  // Register event handlers after documented loaded
  document.addEventListener("DOMContentLoaded", function() {
    var ref = document.querySelector("[data-md-component=palette]")
    ref.addEventListener("change", function() {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate"
          ? "transparent_dark"
          : "light"

        // Instruct Giscus to change theme
        var frame = document.querySelector(".giscus-frame")
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        )
      }
    })
  })
</script>

</div>
                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../ch4/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 4 The Processor">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                4 The Processor
              </div>
            </div>
          </a>
        
        
          
          <a href="../ch6/" class="md-footer__link md-footer__link--next" aria-label="下一页: 6 Storage and Other I/O Topics">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                6 Storage and Other I/O Topics
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/WintermelonC" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../../../assets/javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>