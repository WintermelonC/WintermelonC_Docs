
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="WintermelonC 的网页">
      
      
        <meta name="author" content="WintermelonC">
      
      
        <link rel="canonical" href="https://wintermelonc.github.io/WintermelonC_Docs/zju/compulsory_courses/computer_organization/theory/ch2/">
      
      
        <link rel="prev" href="../ch1/">
      
      
        <link rel="next" href="../ch3/">
      
      
      <link rel="icon" href="../../../../../img/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>2 Instructions: Language of the Computer - WintermelonC Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M17%2013h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/extra.css?v=1.0.2">
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/hqcard.css?v=1.0.0">
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/bootstrap.css?v=1.0.0">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2-instructions-language-of-the-computer" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../.." title="WintermelonC Docs" class="md-header__button md-logo" aria-label="WintermelonC Docs" data-md-component="logo">
      
  <img src="../../../../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WintermelonC Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2 Instructions: Language of the Computer
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至深色主题"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换至深色主题" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="切换至浅色主题"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至浅色主题" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/WintermelonC/WintermelonC_Docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    WintermelonC_Docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
  
    
  
  ZJU

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../common_sense/" class="md-tabs__link">
          
  
  
    
  
  大学生生活常识

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../application/" class="md-tabs__link">
          
  
  
    
  
  软件

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../knowledge/" class="md-tabs__link">
          
  
  
    
  
  知识

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../tools/" class="md-tabs__link">
          
  
  
    
  
  工具

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="WintermelonC Docs" class="md-nav__button md-logo" aria-label="WintermelonC Docs" data-md-component="logo">
      
  <img src="../../../../../img/logo.png" alt="logo">

    </a>
    WintermelonC Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/WintermelonC/WintermelonC_Docs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    WintermelonC_Docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ZJU
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ZJU
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../political/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    思政类
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            思政类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/history_of_modern_china/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国近现代史纲要
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../political/marxist_principles/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    马克思主义基本原理
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_3" id="__nav_2_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_3">
            <span class="md-nav__icon md-icon"></span>
            马克思主义基本原理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/marxist_principles/ch0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 导论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/marxist_principles/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 世界的物质性及发展规律
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/xi_jinping_thought/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    习近平新时代中国特色社会主义思想概论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../political/history_of_CPC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    中国共产党历史
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../military_PE/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    军体类
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            军体类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/radio_direction_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    无线电测向（初级）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/badminton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    羽毛球（初级）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/swimming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    游泳（初级）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../military_PE/military_theory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    军事理论
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../computer/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机类
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            计算机类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../computer/AI_basic/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    人工智能基础（A）
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            人工智能基础（A）
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 初识人工智能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 人工智能的系统数据基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 人工智能的应用开发基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 从问题求解到机器学习
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 回归与分类模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 数据的聚类和降维技术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 深度网络基础组件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 卷积神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 循环神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 完整的人工智能应用开发实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 自然语言处理建模
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 大语言模型与生成式人工智能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/ch13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 预训练 —— 微调和多模态模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../computer/AI_basic/exercise/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    习题整理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../natural_science/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    自然科学通识类
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5" id="__nav_2_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            自然科学通识类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../natural_science/phy_2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    大学物理（乙）Ⅱ
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_5_2" id="__nav_2_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            大学物理（乙）Ⅱ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../natural_science/phy_2/phy_2_doc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    整理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../natural_science/phy_exp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    大学物理实验
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../innovation_entrepreneurship/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    创新创业类
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            创新创业类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../innovation_entrepreneurship/entrepreneurship/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    创业启程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    通识选修课程
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7" id="__nav_2_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            通识选修课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/tea_culture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    茶文化与茶健康
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/economic_law/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    经济法理论与实务
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/bio_evolution_and_design/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    生物进化与设计
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_4" id="__nav_2_7_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_4">
            <span class="md-nav__icon md-icon"></span>
            生物进化与设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/bio_evolution_and_design/doc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    整理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/digital_audio_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数字音视频基础与制作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/life_science/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    生命科学导论
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_6" id="__nav_2_7_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_6">
            <span class="md-nav__icon md-icon"></span>
            生命科学导论
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science/doc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    整理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 细胞与细胞工程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 基因与基因工程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/life_science_exp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    生命科学导论实验
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../general_courses/wireless_network/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    无线网络应用
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_7_8" id="__nav_2_7_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_7_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7_8">
            <span class="md-nav__icon md-icon"></span>
            无线网络应用
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 当今网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 交换机和终端设备的基本配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 协议和模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 物理层
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 数制系统
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 数据链路
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 以太网交换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 网络层
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 地址解析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 路由器基本配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 IPv4 编址
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 IPv6 编址
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 ICMP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14 传输层
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15 应用层
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    16 网络安全基础知识
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_courses/wireless_network/ch17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    17 构建小型网络
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    专业基础课程
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            专业基础课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/discrete_math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    离散数学及其应用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/data_structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据结构基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/digital_logic_design/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    数字逻辑设计
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_4" id="__nav_2_8_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_4">
            <span class="md-nav__icon md-icon"></span>
            数字逻辑设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/digital_logic_design/lab/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    实验部分
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_4_2" id="__nav_2_8_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_8_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_4_2">
            <span class="md-nav__icon md-icon"></span>
            实验部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/digital_logic_design/lab/final/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    final
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/prob_theo_and_math_stat/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    概率论与数理统计
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_5" id="__nav_2_8_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_5">
            <span class="md-nav__icon md-icon"></span>
            概率论与数理统计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 概率论的基本概念
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 随机变量及其概率分布
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 多维随机变量及其分布
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 随机变量的数字特征
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 大数定律及中心极限定律
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 统计量与抽样分布
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 参数估计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/prob_theo_and_math_stat/chapter_8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 假设检验
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../basic_courses/OOP/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    面向对象程序设计
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8_6" id="__nav_2_8_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8_6">
            <span class="md-nav__icon md-icon"></span>
            面向对象程序设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Using Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Grouping Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Defining Class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 Inside Object
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 Inside Class
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 Composition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 Inheritance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 Polymorphism
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 Copy and Move
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 Overloaded Operator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 Template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 Exception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 Smart Pointer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14 Stream
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../basic_courses/OOP/ch15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15 Design Concept
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    专业必修课程
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            专业必修课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ADS/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_2" id="__nav_2_9_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_2">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 AVL Trees, Splay Trees and Amortized Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Red-Black Trees and B+ Trees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Inverted File Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 Leftist Heaps and Skew Heaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 Binomial Queues
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 Backtracking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 Divide and Conquer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 Dynamic Programming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 Greedy Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 Intractability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 Approximation Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 Local Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 Randomized Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    14 Parallel Algorithms
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ADS/ch15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    15 External Sorting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机组成
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_3" id="__nav_2_9_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_9_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9_3">
            <span class="md-nav__icon md-icon"></span>
            计算机组成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_9_3_2" id="__nav_2_9_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    理论部分
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_9_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_9_3_2">
            <span class="md-nav__icon md-icon"></span>
            理论部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Computer Abstractions and Technology
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    2 Instructions: Language of the Computer
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    2 Instructions: Language of the Computer
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#22-计算机硬件的操作" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 计算机硬件的操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-计算机硬件的操作数" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 计算机硬件的操作数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 计算机硬件的操作数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-存储器操作数" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 存储器操作数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-常数或立即数操作数" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 常数或立即数操作数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-计算机中指令的表示" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 计算机中指令的表示
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 计算机中指令的表示">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#251-risc-v-字段" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.1 RISC-V 字段
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-逻辑操作" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 逻辑操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#27-决策指令" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 决策指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.7 决策指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#271-循环" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.1 循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#272-边界检查的捷径" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.2 边界检查的捷径
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#273-caseswitch-语句" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.3 case/switch 语句
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#28-计算机硬件对过程的支持" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 计算机硬件对过程的支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.8 计算机硬件对过程的支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#281-使用更多的寄存器" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.1 使用更多的寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#282-嵌套过程" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.2 嵌套过程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#283-在栈中为新数据分配空间" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.3 在栈中为新数据分配空间
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#284-在堆中为新数据分配空间" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.4 在堆中为新数据分配空间
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#29-人机交互" class="md-nav__link">
    <span class="md-ellipsis">
      2.9 人机交互
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#210-risc-v-中立即数和地址的寻址" class="md-nav__link">
    <span class="md-ellipsis">
      2.10 RISC-V 中立即数和地址的寻址
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.10 RISC-V 中立即数和地址的寻址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2101-立即数" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.1 立即数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2102-分支和跳转中的寻址" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.2 分支和跳转中的寻址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2103-risc-v-寻址模式总结" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.3 RISC-V 寻址模式总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2104-机器语言解码" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.4 机器语言解码
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#211-并行与指令同步" class="md-nav__link">
    <span class="md-ellipsis">
      2.11 并行与指令：同步
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#212-翻译并执行程序" class="md-nav__link">
    <span class="md-ellipsis">
      2.12 翻译并执行程序
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#213-以一个-c-排序程序为例" class="md-nav__link">
    <span class="md-ellipsis">
      2.13 以一个 C 排序程序为例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.13 以一个 C 排序程序为例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2131-swap-过程" class="md-nav__link">
    <span class="md-ellipsis">
      2.13.1 swap 过程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.13.1 swap 过程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#为-swap-分配寄存器" class="md-nav__link">
    <span class="md-ellipsis">
      为 swap 分配寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#为-swap-过程体生成代码" class="md-nav__link">
    <span class="md-ellipsis">
      为 swap 过程体生成代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#完整的-swap-程序" class="md-nav__link">
    <span class="md-ellipsis">
      完整的 swap 程序
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2132-sort-过程" class="md-nav__link">
    <span class="md-ellipsis">
      2.13.2 sort 过程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.13.2 sort 过程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sort-的寄存器分配" class="md-nav__link">
    <span class="md-ellipsis">
      sort 的寄存器分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#为-sort-过程体生成代码" class="md-nav__link">
    <span class="md-ellipsis">
      为 sort 过程体生成代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-中的过程调用" class="md-nav__link">
    <span class="md-ellipsis">
      sort 中的过程调用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-中的参数传递" class="md-nav__link">
    <span class="md-ellipsis">
      sort 中的参数传递
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#在-sort-中保存寄存器" class="md-nav__link">
    <span class="md-ellipsis">
      在 sort 中保存寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#完整的-sort-过程" class="md-nav__link">
    <span class="md-ellipsis">
      完整的 sort 过程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#214-数组与指针" class="md-nav__link">
    <span class="md-ellipsis">
      2.14 数组与指针
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.14 数组与指针">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2141-用数组实现-clear" class="md-nav__link">
    <span class="md-ellipsis">
      2.14.1 用数组实现 clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2142-用指针实现-clear" class="md-nav__link">
    <span class="md-ellipsis">
      2.14.2 用指针实现 clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2143-比较两个版本的-clear" class="md-nav__link">
    <span class="md-ellipsis">
      2.14.3 比较两个版本的 clear
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Arithmetic for Computers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 The Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 Large and Fast: Exploiting Memory Hierarchy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 Storage and Other I/O Topics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../lab/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    实验部分
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_3_3" id="__nav_2_9_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_9_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_3_3">
            <span class="md-nav__icon md-icon"></span>
            实验部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/lab0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 0: Vivado 介绍与模块封装
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/lab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 1: ALU、Regfiles 设计与有限状态机
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/lab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 2: CPU 调试 SOC 系统设计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/lab3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 3: 复杂操作实现
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/lab4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 4: 单周期 CPU
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lab/lab5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 5: 流水线 CPU
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../database_system/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    数据库系统
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_4" id="__nav_2_9_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_4">
            <span class="md-nav__icon md-icon"></span>
            数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Introduction to the Relational Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Introduction to SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 Advanced SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 Entity-Relationship Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 Relational Database Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 Storage and File Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 Indexing and Hashing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 Query Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 Query Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 Transactions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    12 Concurrency Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../database_system/ch13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    13 Recovery System
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../computer_architecture/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机体系结构
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9_5" id="__nav_2_9_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_5">
            <span class="md-nav__icon md-icon"></span>
            计算机体系结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_9_5_2" >
        
          
          <label class="md-nav__link" for="__nav_2_9_5_2" id="__nav_2_9_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    理论部分
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_9_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9_5_2">
            <span class="md-nav__icon md-icon"></span>
            理论部分
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_architecture/theory/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Fundamentals of Quantitative Design and Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_architecture/theory/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Pipelining: Basic and Intermediate Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_architecture/theory/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Memory Hierarchy Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_architecture/theory/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 Instruction-Level Parallelism and Its Exploitation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_architecture/theory/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 Thread-Level Parallelism
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../computer_architecture/lab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实验部分
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../module_courses/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    专业模块课程
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_10" id="__nav_2_10_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            专业模块课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../module_courses/cryptography/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    密码学
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_10_2" id="__nav_2_10_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10_2">
            <span class="md-nav__icon md-icon"></span>
            密码学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_10_2_2" id="__nav_2_10_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    整理
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_10_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10_2_2">
            <span class="md-nav__icon md-icon"></span>
            整理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc1.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 数学基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 古典密码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc3.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Hash 函数 MD5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc4.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 分组密码工作模式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc5.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 流密码算法 RC4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc6.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 DES
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc7.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 AES
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc8.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 RSA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/doc/doc9.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 ECC
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch1.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 数学基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 古典密码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch3.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Hash 函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch4.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 分组密码工作模式与流密码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch5.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 DES 算法和 AES 算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch6.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 RSA 算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module_courses/cryptography/ch7.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 椭圆曲线算法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_11" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../practical_teaching/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    实践教学环节
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_11" id="__nav_2_11_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_11">
            <span class="md-nav__icon md-icon"></span>
            实践教学环节
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../practical_teaching/practical_course_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    课程综合实践Ⅰ
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_12" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../personal_courses/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    个性修读课程
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_12" id="__nav_2_12_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_12">
            <span class="md-nav__icon md-icon"></span>
            个性修读课程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_12_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../personal_courses/organic_chemistry/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    有机化学
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_12_2" id="__nav_2_12_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_12_2">
            <span class="md-nav__icon md-icon"></span>
            有机化学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../personal_courses/organic_chemistry/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 有机化合物分子结构基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../personal_courses/organic_chemistry/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 脂肪烃和脂环烃
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../common_sense/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    大学生生活常识
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            大学生生活常识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/hospital/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    医院看病流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/medical_insurance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    医保
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/transportation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如何乘坐交通工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/rent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    租房流程及注意事项
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/cooking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    做饭的基本逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/administrative_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    行政服务办理流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../common_sense/resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    如何写简历
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    软件
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            软件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/vivado/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Vivado
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Vivado
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/vscode/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    VS Code
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            VS Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../application/vscode/copilot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Github Copilot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../application/watt_toolkit/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Watt Toolkit
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Watt Toolkit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    知识
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            知识
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/python/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/anaconda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anaconda
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/python/basic/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Python 编程基础
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2_3" id="__nav_5_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3">
            <span class="md-nav__icon md-icon"></span>
            Python 编程基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/basic/ch0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 Python 环境及编辑器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/basic/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Python 基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/basic/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 控制流
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/basic/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/basic/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 列表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/basic/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 字典和结构化数据
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/python/pytorch/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    PyTorch 深度学习
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2_4" id="__nav_5_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_4">
            <span class="md-nav__icon md-icon"></span>
            PyTorch 深度学习
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2_4_2" id="__nav_5_2_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    7 现代卷积神经网络
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            7 现代卷积神经网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.1 AlexNet 深度卷积神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.2 VGG 使用块的网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.3 NiN 网络中的网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.4 GoogLeNet 含并行连结的网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.5 批量规范化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.6 ResNet 残差网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch7/ch7_7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7.7 DenseNet 稠密连接网络
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4_3" >
        
          
          <label class="md-nav__link" for="__nav_5_2_4_3" id="__nav_5_2_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    8 循环神经网络
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_4_3">
            <span class="md-nav__icon md-icon"></span>
            8 循环神经网络
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch8/ch8_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8.1 序列模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch8/ch8_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8.2 文本预处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch8/ch8_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8.3 语言模型和数据集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/python/pytorch/ch8/ch8_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8.4 循环神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/C_Cpp/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    C/C++
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            C/C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/web/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Web
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/web/html/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/web/css/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CSS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../knowledge/web/javascript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JavaScript
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../knowledge/markdown/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Markdown
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Markdown
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../tools/git/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Git
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Git
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/git/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 安装与配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/git/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 基本操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/git/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 分支操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/git/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 远程操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/git/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 多人协作
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../tools/github/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Github
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Github
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../tools/github/github_pages/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Github Pages
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_2">
            <span class="md-nav__icon md-icon"></span>
            Github Pages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../tools/mkdocs/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    MkDocs
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            MkDocs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../../tools/mkdocs/material/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Material for MkDocs
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_4_2" id="__nav_6_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_2">
            <span class="md-nav__icon md-icon"></span>
            Material for MkDocs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/mkdocs/material/ch1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 预备工作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/mkdocs/material/ch2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 简单使用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/mkdocs/material/ch3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 发布网站
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/mkdocs/material/ch4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 探索配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tools/mkdocs/material/ch5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 深度理解
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#22-计算机硬件的操作" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 计算机硬件的操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-计算机硬件的操作数" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 计算机硬件的操作数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3 计算机硬件的操作数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-存储器操作数" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.1 存储器操作数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-常数或立即数操作数" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.2 常数或立即数操作数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-计算机中指令的表示" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 计算机中指令的表示
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 计算机中指令的表示">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#251-risc-v-字段" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.1 RISC-V 字段
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-逻辑操作" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 逻辑操作
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#27-决策指令" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 决策指令
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.7 决策指令">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#271-循环" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.1 循环
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#272-边界检查的捷径" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.2 边界检查的捷径
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#273-caseswitch-语句" class="md-nav__link">
    <span class="md-ellipsis">
      2.7.3 case/switch 语句
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#28-计算机硬件对过程的支持" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 计算机硬件对过程的支持
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.8 计算机硬件对过程的支持">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#281-使用更多的寄存器" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.1 使用更多的寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#282-嵌套过程" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.2 嵌套过程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#283-在栈中为新数据分配空间" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.3 在栈中为新数据分配空间
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#284-在堆中为新数据分配空间" class="md-nav__link">
    <span class="md-ellipsis">
      2.8.4 在堆中为新数据分配空间
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#29-人机交互" class="md-nav__link">
    <span class="md-ellipsis">
      2.9 人机交互
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#210-risc-v-中立即数和地址的寻址" class="md-nav__link">
    <span class="md-ellipsis">
      2.10 RISC-V 中立即数和地址的寻址
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.10 RISC-V 中立即数和地址的寻址">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2101-立即数" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.1 立即数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2102-分支和跳转中的寻址" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.2 分支和跳转中的寻址
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2103-risc-v-寻址模式总结" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.3 RISC-V 寻址模式总结
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2104-机器语言解码" class="md-nav__link">
    <span class="md-ellipsis">
      2.10.4 机器语言解码
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#211-并行与指令同步" class="md-nav__link">
    <span class="md-ellipsis">
      2.11 并行与指令：同步
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#212-翻译并执行程序" class="md-nav__link">
    <span class="md-ellipsis">
      2.12 翻译并执行程序
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#213-以一个-c-排序程序为例" class="md-nav__link">
    <span class="md-ellipsis">
      2.13 以一个 C 排序程序为例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.13 以一个 C 排序程序为例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2131-swap-过程" class="md-nav__link">
    <span class="md-ellipsis">
      2.13.1 swap 过程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.13.1 swap 过程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#为-swap-分配寄存器" class="md-nav__link">
    <span class="md-ellipsis">
      为 swap 分配寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#为-swap-过程体生成代码" class="md-nav__link">
    <span class="md-ellipsis">
      为 swap 过程体生成代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#完整的-swap-程序" class="md-nav__link">
    <span class="md-ellipsis">
      完整的 swap 程序
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2132-sort-过程" class="md-nav__link">
    <span class="md-ellipsis">
      2.13.2 sort 过程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.13.2 sort 过程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sort-的寄存器分配" class="md-nav__link">
    <span class="md-ellipsis">
      sort 的寄存器分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#为-sort-过程体生成代码" class="md-nav__link">
    <span class="md-ellipsis">
      为 sort 过程体生成代码
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-中的过程调用" class="md-nav__link">
    <span class="md-ellipsis">
      sort 中的过程调用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-中的参数传递" class="md-nav__link">
    <span class="md-ellipsis">
      sort 中的参数传递
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#在-sort-中保存寄存器" class="md-nav__link">
    <span class="md-ellipsis">
      在 sort 中保存寄存器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#完整的-sort-过程" class="md-nav__link">
    <span class="md-ellipsis">
      完整的 sort 过程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#214-数组与指针" class="md-nav__link">
    <span class="md-ellipsis">
      2.14 数组与指针
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.14 数组与指针">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2141-用数组实现-clear" class="md-nav__link">
    <span class="md-ellipsis">
      2.14.1 用数组实现 clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2142-用指针实现-clear" class="md-nav__link">
    <span class="md-ellipsis">
      2.14.2 用指针实现 clear
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2143-比较两个版本的-clear" class="md-nav__link">
    <span class="md-ellipsis">
      2.14.3 比较两个版本的 clear
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  <!-- 修改 content.html https://github.com/squidfunk/mkdocs-material/blob/master/material/templates/partials/content.html -->


<!-- 修改 actions.html https://github.com/squidfunk/mkdocs-material/blob/master/material/templates/partials/actions.html -->

  <!-- 若 meta 中 edit 为 false，则不加 edit 按钮 -->
	
    <a href="https://github.com/WintermelonC/WintermelonC_Docs/edit/main/docs/zju/compulsory_courses/computer_organization/theory/ch2.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  <!-- 若 meta 中 view 为 false，则不加 view 按钮 -->
	
    
      
    
    <a href="https://github.com/WintermelonC/WintermelonC_Docs/raw/main/docs/zju/compulsory_courses/computer_organization/theory/ch2.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  

<!-- 如果页面为首页，则不加 <h1> -->

<h1 id="2-instructions-language-of-the-computer">2 Instructions: Language of the Computer<a class="headerlink" href="#2-instructions-language-of-the-computer" title="Permanent link">&para;</a></h1>
<!-- !!! tip "说明"

    本文档正在更新中…… -->

<div class="admonition info">
<p class="admonition-title">说明</p>
<ol>
<li>部分内容由 AI 翻译课本原文，可能存在错误</li>
<li>本文档仅涉及部分内容，仅可用于复习重点知识</li>
<li>部分课本练习题答案可能存在错误，欢迎在评论区指出，也可以写下你的疑问</li>
</ol>
</div>
<h2 id="22-计算机硬件的操作">2.2 计算机硬件的操作<a class="headerlink" href="#22-计算机硬件的操作" title="Permanent link">&para;</a></h2>
<p>RISC-V 操作数（operands）：</p>
<figure>
    <img alt="Img 1" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img1.png" width="800" />
</figure>
<p>RISC-V 寄存器约定：</p>
<figure>
    <img alt="Img 5" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img5.png" width="600" />
</figure>
<p>RISC-V 汇编语言（assembly language）：</p>
<figure>
    <img alt="Img 2" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img2.png" width="800" />
</figure>
<figure>
    <img alt="Img 3" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img3.png" width="800" />
</figure>
<div class="admonition example">
<p class="admonition-title">把 C 语言中一条复杂的赋值语句编译成 RISC-V</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">h</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">add</span><span class="w"> </span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">h</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">add</span><span class="w"> </span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="n">sub</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="n">t1</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>t0 和 t1 是临时寄存器</p>
</div>
<details class="question" open="open">
<summary>课本 2.1</summary>
<p>For the following C statement, write the corresponding RISC-V assembly code. Assume that the C variables f, g, and h, have already been placed in registers x5, x6, and x7 respectively. Use a minimal number of RISC-V assembly instructions.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">h</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">5</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.2</summary>
<p>Write a single C statement that corresponds to the two RISC-V assembly instructions below.</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">add</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">h</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">add</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">f</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<h2 id="23-计算机硬件的操作数">2.3 计算机硬件的操作数<a class="headerlink" href="#23-计算机硬件的操作数" title="Permanent link">&para;</a></h2>
<p>在 RISC-V 体系结构中寄存器大小为 64 bit，由于 64 bit 为 1 组的情况经常出现，因此在 RISC-V 体系结构中将其称为 <span class="arithmatex">\(doubleword\)</span>，32 bit 为 1 组则称为 <span class="arithmatex">\(word\)</span></p>
<div class="admonition example">
<p class="admonition-title">使用寄存器编译 C 赋值语句</p>
<p>f, g, h, i, j 分别存储在寄存器 x19, x20, x21, x22, x23 当中</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">h</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span><span class="w">  </span><span class="c1">// x5 = g + h</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">x23</span><span class="w">  </span><span class="c1">// x6 = i + j</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="n">sub</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// f = x5 - x6</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
<h3 id="231-存储器操作数">2.3.1 存储器操作数<a class="headerlink" href="#231-存储器操作数" title="Permanent link">&para;</a></h3>
<p>如上所述，RISC-V 的算术运算只对寄存器进行操作，因此，RISC-V 必须包含在存储器和寄存器之间传送数据的指令。这些指令叫做 <strong>数据传送指令</strong>（data transfer instruction）</p>
<p>将数据从存储器拷贝到寄存器的数据传送指令，通常叫 <strong>取数指令</strong>（load），RISC-V 中记为 <code>ld</code>，表示 <span class="arithmatex">\(load\ doubleword\)</span></p>
<div class="admonition example">
<p class="admonition-title">编译一个操作数在存储器中的 C 赋值语句</p>
<p>设 A 是一个含 100 个 doubleword 的数组，g，h 分别存储在 x20，x21 中。A 数组的基址（base address）存储在 x22 中</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">ld</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="mh">64</span><span class="p">(</span><span class="n">x22</span><span class="p">)</span><span class="w">  </span><span class="c1">// 为什么是 64 呢，见下文</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="n">x9</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>x22 称为基址寄存器（base register），8 称为偏移量（offset）</p>
</div>
<figure>
    <img alt="Img 10" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img10.png" width="400" />
</figure>
<p>很多程序都用到字节类型，且大多数体系结构按字节编址。因此，一个双字的地址必和它所包括的八个字节中的某个地址相匹配，且连续双字的地址相差 8。上图中展示了实际的 RISC-V 地址，其中第三个双字的字节地址为 16</p>
<ol>
<li>大端编址（big-endian）：最高有效位在低地址</li>
<li>小端编址（little-endian）：最低有效位在低地址</li>
</ol>
<figure>
    <img alt="Img 11" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img11.png" width="600" />
</figure>
<p><mark>RISC-V 使用小端编址</mark></p>
<p>字节寻址也影响到数组下标。在上面的代码中，为了得到正确的字节地址，与基址寄存器相加的偏移量必须是 <span class="arithmatex">\(8 \times 8\)</span>，即 64，这样才能正确读到 A[8] 的数据</p>
<details class="question" open="open">
<summary>课本 2.5</summary>
<p>Show how the value 0xabcdef12 would be arranged in memory of a little-endian and a big-endian machine. Assume the data are stored starting at address 0 and that the word size is 4 bytes.</p>
<details class="success">
<summary>答案</summary>
<p><figure markdown="span">
    <img alt="Img 19" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img19.png" width="600" />
</figure></p>
</details>
</details>
<p>与取数指令相对应的指令通常叫做 <strong>存数指令</strong>（store），它将数据从寄存器拷贝到存储器。RISC-V 中为 <code>sd</code>，表示 <span class="arithmatex">\(store\ doubleword\)</span></p>
<div class="admonition example">
<p class="admonition-title">用取数/存数指令进行编译</p>
<p>h 存储在 x21，A 的基地址存储在 x22</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">A</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">ld</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="mh">64</span><span class="p">(</span><span class="n">x22</span><span class="p">)</span><span class="w">  </span><span class="c1">// 得到 A[8] 的值</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="n">x9</span><span class="w">  </span><span class="c1">// h + A[8]</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="mh">96</span><span class="p">(</span><span class="n">x22</span><span class="p">)</span><span class="w">  </span><span class="c1">// 存储到 A[12] 中</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
<h3 id="232-常数或立即数操作数">2.3.2 常数或立即数操作数<a class="headerlink" href="#232-常数或立即数操作数" title="Permanent link">&para;</a></h3>
<p>加立即数 <code>addi</code>（add immediate）</p>
<p>RISC-V 将寄存器 x0 恒置为 0</p>
<details class="question" open="open">
<summary>课本 2.3</summary>
<p>For the following C statement, write the corresponding RISC-V assembly code. Assume that the variables f, g, h, i, and j are assigned to registers x5, x6, x7, x28, and x29, respectively. Assume that the base address of the arrays A and B are in registers x10 and x11, respectively.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="n">B</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">j</span><span class="p">];</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">sub</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="w">  </span><span class="c1">// x5 = i - j</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="n">slli</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x5 = 8(i - j)</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="w">  </span><span class="c1">// x5 = &amp;A[i - j]</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="n">ld</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = A[i - j]</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="n">sd</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">64</span><span class="p">(</span><span class="n">x11</span><span class="p">)</span><span class="w">  </span><span class="c1">// B[8] = A[i - j]</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.4</summary>
<p>For the RISC-V assembly instructions below, what is the corresponding C statement? Assume that the variables f, g, h, i, and j are assigned to registers x5, x6, x7, x28, and x29, respectively. Assume that the base address of the arrays A and B are in registers x10 and x11, respectively.</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="n">slli</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x30 = f*8</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="w">  </span><span class="c1">// x30 = &amp;A[f]</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="n">slli</span><span class="w"> </span><span class="n">x31</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x31 = g*8</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="n">add</span><span class="w"> </span><span class="n">x31</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">x31</span><span class="w">  </span><span class="c1">// x31 = &amp;B[g]</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="n">ld</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x30</span><span class="p">)</span><span class="w">  </span><span class="c1">// f = A[f]</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="n">addi</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="n">ld</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="n">add</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="n">sd</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x31</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="n">addi</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="w">  </span><span class="c1">// x12 = &amp;A[f + 1]</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="n">ld</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span><span class="w">  </span><span class="c1">// x30 = A[f + 1]</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="n">add</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="w">  </span><span class="c1">// x30 = A[f + 1] + A[f]</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="n">sd</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x31</span><span class="p">)</span><span class="w">  </span><span class="c1">// B[g] = A[f + 1] + A[f]</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">B</span><span class="p">[</span><span class="n">g</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">f</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">f</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.7</summary>
<p>Translate the following C code to RISC-V. Assume that the variables f, g, h, i, and j are assigned to registers x5, x6, x7, x28, and x29, respectively. Assume that the base address of the arrays A and B are in registers x10 and x11, respectively. Assume that the elements of the arrays A and B are 8-byte words:</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="n">B</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span>
<span class="normal"><a href="#__codelineno-18-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">slli</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x5 = 8 * i</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="w">  </span><span class="c1">// x5 = &amp;A[i]</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = A[i]</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="n">slli</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x5 = 8 * j</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="w">  </span><span class="c1">// x5 = &amp;A[j]</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x7 = A[j]</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="w">  </span><span class="c1">// x5 = x6 + x7</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="n">sd</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">64</span><span class="p">(</span><span class="n">x11</span><span class="p">)</span><span class="w">  </span><span class="c1">// B[8] = x5</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.8</summary>
<p>Translate the following RISC-V code to C. Assume that the variables f, g, h, i, and j are assigned to registers x5, x6, x7, x28, and x29, respectively. Assume that the base address of the arrays A and B are in registers x10 and x11, respectively.</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">x31</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x31</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x30</span><span class="p">)</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="n">ld</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x30</span><span class="p">)</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x31</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="w">  </span><span class="c1">// x30 = &amp;A[1]</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">x31</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// x31 = &amp;A[0]</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x31</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x30</span><span class="p">)</span><span class="w">  </span><span class="c1">// A[1] = &amp;A[0]</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="n">ld</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x30</span><span class="p">)</span><span class="w">  </span><span class="c1">// x30 = &amp;A[0]</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x31</span><span class="w">  </span><span class="c1">// x5 = 2 * &amp;A[0]</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<h2 id="25-计算机中指令的表示">2.5 计算机中指令的表示<a class="headerlink" href="#25-计算机中指令的表示" title="Permanent link">&para;</a></h2>
<p>指令的布局形式叫做 <strong>指令格式</strong>（instruction format）。所有 RISC-V 指令都是 32 位长</p>
<p>为了将它与汇编语言区分开来，把指令的数字形式称为 <strong>机器语言</strong> （machine language），这样的指令序列叫做 <strong>机器码</strong>（machine code）</p>
<h3 id="251-risc-v-字段">2.5.1 RISC-V 字段<a class="headerlink" href="#251-risc-v-字段" title="Permanent link">&para;</a></h3>
<p><strong>RISC-V Fields</strong></p>
<figure>
    <img alt="Img 12" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img12.png" width="600" />
</figure>
<ol>
<li>opcode：指令的基本操作，通常称为 <strong>操作码</strong></li>
<li>rd：用于存放操作结果的寄存器</li>
<li>funct3：附加操作码</li>
<li>rs1：第一个源操作数寄存器</li>
<li>rs2：第二个源操作数寄存器</li>
<li>funct7：附加操作码</li>
</ol>
<p>RISC-V 指令的格式：</p>
<figure>
    <img alt="Img 8" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img8.png" width="800" />
</figure>
<h2 id="26-逻辑操作">2.6 逻辑操作<a class="headerlink" href="#26-逻辑操作" title="Permanent link">&para;</a></h2>
<p><strong>Logical Operations</strong></p>
<figure>
    <img alt="Img 13" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img13.png" width="600" />
</figure>
<details class="question" open="open">
<summary>课本 2.12</summary>
<p>Provide the instruction type and assembly language instruction for the following binary value:</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">machine code</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="mh">0000</span><span class="w"> </span><span class="mh">0000</span><span class="w"> </span><span class="mh">0001</span><span class="w"> </span><span class="mh">0000</span><span class="w"> </span><span class="mh">1000</span><span class="w"> </span><span class="mh">0000</span><span class="w"> </span><span class="mh">1011</span><span class="w"> </span><span class="mh">0011</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p><code>opcode = 0110011</code></p>
<p>R-type</p>
<p><code>funct7 = 0000000</code><br/>
<code>rs2 = 00001</code><br/>
<code>rs1 = 00001</code><br/>
<code>funct3 = 000</code><br/>
<code>rd = 00001</code></p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">add</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">x1</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.13</summary>
<p>Provide the instruction type and hexadecimal representation of the following instruction:</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="n">sd</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">32</span><span class="p">(</span><span class="n">x30</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p>S-type</p>
<p><figure markdown="span">
    <img alt="Img 20" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img20.png" width="600" />
</figure></p>
<p><span class="arithmatex">\(immed = 32_{10} = 000\_000\_100\_000_2\)</span><br/>
<span class="arithmatex">\(rs2 = 5_{10} = 00101_2\)</span><br/>
<span class="arithmatex">\(rs1 = 30_{10} = 11110_2\)</span><br/>
<span class="arithmatex">\(funct3 = 011\)</span><br/>
<span class="arithmatex">\(opcode = 0100011\)</span></p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">machine code</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="mh">0000</span><span class="w"> </span><span class="mh">0010</span><span class="w"> </span><span class="mh">0101</span><span class="w"> </span><span class="mh">1111</span><span class="w"> </span><span class="mh">0011</span><span class="w"> </span><span class="mh">0000</span><span class="w"> </span><span class="mh">0010</span><span class="w"> </span><span class="mh">0011</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.14</summary>
<p>Provide the instruction type, assembly language instruction, and binary representation of instruction described by the following RISC-V fields:</p>
<p><code>opcode=0x33, funct3=0x0, funct7=0x20, rs2=5, rs1=7, rd=6</code></p>
<details class="success">
<summary>答案</summary>
<p><code>opcode = 0110011</code></p>
<p>R-type</p>
<p><code>funct3 = 000</code><br/>
<code>funct7 = 0100000</code></p>
<p>sub</p>
<p><code>rs2 = 00101</code><br/>
<code>rs1 = 00111</code><br/>
<code>rd = 00110</code></p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">sub</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">machine code</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="mh">0100</span><span class="w"> </span><span class="mh">0000</span><span class="w"> </span><span class="mh">0101</span><span class="w"> </span><span class="mh">0011</span><span class="w"> </span><span class="mh">1000</span><span class="w"> </span><span class="mh">0011</span><span class="w"> </span><span class="mh">0011</span><span class="w"> </span><span class="mh">0011</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.15</summary>
<p>Provide the instruction type, assembly language instruction, and binary representation of instruction described by the following RISC-V fields:</p>
<p><code>opcode=0x3, funct3=0x3, rs1=27, rd=3, imm=0x4</code></p>
<details class="success">
<summary>答案</summary>
<p><code>opcode = 0000011</code></p>
<p>I-type</p>
<p><code>funct3 = 011</code></p>
<p>ld</p>
<p><code>rs1 = 11011</code><br/>
<code>rd = 00011</code><br/>
<code>imm = 000_000_000_100</code></p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="n">ld</span><span class="w"> </span><span class="n">x3</span><span class="p">,</span><span class="w"> </span><span class="mh">4</span><span class="p">(</span><span class="n">x27</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">machine code</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="mh">0000</span><span class="w"> </span><span class="mh">0000</span><span class="w"> </span><span class="mh">0100</span><span class="w"> </span><span class="mh">1101</span><span class="w"> </span><span class="mh">1011</span><span class="w"> </span><span class="mh">0001</span><span class="w"> </span><span class="mh">1000</span><span class="w"> </span><span class="mh">0011</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.17</summary>
<p>Assume the following register contents:</p>
<p><code>x5 = 0x00000000AAAAAAAA, x6 = 0x1234567812345678</code></p>
<p>(1) For the register values shown above, what is the value of x7 for the following sequence of instructions?</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="n">slli</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">4</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="k">or</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span></code></pre></div></td></tr></table></div>
<p>(2) For the register values shown above, what is the value of x7 for the following sequence of instructions?</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="n">slli</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">4</span>
</span></code></pre></div></td></tr></table></div>
<p>(3) For the register values shown above, what is the value of x7 for the following sequence of instructions?</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="n">srli</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="n">andi</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="n">xFEF</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p>(1) <code>x7 = x5 &lt;&lt; 4 = 0x0000_000A_AAAA_AAA0</code><br/>
<code>x7 = x7 or x6 = 0x1234_567A_BABE_FEF8</code></p>
<hr />
<p>(2) <code>x7 = x6 &lt;&lt; 4 = 0x2345_6781_2345_6780</code></p>
<hr />
<p>(3) <code>x7 = x5 &gt;&gt; 3 = 0x0000_0000_1555_5555</code><br/>
<code>x7 = x7 and 0xFEF = 0x0000_0000_0000_0545</code></p>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.20</summary>
<p>For the following C statement, write a minimal sequence of RISC-V assembly instructions that performs the identical operation. Assume x6 = A, and x17 is the base address of C.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="n">ld</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x17</span><span class="p">)</span><span class="w">  </span><span class="c1">// x5 = C[0]</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">4</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<h2 id="27-决策指令">2.7 决策指令<a class="headerlink" href="#27-决策指令" title="Permanent link">&para;</a></h2>
<p><strong>Instructions for Making Decisions</strong></p>
<p><code>beq rs1, rs2, L1</code></p>
<p>如果 rs1 和 rs2 中的数值相等，则转到标签为 L1 的语句执行。<code>beq</code> 代表如果相等则分支（branch if equal）</p>
<p><code>bne rs1, rs2, L1</code></p>
<p>如果 rs1 和 rs2 中的数值不相等，则转到标签为 L1 的语句执行。<code>bne</code> 代表如果不相等则分支（branch if not equal）</p>
<p>这两条指令称为 <strong>条件分支指令</strong>（conditional branches）</p>
<div class="admonition example">
<p class="admonition-title">将 if-then-else 语句编译成条件分支指令</p>
<p>f，g，h，i，j 分别存储在 x19，x20，x21，x22，x23 中</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">    </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">h</span><span class="p">;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">    </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">h</span><span class="p">;</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span>
<span class="normal"><a href="#__codelineno-35-3">3</a></span>
<span class="normal"><a href="#__codelineno-35-4">4</a></span>
<span class="normal"><a href="#__codelineno-35-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="hll"><span class="n">bne</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">x23</span><span class="p">,</span><span class="w"> </span><span class="n">Else</span>
</span></span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="hll"><span class="n">beq</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">Exit</span>
</span></span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="nl">Else:</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="nl">Exit:</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>line 1：通常，通过测试分支的相反条件来跳过 if 语句后面的 then 部分，代码的效率会更高，所以使用 bne 指令</p>
<p>line 3：在 if 语句的结尾部分，需要引入另一种分支指令，通常叫做无条件分支指令（unconditional branch）。一种方式便是使用此指令，其条件永为 true</p>
</div>
<h3 id="271-循环">2.7.1 循环<a class="headerlink" href="#271-循环" title="Permanent link">&para;</a></h3>
<div class="admonition example">
<p class="admonition-title">编译 C 语言 while 循环语句</p>
<p>i，k 存储在 x22，x24 中，save 数组基址存储在 x25</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">save</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="nl">Loop:</span><span class="w"> </span><span class="n">slli</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x10 = 8 * i</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x25</span><span class="w">  </span><span class="c1">// 获得 save[i] 的地址</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x10</span><span class="p">)</span><span class="w">  </span><span class="c1">// x9 = save[i]</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="n">bne</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="n">x24</span><span class="p">,</span><span class="w"> </span><span class="n">Exit</span><span class="w">  </span><span class="c1">// 如果 x9 ≠ x24，Exit 退出循环</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="n">beq</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">Loop</span>
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="nl">Exit:</span>
</span></code></pre></div></td></tr></table></div>
</div>
</div>
<h3 id="272-边界检查的捷径">2.7.2 边界检查的捷径<a class="headerlink" href="#272-边界检查的捷径" title="Permanent link">&para;</a></h3>
<p>将有符号数作为无符号数来处理，是一种检验 <span class="arithmatex">\(0 \leqslant x &lt; y\)</span> 的低开销方法，常用于检查数组的下标是否越界。问题的关键是负数在二进制补码表示法中看起来像是无符号表示法中一个很大的数因为在无符号数中最高有效位是符号位，而有符号数中最高有效位是具有最大权重的位。所以使用无符号比较 <span class="arithmatex">\(x &lt; y\)</span>，在检查 x 是否小于 y 的同时，也检查了 x 是否为一个负数</p>
<p><code>bgeu x20, x11, IndexOutOfBounds</code></p>
<p>如果 <span class="arithmatex">\(x20 \geqslant x11\)</span> 或者 <span class="arithmatex">\(x20 &lt; 0\)</span>，则跳转至 IndexOutOfBounds</p>
<h3 id="273-caseswitch-语句">2.7.3 case/switch 语句<a class="headerlink" href="#273-caseswitch-语句" title="Permanent link">&para;</a></h3>
<p>大多数程序设计语言中都包括 case 或 switch 语句，使得程序员可以根据某个变量的值选择不同分支之一。实现 switch 语句的最简单方法是借助一系列的条件判断，将 switch 语句转化为 if-then-else 语句嵌套</p>
<p>有时候另一种更有效的方法是将多个指令序列分支的地址编码为一张表，即 <strong>转移地址表</strong>（branch address table / branch table）。这样程序只需索引该表即可跳转到恰当的指令序列。转移地址表是一个由代码中标签所对应地址构成的数组。程序需要跳转的时候首先将转移地址表中适当的项加载到寄存器中，然后使用寄存器中的地址值进行跳转。为了支持这种情况，RISC-V 提供了寄存器跳转指令 <code>jalr</code>，用来无条件地跳转到寄存器指定的地址</p>
<details class="question" open="open">
<summary>课本 2.21</summary>
<p>Assume x5 holds the value 0x00000000001010000. What is the value of x6 after the following instructions?</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="n">bge</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">ELSE</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="n">jal</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">DONE</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="nl">ELSE:</span><span class="w"> </span><span class="n">ori</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="nl">DONE:</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="n">x6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">00</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="mh">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">10</span>
</span></code></pre></div></td></tr></table></div>
<p><span class="arithmatex">\(x6 = 10_2 = 2_{10}\)</span></p>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.24</summary>
<p>Consider the following RISC-V loop:</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">1</a></span>
<span class="normal"><a href="#__codelineno-40-2">2</a></span>
<span class="normal"><a href="#__codelineno-40-3">3</a></span>
<span class="normal"><a href="#__codelineno-40-4">4</a></span>
<span class="normal"><a href="#__codelineno-40-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="nl">LOOP:</span><span class="w"> </span><span class="n">beq</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">DONE</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="n">jal</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">LOOP</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="nl">DONE:</span>
</span></code></pre></div></td></tr></table></div>
<p>(1) Assume that the register x6 is initialized to the value 10. What is the final value in register x5 assuming the x5 is initially zero?</p>
<p>(2) For the loop above, write the equivalent C code. Assume that the registers x5 and x6 are integers acc and i, respectively.</p>
<p>(3) For the loop written in RISC-V assembly above, assume that the register x6 is initialized to the value N. How many RISC-V instructions are executed?</p>
<p>(4) For the loop written in RISC-V assembly above, replace the instruction “beq x6, x0, DONE” with the instruction “blt x6, x0, DONE” and write the equivalent C code.</p>
<details class="success">
<summary>答案</summary>
<p>(1) 简单的循环问题，<code>x5 = 20</code></p>
<hr />
<p>(2)</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="n">acc</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<p>(3) 共 <span class="arithmatex">\(4N + 1\)</span> 次</p>
<hr />
<p>(4)</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span>
<span class="normal"><a href="#__codelineno-42-2">2</a></span>
<span class="normal"><a href="#__codelineno-42-3">3</a></span>
<span class="normal"><a href="#__codelineno-42-4">4</a></span>
<span class="normal"><a href="#__codelineno-42-5">5</a></span>
<span class="normal"><a href="#__codelineno-42-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">    </span><span class="n">acc</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">--</span><span class="p">;</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.27</summary>
<p>Translate the following loop into C. Assume that the C-level integer i is held in register x6,x5 holds the C-level integer called result, and x10 holds the base address of the integer MemArray.</p>
<blockquote>
<p>课本题干有误，本文档已修正</p>
</blockquote>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span>
<span class="normal"><a href="#__codelineno-43-5">5</a></span>
<span class="normal"><a href="#__codelineno-43-6">6</a></span>
<span class="normal"><a href="#__codelineno-43-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="nl">LOOP:</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x10</span><span class="p">)</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7"></a><span class="n">blt</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">LOOP</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span>
<span class="normal"><a href="#__codelineno-44-4">4</a></span>
<span class="normal"><a href="#__codelineno-44-5">5</a></span>
<span class="normal"><a href="#__codelineno-44-6">6</a></span>
<span class="normal"><a href="#__codelineno-44-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// x6 = 0</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">100</span><span class="w">  </span><span class="c1">// x29 = 100</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="nl">LOOP:</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x10</span><span class="p">)</span><span class="w">  </span><span class="c1">// x7 = MemArray[x10]</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="w">  </span><span class="c1">// x5 = x5 + x7</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="w">  </span><span class="c1">// x10 = x10 + 8</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="w">  </span><span class="c1">// x6 = x6 + 1</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="n">blt</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">LOOP</span><span class="w">  </span><span class="c1">// x6 &lt; x29</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">MemArray</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<h2 id="28-计算机硬件对过程的支持">2.8 计算机硬件对过程的支持<a class="headerlink" href="#28-计算机硬件对过程的支持" title="Permanent link">&para;</a></h2>
<p><strong>过程</strong>（procedure）或函数时程序员进行结构化编程的工具</p>
<p>在过程运行期间，程序必须遵循以下六个步骤：</p>
<ol>
<li>将参数放在过程可以访问到的位置</li>
<li>将控制转移给过程</li>
<li>获得过程所需的存储资源</li>
<li>执行请求的任务</li>
<li>将结果的值放在调用程序可以访问到的位置</li>
<li>将控制返回起始点，因为一个过程可能由一个程序中的多个点调用</li>
</ol>
<p>RISC-V 遵循以下约定：</p>
<ol>
<li>x10-x17：8 个寄存器用于传递参数和返回值</li>
<li>x1：用于返回起始点的返回地址寄存器</li>
</ol>
<p>RISC-V 还包含一条过程调用指令，跳转到某个地址的同时将下一条指令的地址保存在寄存器 rd 当中，这条 <strong>跳转和链接指令</strong>（jump-and-link-instruction）<code>jal</code> 格式为：</p>
<p><code>jal x1, ProcedureAddress</code></p>
<p>指令中的链接部分表示指向调用点的地址或链接，以允许过程返回到合适的地址。存储在寄存器 x1（ra） 中的链接部分称为 <strong>返回地址</strong>（return address）。返回地址是必需的，因为同一过程可能在程序的不同部分调用</p>
<p>为了支持这种情况，类似 RISC-V 的计算机使用了 <strong>寄存器跳转</strong>（jump register）指令 <code>jalr</code>，用于case 语句，表示无条件跳转到寄存器所指定的地址:</p>
<p><code>jalr x0, 0(x1)</code></p>
<p>调用程序称为 <strong>调用者</strong>（caller），将参数值放在 x10-x17 当中，使用 <code>jal</code> 指令跳转到某个过程（称为 <strong>被调用者</strong>（callee））被调用者执行运算，将结果放在某些寄存器当中，然后使用 <code>jalr</code> 指令将控制返回给 caller</p>
<h3 id="281-使用更多的寄存器">2.8.1 使用更多的寄存器<a class="headerlink" href="#281-使用更多的寄存器" title="Permanent link">&para;</a></h3>
<p>换出寄存器的最理想的数据结构是 <strong>栈</strong>（stack）。一种后进先出的队列。栈需要一个指针指向栈中最新分配的地址，以指示下一个过程放置换出寄存器的位置，或是寄存器旧值的存放位置。<strong>栈指针</strong>（stack pointer）按照每个被保存或恢复的寄存器以字为单位进行调整。RISC-V 中的栈指针为 x2（sp）。由于栈的应用十分广泛，因此向栈传递数据或从栈中取数都有专用术语：将数据放人栈中称为 <strong>压栈</strong>（push），从栈中移除数据称为 <strong>出栈</strong>（pop）</p>
<p>按照历史惯例，栈“增长”是按照地址从高到低的顺序进行的。这意味着将值压栈时，栈指针值减小；而值出栈时，栈长度缩短，栈指针增大</p>
<div class="admonition example">
<p class="admonition-title">编译一个不调用其他过程的 C 过程</p>
<p>g，h，i，j 存储在 x10，x11，x12，x13 中，f 存储在 x20 中</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span>
<span class="normal"><a href="#__codelineno-46-4">4</a></span>
<span class="normal"><a href="#__codelineno-46-5">5</a></span>
<span class="normal"><a href="#__codelineno-46-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="n">leaf_example</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="p">)</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="p">{</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">h</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">f</span><span class="p">;</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span>
<span class="normal"><a href="#__codelineno-47-7">7</a></span>
<span class="normal"><a href="#__codelineno-47-8">8</a></span>
<span class="normal"><a href="#__codelineno-47-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="hll"><span class="nl">leaf_example:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">8</span>
</span></span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="hll"><span class="n">sd</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span></span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="w">  </span><span class="c1">// x5 = g + h</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="n">add</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x13</span><span class="w">  </span><span class="c1">// x6 = i + j</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="n">sub</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// f = x5 - x6</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// 将 f 的值存储在 x10 中</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="hll"><span class="n">ld</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span></span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="hll"><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span></span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9"></a><span class="hll"><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></span></code></pre></div></td></tr></table></div>
</div>
<p>line 1-2：将 x20 压栈</p>
<p>line 7-8：将 x20 出栈，恢复 x20 原来的值</p>
<p>line 9：返回 caller，返回地址存储在 x1 当中</p>
</div>
<p>为了避免保存和恢复一个其值未被使用过的寄存器（通常是临时寄存器），RISC-V 将 19 个寄存器分为两组：</p>
<ol>
<li>x5-x7 和 x28-x31：临时寄存器，在过程调用中不必被 callee 保存</li>
<li>x8-x9 和 x18-x27：保留寄存器，在过程调用中必须被保存</li>
</ol>
<h3 id="282-嵌套过程">2.8.2 嵌套过程<a class="headerlink" href="#282-嵌套过程" title="Permanent link">&para;</a></h3>
<p><strong>Nested Procedures</strong></p>
<p>不调用其他过程的过程称为 <strong>叶过程</strong>（leaf procedure）</p>
<p>caller 将所有调用后还需要的参数寄存器 x10-x17 或临时寄存器 x5-x7 x28-x31 压栈。callee 将返回地址寄存器 x1 和 callee 使用的保留寄存器 x8-x9 x18-x27 都压栈。栈指针 x2（sp）随着栈中寄存器个数调整。到返回时，寄存器会从存储器中恢复，栈指针也随着重新调整</p>
<div class="admonition example">
<p class="admonition-title">编译一个递归 C 过程，演示嵌套过程的链接</p>
<p>n 存储在 x10 当中</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">1</a></span>
<span class="normal"><a href="#__codelineno-48-2">2</a></span>
<span class="normal"><a href="#__codelineno-48-3">3</a></span>
<span class="normal"><a href="#__codelineno-48-4">4</a></span>
<span class="normal"><a href="#__codelineno-48-5">5</a></span>
<span class="normal"><a href="#__codelineno-48-6">6</a></span>
<span class="normal"><a href="#__codelineno-48-7">7</a></span>
<span class="normal"><a href="#__codelineno-48-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">fact</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="p">{</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="nl">fact:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// 保存返回地址</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// 保存 caller 的参数 n</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x5 = x10 - 1</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="n">bge</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span><span class="w">  </span><span class="c1">// 若 (n - 1) &gt;= 0，跳转至 L1</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="w">  </span><span class="c1">// return 1</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span><span class="w">  </span><span class="c1">// pop 两个值</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span><span class="w">  </span><span class="c1">// 返回 caller</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="nl">L1:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// n = n - 1</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fact</span><span class="w">  </span><span class="c1">// 使用新的 n 值即 (n - 1) 调用 callee</span>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// x6 = fact(n - 1)</span>
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="n">ld</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// 恢复原来的 n 值 x10 = n</span>
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// 恢复原来的返回地址</span>
</span><span id="__span-49-14"><a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-49-15"><a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="n">mul</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// x10 = n * fact(n - 1)</span>
</span><span id="__span-49-16"><a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>我们拿 n = 2 来举个例子，首先某个地方调用了 fact 函数，比如</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span>
<span class="normal"><a href="#__codelineno-50-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="w">  </span><span class="c1">// x10 = n = 2</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fact</span>
</span></code></pre></div></td></tr></table></div>
<p>假设 x1 值为 001，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span>
<span class="normal"><a href="#__codelineno-51-4">4</a></span>
<span class="normal"><a href="#__codelineno-51-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="nl">fact:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x5 = 1</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="n">bge</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span><span class="w">  </span><span class="c1">// x5 &gt;= 0，跳转至 L1</span>
</span></code></pre></div></td></tr></table></div>
<p>此时 <code>sp = [2, 001]</code>，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span>
<span class="normal"><a href="#__codelineno-52-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="nl">L1:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x10 = n = 1</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fact</span><span class="w">  </span><span class="c1">// 假设 x1 = 002</span>
</span></code></pre></div></td></tr></table></div>
<p>现在 x1 值为 002，回到 fact，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1">1</a></span>
<span class="normal"><a href="#__codelineno-53-2">2</a></span>
<span class="normal"><a href="#__codelineno-53-3">3</a></span>
<span class="normal"><a href="#__codelineno-53-4">4</a></span>
<span class="normal"><a href="#__codelineno-53-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="nl">fact:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x5 = 0</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="n">bge</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span><span class="w">  </span><span class="c1">// x5 &gt;= 0，跳转至 L1</span>
</span></code></pre></div></td></tr></table></div>
<p>此时 <code>sp = [1, 002, 2, 001]</code>，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1">1</a></span>
<span class="normal"><a href="#__codelineno-54-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="nl">L1:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x10 = n = 0</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fact</span><span class="w">  </span><span class="c1">// 假设 x1 = 003</span>
</span></code></pre></div></td></tr></table></div>
<p>现在 x1 值为 003，回到 fact，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1">1</a></span>
<span class="normal"><a href="#__codelineno-55-2">2</a></span>
<span class="normal"><a href="#__codelineno-55-3">3</a></span>
<span class="normal"><a href="#__codelineno-55-4">4</a></span>
<span class="normal"><a href="#__codelineno-55-5">5</a></span>
<span class="normal"><a href="#__codelineno-55-6">6</a></span>
<span class="normal"><a href="#__codelineno-55-7">7</a></span>
<span class="normal"><a href="#__codelineno-55-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="nl">fact:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x5 = -1</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="n">bge</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span><span class="w">  </span><span class="c1">// x5 &lt; 0，不跳转</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="w">  </span><span class="c1">// return 1，即x10 = 1</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>此时 <code>sp = [1, 002, 2, 001]</code>，回到 x1 = 003，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1">1</a></span>
<span class="normal"><a href="#__codelineno-56-2">2</a></span>
<span class="normal"><a href="#__codelineno-56-3">3</a></span>
<span class="normal"><a href="#__codelineno-56-4">4</a></span>
<span class="normal"><a href="#__codelineno-56-5">5</a></span>
<span class="normal"><a href="#__codelineno-56-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// x6 = fact(0) = 1</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="n">ld</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// x10 = 1</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// x1 = 002</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5"></a><span class="n">mul</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// x10 = x10 * 1 = 1</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>此时 <code>sp = [2, 001]</code>，回到 x1 = 002，接下来运行</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1">1</a></span>
<span class="normal"><a href="#__codelineno-57-2">2</a></span>
<span class="normal"><a href="#__codelineno-57-3">3</a></span>
<span class="normal"><a href="#__codelineno-57-4">4</a></span>
<span class="normal"><a href="#__codelineno-57-5">5</a></span>
<span class="normal"><a href="#__codelineno-57-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// x6 = fact(1) = 1</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="n">ld</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// x10 = 2</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// x1 = 001</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5"></a><span class="n">mul</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// x10 = x10 * 1 = 2</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>此时 sp 无值，回到 x1 = 001， 接下来回到最开始那个 <code>jal x1, fact</code> caller，此时 x10 里的值即为 <code>fact(2) = 2</code></p>
</div>
<p>过程调用时保留和不保留的内容：</p>
<figure>
    <img alt="Img 4" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img4.png" width="600" />
</figure>
<div class="admonition tip">
<p class="admonition-title">一个简单且万能的实现方式</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1">1</a></span>
<span class="normal"><a href="#__codelineno-58-2">2</a></span>
<span class="normal"><a href="#__codelineno-58-3">3</a></span>
<span class="normal"><a href="#__codelineno-58-4">4</a></span>
<span class="normal"><a href="#__codelineno-58-5">5</a></span>
<span class="normal"><a href="#__codelineno-58-6">6</a></span>
<span class="normal"><a href="#__codelineno-58-7">7</a></span>
<span class="normal"><a href="#__codelineno-58-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">fact</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a><span class="p">{</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">fact</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>n 存储在 x10</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-59-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-59-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-59-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-59-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-59-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-59-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-59-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-59-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-59-10">10</a></span>
<span class="normal"><a href="#__codelineno-59-11">11</a></span>
<span class="normal"><a href="#__codelineno-59-12">12</a></span>
<span class="normal"><a href="#__codelineno-59-13">13</a></span>
<span class="normal"><a href="#__codelineno-59-14">14</a></span>
<span class="normal"><a href="#__codelineno-59-15">15</a></span>
<span class="normal"><a href="#__codelineno-59-16">16</a></span>
<span class="normal"><a href="#__codelineno-59-17">17</a></span>
<span class="normal"><a href="#__codelineno-59-18">18</a></span>
<span class="normal"><a href="#__codelineno-59-19">19</a></span>
<span class="normal"><a href="#__codelineno-59-20">20</a></span>
<span class="normal"><a href="#__codelineno-59-21">21</a></span>
<span class="normal"><a href="#__codelineno-59-22">22</a></span>
<span class="normal"><a href="#__codelineno-59-23">23</a></span>
<span class="normal"><a href="#__codelineno-59-24">24</a></span>
<span class="normal"><a href="#__codelineno-59-25">25</a></span>
<span class="normal"><a href="#__codelineno-59-26">26</a></span>
<span class="normal"><a href="#__codelineno-59-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="c1">// 存储参数</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="nl">fact:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="n">mv</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// 将参数 n 复制到 x8 中，之后需要用 n，就使用 x8</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6"></a>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="c1">// 分支跳转</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8"></a><span class="n">li</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="w">  </span><span class="c1">// x5 = 1</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9"></a><span class="n">blt</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">rtr_1</span><span class="w">  </span><span class="c1">// x8 &lt; x5 (n &lt; 1)，管你相反条件速度更快，能用就行（</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10"></a>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11"></a><span class="c1">// 最后一个 else 语句的内容</span>
</span><span id="__span-59-12"><a id="__codelineno-59-12" name="__codelineno-59-12"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x10 = n - 1</span>
</span><span id="__span-59-13"><a id="__codelineno-59-13" name="__codelineno-59-13"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fact</span><span class="w">  </span><span class="c1">// 调用 fact(n - 1)，最后的结果在 x10 当中</span>
</span><span id="__span-59-14"><a id="__codelineno-59-14" name="__codelineno-59-14"></a><span class="n">mul</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// x10 = n * fact(n - 1)</span>
</span><span id="__span-59-15"><a id="__codelineno-59-15" name="__codelineno-59-15"></a>
</span><span id="__span-59-16"><a id="__codelineno-59-16" name="__codelineno-59-16"></a><span class="c1">// 跳转到 end</span>
</span><span id="__span-59-17"><a id="__codelineno-59-17" name="__codelineno-59-17"></a><span class="n">j</span><span class="w"> </span><span class="k">end</span>
</span><span id="__span-59-18"><a id="__codelineno-59-18" name="__codelineno-59-18"></a>
</span><span id="__span-59-19"><a id="__codelineno-59-19" name="__codelineno-59-19"></a><span class="c1">// rtr_1</span>
</span><span id="__span-59-20"><a id="__codelineno-59-20" name="__codelineno-59-20"></a><span class="nl">rtr_1:</span><span class="w"> </span><span class="n">li</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span><span class="w">  </span><span class="c1">// return 1</span>
</span><span id="__span-59-21"><a id="__codelineno-59-21" name="__codelineno-59-21"></a><span class="c1">// j end 可以省略</span>
</span><span id="__span-59-22"><a id="__codelineno-59-22" name="__codelineno-59-22"></a>
</span><span id="__span-59-23"><a id="__codelineno-59-23" name="__codelineno-59-23"></a><span class="c1">// 恢复寄存器的值并返回</span>
</span><span id="__span-59-24"><a id="__codelineno-59-24" name="__codelineno-59-24"></a><span class="k">end</span><span class="o">:</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-59-25"><a id="__codelineno-59-25" name="__codelineno-59-25"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-59-26"><a id="__codelineno-59-26" name="__codelineno-59-26"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-59-27"><a id="__codelineno-59-27" name="__codelineno-59-27"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
</div>
<details class="question" open="open">
<summary>课本 2.25</summary>
<p>Translate the following C code to RISC-V assembly code. Use a minimum number of instructions. Assume that the values of a, b, i, and j are in registers x5, x6, x7, and x29, respectively. Also, assume that register x10 holds the base address of the array D.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1">1</a></span>
<span class="normal"><a href="#__codelineno-60-2">2</a></span>
<span class="normal"><a href="#__codelineno-60-3">3</a></span>
<span class="normal"><a href="#__codelineno-60-4">4</a></span>
<span class="normal"><a href="#__codelineno-60-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a><span class="w">         </span><span class="n">D</span><span class="p">[</span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
</span><span id="__span-60-4"><a id="__codelineno-60-4" name="__codelineno-60-4"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-60-5"><a id="__codelineno-60-5" name="__codelineno-60-5"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p><div class="grid" id="grid-mid">
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">第一个 for 循环</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1">1</a></span>
<span class="normal"><a href="#__codelineno-61-2">2</a></span>
<span class="normal"><a href="#__codelineno-61-3">3</a></span>
<span class="normal"><a href="#__codelineno-61-4">4</a></span>
<span class="normal"><a href="#__codelineno-61-5">5</a></span>
<span class="normal"><a href="#__codelineno-61-6">6</a></span>
<span class="normal"><a href="#__codelineno-61-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="n">li</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="nl">for1tst:</span><span class="w"> </span><span class="n">bge</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">exit1</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="o">--</span><span class="w"> </span><span class="n">snip</span><span class="w"> </span><span class="o">--</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5"></a><span class="n">j</span><span class="w"> </span><span class="n">for1tst</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6"></a>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7"></a><span class="nl">exit1:</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">第二个 for 循环</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-62-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-62-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-62-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-62-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-62-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-62-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-62-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-62-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-62-10">10</a></span>
<span class="normal"><a href="#__codelineno-62-11">11</a></span>
<span class="normal"><a href="#__codelineno-62-12">12</a></span>
<span class="normal"><a href="#__codelineno-62-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="n">li</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2"></a><span class="nl">for2tst:</span><span class="w"> </span><span class="n">bge</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">exit2</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3"></a>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4"></a><span class="n">slli</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="w">  </span><span class="c1">// x28 = 4 * j</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5"></a><span class="n">slli</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x28 = 8 * (4 * j)</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6"></a><span class="n">add</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="w">  </span><span class="c1">// x28 = &amp;D[4 * j]</span>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7"></a><span class="n">add</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="w">  </span><span class="c1">// x30 = i + j</span>
</span><span id="__span-62-8"><a id="__codelineno-62-8" name="__codelineno-62-8"></a><span class="n">sd</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x28</span><span class="p">)</span><span class="w">  </span><span class="c1">// D[4 * j] = i + j</span>
</span><span id="__span-62-9"><a id="__codelineno-62-9" name="__codelineno-62-9"></a>
</span><span id="__span-62-10"><a id="__codelineno-62-10" name="__codelineno-62-10"></a><span class="n">addi</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-62-11"><a id="__codelineno-62-11" name="__codelineno-62-11"></a><span class="n">j</span><span class="w"> </span><span class="n">for2tst</span>
</span><span id="__span-62-12"><a id="__codelineno-62-12" name="__codelineno-62-12"></a>
</span><span id="__span-62-13"><a id="__codelineno-62-13" name="__codelineno-62-13"></a><span class="nl">exit2:</span>
</span></code></pre></div></td></tr></table></div>
</div></p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RSIC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-63-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-63-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-63-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-63-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-63-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-63-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-63-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-63-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-63-10">10</a></span>
<span class="normal"><a href="#__codelineno-63-11">11</a></span>
<span class="normal"><a href="#__codelineno-63-12">12</a></span>
<span class="normal"><a href="#__codelineno-63-13">13</a></span>
<span class="normal"><a href="#__codelineno-63-14">14</a></span>
<span class="normal"><a href="#__codelineno-63-15">15</a></span>
<span class="normal"><a href="#__codelineno-63-16">16</a></span>
<span class="normal"><a href="#__codelineno-63-17">17</a></span>
<span class="normal"><a href="#__codelineno-63-18">18</a></span>
<span class="normal"><a href="#__codelineno-63-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="n">li</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2"></a><span class="nl">for1tst:</span><span class="w"> </span><span class="n">bge</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">exit1</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3"></a>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4"></a><span class="n">li</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5"></a><span class="nl">for2tst:</span><span class="w"> </span><span class="n">bge</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">exit2</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6"></a>
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7"></a><span class="n">slli</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="w">  </span><span class="c1">// x28 = 4 * j</span>
</span><span id="__span-63-8"><a id="__codelineno-63-8" name="__codelineno-63-8"></a><span class="n">slli</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x28 = 8 * (4 * j)</span>
</span><span id="__span-63-9"><a id="__codelineno-63-9" name="__codelineno-63-9"></a><span class="n">add</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="w">  </span><span class="c1">// x28 = &amp;D[4 * j]</span>
</span><span id="__span-63-10"><a id="__codelineno-63-10" name="__codelineno-63-10"></a><span class="n">add</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="w">  </span><span class="c1">// x30 = i + j</span>
</span><span id="__span-63-11"><a id="__codelineno-63-11" name="__codelineno-63-11"></a><span class="n">ld</span><span class="w"> </span><span class="n">x30</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x28</span><span class="p">)</span><span class="w">  </span><span class="c1">// D[4 * j] = i + j</span>
</span><span id="__span-63-12"><a id="__codelineno-63-12" name="__codelineno-63-12"></a>
</span><span id="__span-63-13"><a id="__codelineno-63-13" name="__codelineno-63-13"></a><span class="n">addi</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="n">x29</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-63-14"><a id="__codelineno-63-14" name="__codelineno-63-14"></a><span class="n">j</span><span class="w"> </span><span class="n">for2tst</span>
</span><span id="__span-63-15"><a id="__codelineno-63-15" name="__codelineno-63-15"></a>
</span><span id="__span-63-16"><a id="__codelineno-63-16" name="__codelineno-63-16"></a><span class="nl">exit2:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-63-17"><a id="__codelineno-63-17" name="__codelineno-63-17"></a><span class="n">j</span><span class="w"> </span><span class="n">for1tst</span>
</span><span id="__span-63-18"><a id="__codelineno-63-18" name="__codelineno-63-18"></a>
</span><span id="__span-63-19"><a id="__codelineno-63-19" name="__codelineno-63-19"></a><span class="nl">exit1:</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.29</summary>
<p>Implement the following C code in RISC-V assembly. Hint: Remember that the stack pointer must remain aligned on a multiple of 16.</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span>
<span class="normal"><a href="#__codelineno-64-3">3</a></span>
<span class="normal"><a href="#__codelineno-64-4">4</a></span>
<span class="normal"><a href="#__codelineno-64-5">5</a></span>
<span class="normal"><a href="#__codelineno-64-6">6</a></span>
<span class="normal"><a href="#__codelineno-64-7">7</a></span>
<span class="normal"><a href="#__codelineno-64-8">8</a></span>
<span class="normal"><a href="#__codelineno-64-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p>直接套上面的格式</p>
<p>n 存储在 x10 中</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-65-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-65-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-65-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-65-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-65-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-65-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-65-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-65-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-65-10">10</a></span>
<span class="normal"><a href="#__codelineno-65-11">11</a></span>
<span class="normal"><a href="#__codelineno-65-12">12</a></span>
<span class="normal"><a href="#__codelineno-65-13">13</a></span>
<span class="normal"><a href="#__codelineno-65-14">14</a></span>
<span class="normal"><a href="#__codelineno-65-15">15</a></span>
<span class="normal"><a href="#__codelineno-65-16">16</a></span>
<span class="normal"><a href="#__codelineno-65-17">17</a></span>
<span class="normal"><a href="#__codelineno-65-18">18</a></span>
<span class="normal"><a href="#__codelineno-65-19">19</a></span>
<span class="normal"><a href="#__codelineno-65-20">20</a></span>
<span class="normal"><a href="#__codelineno-65-21">21</a></span>
<span class="normal"><a href="#__codelineno-65-22">22</a></span>
<span class="normal"><a href="#__codelineno-65-23">23</a></span>
<span class="normal"><a href="#__codelineno-65-24">24</a></span>
<span class="normal"><a href="#__codelineno-65-25">25</a></span>
<span class="normal"><a href="#__codelineno-65-26">26</a></span>
<span class="normal"><a href="#__codelineno-65-27">27</a></span>
<span class="normal"><a href="#__codelineno-65-28">28</a></span>
<span class="normal"><a href="#__codelineno-65-29">29</a></span>
<span class="normal"><a href="#__codelineno-65-30">30</a></span>
<span class="normal"><a href="#__codelineno-65-31">31</a></span>
<span class="normal"><a href="#__codelineno-65-32">32</a></span>
<span class="normal"><a href="#__codelineno-65-33">33</a></span>
<span class="normal"><a href="#__codelineno-65-34">34</a></span>
<span class="normal"><a href="#__codelineno-65-35">35</a></span>
<span class="normal"><a href="#__codelineno-65-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="c1">// 存储参数</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a><span class="nl">fib:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5"></a><span class="n">mv</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6"></a>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7"></a><span class="c1">// 分支跳转</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8"></a><span class="n">beq</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">rtr_0</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9"></a>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10"></a><span class="n">li</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11"></a><span class="n">beq</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">rtr_1</span>
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12"></a>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13"></a><span class="c1">// 最后一个 else 语句的内容</span>
</span><span id="__span-65-14"><a id="__codelineno-65-14" name="__codelineno-65-14"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span><span class="w">  </span><span class="c1">// x10 = x8 - 1 = n - 1</span>
</span><span id="__span-65-15"><a id="__codelineno-65-15" name="__codelineno-65-15"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fib</span><span class="w">  </span><span class="c1">// 调用 fib(n - 1)，结果存储在 x10 中</span>
</span><span id="__span-65-16"><a id="__codelineno-65-16" name="__codelineno-65-16"></a><span class="n">mv</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// 复制 x10 的值到 x28</span>
</span><span id="__span-65-17"><a id="__codelineno-65-17" name="__codelineno-65-17"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">2</span><span class="w">  </span><span class="c1">// x10 = x8 - 2 = n - 2</span>
</span><span id="__span-65-18"><a id="__codelineno-65-18" name="__codelineno-65-18"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">fib</span><span class="w">  </span><span class="c1">// 调用 fib(n - 2)，结果存储在 x10 中</span>
</span><span id="__span-65-19"><a id="__codelineno-65-19" name="__codelineno-65-19"></a><span class="n">add</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x28</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// x10 = fib(n - 1) + fib(n - 2)</span>
</span><span id="__span-65-20"><a id="__codelineno-65-20" name="__codelineno-65-20"></a>
</span><span id="__span-65-21"><a id="__codelineno-65-21" name="__codelineno-65-21"></a><span class="c1">// 跳转到 end</span>
</span><span id="__span-65-22"><a id="__codelineno-65-22" name="__codelineno-65-22"></a><span class="n">j</span><span class="w"> </span><span class="k">end</span>
</span><span id="__span-65-23"><a id="__codelineno-65-23" name="__codelineno-65-23"></a>
</span><span id="__span-65-24"><a id="__codelineno-65-24" name="__codelineno-65-24"></a><span class="c1">// rtr_0</span>
</span><span id="__span-65-25"><a id="__codelineno-65-25" name="__codelineno-65-25"></a><span class="nl">rtr_0:</span><span class="w"> </span><span class="n">li</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-65-26"><a id="__codelineno-65-26" name="__codelineno-65-26"></a><span class="n">j</span><span class="w"> </span><span class="k">end</span>
</span><span id="__span-65-27"><a id="__codelineno-65-27" name="__codelineno-65-27"></a>
</span><span id="__span-65-28"><a id="__codelineno-65-28" name="__codelineno-65-28"></a><span class="c1">// rtr_1</span>
</span><span id="__span-65-29"><a id="__codelineno-65-29" name="__codelineno-65-29"></a><span class="nl">rtr_1:</span><span class="w"> </span><span class="n">li</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-65-30"><a id="__codelineno-65-30" name="__codelineno-65-30"></a><span class="c1">// j end 可以省略</span>
</span><span id="__span-65-31"><a id="__codelineno-65-31" name="__codelineno-65-31"></a>
</span><span id="__span-65-32"><a id="__codelineno-65-32" name="__codelineno-65-32"></a><span class="c1">// 恢复寄存器的值并返回</span>
</span><span id="__span-65-33"><a id="__codelineno-65-33" name="__codelineno-65-33"></a><span class="k">end</span><span class="o">:</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-65-34"><a id="__codelineno-65-34" name="__codelineno-65-34"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-65-35"><a id="__codelineno-65-35" name="__codelineno-65-35"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-65-36"><a id="__codelineno-65-36" name="__codelineno-65-36"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>可以让 <code>n = 3</code>，手写体会一下过程</p>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.31</summary>
<p>Translate function f into RISC-V assembly language. Assume the function declaration for g is int g(int a, int b). The code for function f is as follows:</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-66-1">1</a></span>
<span class="normal"><a href="#__codelineno-66-2">2</a></span>
<span class="normal"><a href="#__codelineno-66-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">),</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p>a, b, c, d 存储在 x10, x11, x12, x13 当中，g 函数的结果存储在 x10 中</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">参考答案</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-67-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-67-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-67-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-67-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-67-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-67-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-67-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-67-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-67-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-67-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x13</span><span class="w">  </span><span class="c1">// x5 = c + d</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6"></a><span class="n">ld</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// x11 = c + d</span>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<p>我的答案</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">函数内部</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-68-1">1</a></span>
<span class="normal"><a href="#__codelineno-68-2">2</a></span>
<span class="normal"><a href="#__codelineno-68-3">3</a></span>
<span class="normal"><a href="#__codelineno-68-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a><span class="n">add</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x13</span><span class="w">  </span><span class="c1">// x8 = c + d</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="w">  </span><span class="c1">// x10 = g(a, b)</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3"></a><span class="hll"><span class="n">mv</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">x8</span><span class="w">  </span><span class="c1">// x11 = c + d</span>
</span></span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="w">  </span><span class="c1">// x10 = g(g(a, b), c + d)</span>
</span></code></pre></div></td></tr></table></div>
<p>x8 是保留寄存器，如果 g 函数需要用到 x8，g 函数 body 代码执行前会存储的，g 函数返回前也会恢复 x8 的值，所以我觉得 line 3 可以这样写</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-69-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-69-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-69-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-69-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-69-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-69-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-69-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-69-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-69-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-69-10">10</a></span>
<span class="normal"><a href="#__codelineno-69-11">11</a></span>
<span class="normal"><a href="#__codelineno-69-12">12</a></span>
<span class="normal"><a href="#__codelineno-69-13">13</a></span>
<span class="normal"><a href="#__codelineno-69-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// f 函数也需要存储 x8 的值</span>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4"></a>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5"></a><span class="n">add</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x13</span><span class="w">  </span><span class="c1">// x8 = c + d</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="w">  </span><span class="c1">// x10 = g(a, b)</span>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7"></a><span class="n">mv</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">x8</span><span class="w">  </span><span class="c1">// x11 = c + d</span>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="w">  </span><span class="c1">// x10 = g(g(a, b), c + d)</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9"></a>
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11"></a><span class="n">ld</span><span class="w"> </span><span class="n">x8</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13"></a>
</span><span id="__span-69-14"><a id="__codelineno-69-14" name="__codelineno-69-14"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<details class="question" open="open">
<summary>课本 2.32</summary>
<p>Can we use the tail-call optimization in this function? If no, explain why not. If yes, what is the difference in the number of executed instruction in f with and without the optimization?</p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-70-1">1</a></span>
<span class="normal"><a href="#__codelineno-70-2">2</a></span>
<span class="normal"><a href="#__codelineno-70-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">g</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">),</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">d</span><span class="p">);</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<details class="success">
<summary>答案</summary>
<p>a, b, c, d 存储在 x10, x11, x12, x13 当中，g 函数的结果存储在 x10 中</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-71-1">1</a></span>
<span class="normal"><a href="#__codelineno-71-2">2</a></span>
<span class="normal"><a href="#__codelineno-71-3">3</a></span>
<span class="normal"><a href="#__codelineno-71-4">4</a></span>
<span class="normal"><a href="#__codelineno-71-5">5</a></span>
<span class="normal"><a href="#__codelineno-71-6">6</a></span>
<span class="normal"><a href="#__codelineno-71-7">7</a></span>
<span class="normal"><a href="#__codelineno-71-8">8</a></span>
<span class="normal"><a href="#__codelineno-71-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">16</span>
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x12</span><span class="p">,</span><span class="w"> </span><span class="n">x13</span>
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">g</span>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6"></a><span class="n">ld</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span>
</span><span id="__span-71-9"><a id="__codelineno-71-9" name="__codelineno-71-9"></a><span class="n">jal</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">g</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<h3 id="283-在栈中为新数据分配空间">2.8.3 在栈中为新数据分配空间<a class="headerlink" href="#283-在栈中为新数据分配空间" title="Permanent link">&para;</a></h3>
<p><strong>Allocating Space for New Data on the Stack</strong></p>
<p>栈中包含过程所保存的寄存器和局部变量的片段称为 <strong>过程帧</strong>（procedure frame）或 <strong>活动记录</strong>（activation record）</p>
<p>某些 RISC-V 软件使用 <strong>帧指针</strong>（fp）或 x8 指向过程帧的第一个双字</p>
<figure>
    <img alt="Img 14" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img14.png" width="600" />
</figure>
<h3 id="284-在堆中为新数据分配空间">2.8.4 在堆中为新数据分配空间<a class="headerlink" href="#284-在堆中为新数据分配空间" title="Permanent link">&para;</a></h3>
<p><strong>Allocating Space for New Data on the Heap</strong></p>
<p>栈由内存高端开始并向下增长。内存低端的第一部分是保留的，之后是 RISC-V 机器代码的第一部分，通常称为 <strong>正文段</strong>（text segment）。正文段之上的代码为 <strong>静态数据段</strong>（static data segment），是存储常量和其他静态变量的空间。然后是动态数据，动态数据在某一区域中朝着栈的方向向上生长，该区域称为 <strong>堆</strong>（heap）</p>
<p>一些递归过程可以不使用递归而使用迭代的方式实现。通过消除过程调用的相关开销，迭代可以显著提高性能</p>
<figure>
    <img alt="Img 15" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img15.png" width="600" />
</figure>
<p>RISC-V 寄存器约定：</p>
<figure>
    <img alt="Img 5" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img5.png" width="600" />
</figure>
<h2 id="29-人机交互">2.9 人机交互<a class="headerlink" href="#29-人机交互" title="Permanent link">&para;</a></h2>
<p><strong>Communicating with People</strong></p>
<p><code>lbu x12, 0(x10)</code></p>
<p>从地址 x10 中读取一个字节（8 bit），经零扩展后写入 x12</p>
<p><code>sb x12, 0(x11)</code></p>
<p>将 x12 的低 8 位存入内存地址 x11</p>
<div class="admonition example">
<p class="admonition-title">通过编译一个字符串复制过程，来展示如何使用 C 字符串</p>
<p>假设 x，y 的基地址存储在 x10，x11，i 存储在 x19</p>
<div class="grid" markdown>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-72-1">1</a></span>
<span class="normal"><a href="#__codelineno-72-2">2</a></span>
<span class="normal"><a href="#__codelineno-72-3">3</a></span>
<span class="normal"><a href="#__codelineno-72-4">4</a></span>
<span class="normal"><a href="#__codelineno-72-5">5</a></span>
<span class="normal"><a href="#__codelineno-72-6">6</a></span>
<span class="normal"><a href="#__codelineno-72-7">7</a></span>
<span class="normal"><a href="#__codelineno-72-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">strcpy</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">x</span><span class="p">[],</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">y</span><span class="p">[])</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2"></a><span class="p">{</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3"></a><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4"></a><span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6"></a><span class="w">        </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-72-8"><a id="__codelineno-72-8" name="__codelineno-72-8"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-73-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-73-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-73-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-73-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-73-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-73-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-73-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-73-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-73-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-73-10">10</a></span>
<span class="normal"><a href="#__codelineno-73-11">11</a></span>
<span class="normal"><a href="#__codelineno-73-12">12</a></span>
<span class="normal"><a href="#__codelineno-73-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1"></a><span class="nl">strcpy:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">8</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// 存储 i</span>
</span><span id="__span-73-3"><a id="__codelineno-73-3" name="__codelineno-73-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="w">  </span><span class="c1">// i = 0</span>
</span><span id="__span-73-4"><a id="__codelineno-73-4" name="__codelineno-73-4"></a><span class="hll"><span class="nl">L1:</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="w">  </span><span class="c1">// 计算 y[i] 的地址</span>
</span></span><span id="__span-73-5"><a id="__codelineno-73-5" name="__codelineno-73-5"></a><span class="hll"><span class="n">lbu</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = y[i]</span>
</span></span><span id="__span-73-6"><a id="__codelineno-73-6" name="__codelineno-73-6"></a><span class="n">add</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// 计算 x[i] 的地址</span>
</span><span id="__span-73-7"><a id="__codelineno-73-7" name="__codelineno-73-7"></a><span class="n">sb</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span><span class="w">  </span><span class="c1">// x[i] = y[i]</span>
</span><span id="__span-73-8"><a id="__codelineno-73-8" name="__codelineno-73-8"></a><span class="n">beq</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L2</span>
</span><span id="__span-73-9"><a id="__codelineno-73-9" name="__codelineno-73-9"></a><span class="n">addi</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="w"> </span><span class="mh">1</span><span class="w">  </span><span class="c1">// i += 1</span>
</span><span id="__span-73-10"><a id="__codelineno-73-10" name="__codelineno-73-10"></a><span class="n">jal</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span>
</span><span id="__span-73-11"><a id="__codelineno-73-11" name="__codelineno-73-11"></a><span class="nl">L2:</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span><span class="w">  </span><span class="c1">// 恢复 x19 i 的值</span>
</span><span id="__span-73-12"><a id="__codelineno-73-12" name="__codelineno-73-12"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-73-13"><a id="__codelineno-73-13" name="__codelineno-73-13"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span><span class="w">  </span><span class="c1">// 返回 caller</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>line 4-5：<code>y[]</code> 中存放着字符，一个字符刚好 1 byte（8 bit），RISC-V 使用字节编码，因此这里不需要像上面的例子中乘以 8（上面例子的数组中存储的是 doubleword，是 8 bytes，所以要乘以 8）</p>
</div>
<p><code>lhu x19, x0(x10)</code></p>
<p>从地址 x10 中读取 2 bytes（16 bits），经零扩展后写入 x19</p>
<p><code>sh x19, 0(x11)</code></p>
<p>将 x19 的低 2 bytes（16 bits）存入内存地址 x11</p>
<details class="question" open="open">
<summary>课本 2.35</summary>
<p>Consider the following code:</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-74-1">1</a></span>
<span class="normal"><a href="#__codelineno-74-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1"></a><span class="n">lb</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>Assume that the register x7 contains the address 0×10000000 and the data at address is 0×1122334455667788.</p>
<p>(1) What value is stored in 0×10000008 on a big-endian machine?</p>
<p>(2) What value is stored in 0×10000008 on a little-endian machine?</p>
<details class="success">
<summary>答案</summary>
<p>(1) 大端寻址：最高有效位在低地址</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-75-1">1</a></span>
<span class="normal"><a href="#__codelineno-75-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1"></a><span class="n">lb</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = 0x11</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 存在 0×10000008</span>
</span></code></pre></div></td></tr></table></div>
<p><code>x6 = 0x11</code></p>
<hr />
<p>(2) 小端寻址：最低有效位在低地址</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-76-1">1</a></span>
<span class="normal"><a href="#__codelineno-76-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1"></a><span class="n">lb</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = 0x88</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 存在 0×10000008</span>
</span></code></pre></div></td></tr></table></div>
<p><code>x6 = 0x88</code></p>
</details>
</details>
<h2 id="210-risc-v-中立即数和地址的寻址">2.10 RISC-V 中立即数和地址的寻址<a class="headerlink" href="#210-risc-v-中立即数和地址的寻址" title="Permanent link">&para;</a></h2>
<p><strong>RISC-V Addressing for Wide Immediates
and Addresses</strong></p>
<h3 id="2101-立即数">2.10.1 立即数<a class="headerlink" href="#2101-立即数" title="Permanent link">&para;</a></h3>
<p>RISC-V 指令集中的读取立即数高位指令（Load upper immediate）<code>lui</code>，将 20 bit 常数存储到寄存器的 [31:12] 中，寄存器 [63:32] 复制填充 [31] 的数据，[11:0] 填充 0</p>
<p><code>lui rd, immediate</code></p>
<h3 id="2102-分支和跳转中的寻址">2.10.2 分支和跳转中的寻址<a class="headerlink" href="#2102-分支和跳转中的寻址" title="Permanent link">&para;</a></h3>
<p><code>bne rs1, rs2, offset</code> 不相等时分支</p>
<figure>
    <img alt="Img 16" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img16.png" width="600" />
</figure>
<p><code>jal rd, offset</code></p>
<figure>
    <img alt="Img 17" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img17.png" width="600" />
</figure>
<p><strong>PC 相对寻址</strong>（PC-relative addressing）</p>
<div class="admonition example">
<p class="admonition-title">在机器语言中描述分支偏转</p>
<p>假设把 loop 的开始位置放在内存的 80000 处</p>
<p><div class="grid" markdown>
<div>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-77-1">1</a></span>
<span class="normal"><a href="#__codelineno-77-2">2</a></span>
<span class="normal"><a href="#__codelineno-77-3">3</a></span>
<span class="normal"><a href="#__codelineno-77-4">4</a></span>
<span class="normal"><a href="#__codelineno-77-5">5</a></span>
<span class="normal"><a href="#__codelineno-77-6">6</a></span>
<span class="normal"><a href="#__codelineno-77-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1"></a><span class="nl">Loop</span><span class="p">:</span><span class="w"> </span><span class="n">slli</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x25</span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">(</span><span class="n">x10</span><span class="p">)</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4"></a><span class="n">bne</span><span class="w"> </span><span class="n">x9</span><span class="p">,</span><span class="w"> </span><span class="n">x24</span><span class="p">,</span><span class="w"> </span><span class="n">Exit</span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-77-6"><a id="__codelineno-77-6" name="__codelineno-77-6"></a><span class="n">beq</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">Loop</span>
</span><span id="__span-77-7"><a id="__codelineno-77-7" name="__codelineno-77-7"></a><span class="nl">Exit</span><span class="p">:</span>
</span></code></pre></div></td></tr></table></div>
</div>
<figure markdown="span">
    <img alt="Img 18" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img18.png" width="400" />
</figure>
</div></p>
</div>
<div class="admonition example">
<p class="admonition-title">远距离的分支转移</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-78-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1"></a><span class="n">beq</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span>
</span></code></pre></div></td></tr></table></div>
<p>假设当 x10 等于 0 时，跳转到 L1。可以用两条指令替换上面的指令，以获得更远的转移距离</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-79-1">1</a></span>
<span class="normal"><a href="#__codelineno-79-2">2</a></span>
<span class="normal"><a href="#__codelineno-79-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1"></a><span class="n">bne</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L2</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2"></a><span class="n">jal</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">L1</span>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3"></a><span class="nl">L2:</span>
</span></code></pre></div></td></tr></table></div>
<p>因为 <code>jal</code> 指令里面的 offset 位数更多，所以可以跳转的距离就更远</p>
</div>
<details class="question" open="open">
<summary>课本 2.22</summary>
<p>Suppose the program counter (PC) is set to 0x20000000.</p>
<p>(1) What range of addresses can be reached using the RISC-V jump-and-link (jal) instruction? (In other words, what is the set of possible values for the PC after the jump instruction executes?)</p>
<p>(2) What range of addresses can be reached using the RISC-V branch if equal (beq) instruction? (In other words, what is the set of possible values for the PC after the branch instruction executes?)</p>
<details class="success">
<summary>答案</summary>
<p>(1) 注意 jal 的指令格式中立即数的存储方式</p>
<p><span class="arithmatex">\(offset_{max} = 0111\_1111\_1111\_1111\_1111\_0 = 1048574_{10}\)</span><br/>
<span class="arithmatex">\(offset_{min} = 1000\_0000\_0000\_0000\_0000\_0 = -1048576_{10}\)</span></p>
<p><span class="arithmatex">\(PC_{min} = PC + offset_{min} = 0x1ff0\_0000\)</span><br/>
<span class="arithmatex">\(PC_{max} = PC + offset_{max} = 0x200f\_fffe\)</span></p>
<p><span class="arithmatex">\(\therefore PC = [0x1ff0\_0000, 0x200f\_fffe]\)</span></p>
<hr />
<p>(2) <span class="arithmatex">\(offset_{max} = 0111\_1111\_1111\_0 = 4094_{10}\)</span><br/>
<span class="arithmatex">\(offset_{min} = 1000\_0000\_0000\_0 = -4096_{10}\)</span></p>
<p><span class="arithmatex">\(PC_{min} = PC + offset_{min} = 0x1fff\_f000\)</span><br/>
<span class="arithmatex">\(PC_{max} = PC + offset_{max} = 0x2000\_0ffe\)</span></p>
<p><span class="arithmatex">\(\therefore PC = [0x1fff\_f000, 0x2000\_0ffe]\)</span></p>
</details>
</details>
<h3 id="2103-risc-v-寻址模式总结">2.10.3 RISC-V 寻址模式总结<a class="headerlink" href="#2103-risc-v-寻址模式总结" title="Permanent link">&para;</a></h3>
<p>多种不同的寻址形式一般统称为 <strong>寻址模式</strong>（addressing mode）</p>
<figure>
    <img alt="Img 6" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img6.png" width="600" />
</figure>
<ol>
<li>立即数寻址（immediate addressing）: 操作数是位于指令自身中的常数</li>
<li>寄存器寻址（register addressing）: 操作数是寄存器</li>
<li>基址或偏移寻址（base or displacement addressing）: 操作数在内存中，其地址是指令中基址寄存器和常数的和</li>
<li>PC 相对寻址（PC-relative addressing）: 地址是 PC 和指令中常数的和</li>
</ol>
<h3 id="2104-机器语言解码">2.10.4 机器语言解码<a class="headerlink" href="#2104-机器语言解码" title="Permanent link">&para;</a></h3>
<p><strong>Decoding Machine Language</strong></p>
<figure>
    <img alt="Img 7" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img7.png" width="600" />
</figure>
<blockquote>
<p>课本原图有误，本文档已修正</p>
</blockquote>
<p>RISC-V 指令的格式：</p>
<figure>
    <img alt="Img 8" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img8.png" width="800" />
</figure>
<details class="question" open="open">
<summary>课本 2.36</summary>
<p>Write the RISC-V assembly code that creates the 64-bit constant <span class="arithmatex">\(0x1122334455667788_{two}\)</span> and stores that value to register x10.</p>
<details class="success">
<summary>答案</summary>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-80-1">1</a></span>
<span class="normal"><a href="#__codelineno-80-2">2</a></span>
<span class="normal"><a href="#__codelineno-80-3">3</a></span>
<span class="normal"><a href="#__codelineno-80-4">4</a></span>
<span class="normal"><a href="#__codelineno-80-5">5</a></span>
<span class="normal"><a href="#__codelineno-80-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1"></a><span class="n">lui</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="n">x11223</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="n">x344</span>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3"></a><span class="n">slli</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="mh">32</span>
</span><span id="__span-80-4"><a id="__codelineno-80-4" name="__codelineno-80-4"></a><span class="n">lui</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="n">x55667</span>
</span><span id="__span-80-5"><a id="__codelineno-80-5" name="__codelineno-80-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="n">x788</span>
</span><span id="__span-80-6"><a id="__codelineno-80-6" name="__codelineno-80-6"></a><span class="n">add</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span>
</span></code></pre></div></td></tr></table></div>
</details>
</details>
<h2 id="211-并行与指令同步">2.11 并行与指令：同步<a class="headerlink" href="#211-并行与指令同步" title="Permanent link">&para;</a></h2>
<p><strong>Parallelism and Instructions:
Synchronization</strong></p>
<p><code>lr.d rd, rs1</code></p>
<p>从内存地址为 rs1 中加载 8 bytes，写入 rd，并对这个内存双字注册保留</p>
<p><code>sc.d rd, rs2, rs1</code></p>
<p>如果内存地址 rs1 上存在加载保留，将 rs2 寄存器中的 8 bytes 数存入 rs1。如果存入成功，向 rd 存入 0，否则存入一个非 0 的错误码</p>
<h2 id="212-翻译并执行程序">2.12 翻译并执行程序<a class="headerlink" href="#212-翻译并执行程序" title="Permanent link">&para;</a></h2>
<figure>
    <img alt="Img 8" src="../../../../../img/computer_organization/theory/ch2/comp_orga_theo_ch2_img9.png" width="600" />
</figure>
<h2 id="213-以一个-c-排序程序为例">2.13 以一个 C 排序程序为例<a class="headerlink" href="#213-以一个-c-排序程序为例" title="Permanent link">&para;</a></h2>
<ol>
<li>为程序变量分配寄存器</li>
<li>为过程体生成汇编代码</li>
<li>保存过程调用间的寄存器</li>
</ol>
<h3 id="2131-swap-过程">2.13.1 swap 过程<a class="headerlink" href="#2131-swap-过程" title="Permanent link">&para;</a></h3>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-81-1">1</a></span>
<span class="normal"><a href="#__codelineno-81-2">2</a></span>
<span class="normal"><a href="#__codelineno-81-3">3</a></span>
<span class="normal"><a href="#__codelineno-81-4">4</a></span>
<span class="normal"><a href="#__codelineno-81-5">5</a></span>
<span class="normal"><a href="#__codelineno-81-6">6</a></span>
<span class="normal"><a href="#__codelineno-81-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="p">)</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2"></a><span class="p">{</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4"></a><span class="w">    </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5"></a><span class="w">    </span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6"></a><span class="w">    </span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="为-swap-分配寄存器">为 swap 分配寄存器<a class="headerlink" href="#为-swap-分配寄存器" title="Permanent link">&para;</a></h4>
<p>实现参数传递通常使用 x10-x17，因为此 swap 只需要两个参数，v 和 k，它们将被分配到 x10 和 x11。还有一个变量是 temp，分配到 x5</p>
<h4 id="为-swap-过程体生成代码">为 swap 过程体生成代码<a class="headerlink" href="#为-swap-过程体生成代码" title="Permanent link">&para;</a></h4>
<div class="grid">
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-82-1">1</a></span>
<span class="normal"><a href="#__codelineno-82-2">2</a></span>
<span class="normal"><a href="#__codelineno-82-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1"></a><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2"></a><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3"></a><span class="n">v</span><span class="p">[</span><span class="n">k</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-83-1">1</a></span>
<span class="normal"><a href="#__codelineno-83-2">2</a></span>
<span class="normal"><a href="#__codelineno-83-3">3</a></span>
<span class="normal"><a href="#__codelineno-83-4">4</a></span>
<span class="normal"><a href="#__codelineno-83-5">5</a></span>
<span class="normal"><a href="#__codelineno-83-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1"></a><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x6 = k * 8</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// x6 为 v[k] 的地址</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// temp = v[k]</span>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4"></a><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// x7 = v[k + 1]</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5"></a><span class="n">sd</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// v[k] = x7 = v[k + 1]</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6"></a><span class="n">sd</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// v[k + 1] = temp</span>
</span></code></pre></div></td></tr></table></div>
</div>
<h4 id="完整的-swap-程序">完整的 swap 程序<a class="headerlink" href="#完整的-swap-程序" title="Permanent link">&para;</a></h4>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-84-1">1</a></span>
<span class="normal"><a href="#__codelineno-84-2">2</a></span>
<span class="normal"><a href="#__codelineno-84-3">3</a></span>
<span class="normal"><a href="#__codelineno-84-4">4</a></span>
<span class="normal"><a href="#__codelineno-84-5">5</a></span>
<span class="normal"><a href="#__codelineno-84-6">6</a></span>
<span class="normal"><a href="#__codelineno-84-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1"></a><span class="nl">swap:</span><span class="w"> </span><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x6 = k * 8</span>
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2"></a><span class="n">add</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span><span class="w">  </span><span class="c1">// x6 为 v[k] 的地址</span>
</span><span id="__span-84-3"><a id="__codelineno-84-3" name="__codelineno-84-3"></a><span class="n">ld</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// temp = v[k]</span>
</span><span id="__span-84-4"><a id="__codelineno-84-4" name="__codelineno-84-4"></a><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// x7 = v[k + 1]</span>
</span><span id="__span-84-5"><a id="__codelineno-84-5" name="__codelineno-84-5"></a><span class="n">sd</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// v[k] = x7 = v[k + 1]</span>
</span><span id="__span-84-6"><a id="__codelineno-84-6" name="__codelineno-84-6"></a><span class="n">sd</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x6</span><span class="p">)</span><span class="w">  </span><span class="c1">// v[k + 1] = temp</span>
</span><span id="__span-84-7"><a id="__codelineno-84-7" name="__codelineno-84-7"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span><span class="w">  </span><span class="c1">// return</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="2132-sort-过程">2.13.2 sort 过程<a class="headerlink" href="#2132-sort-过程" title="Permanent link">&para;</a></h3>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-85-1">1</a></span>
<span class="normal"><a href="#__codelineno-85-2">2</a></span>
<span class="normal"><a href="#__codelineno-85-3">3</a></span>
<span class="normal"><a href="#__codelineno-85-4">4</a></span>
<span class="normal"><a href="#__codelineno-85-5">5</a></span>
<span class="normal"><a href="#__codelineno-85-6">6</a></span>
<span class="normal"><a href="#__codelineno-85-7">7</a></span>
<span class="normal"><a href="#__codelineno-85-8">8</a></span>
<span class="normal"><a href="#__codelineno-85-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">sort</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2"></a><span class="p">{</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
</span><span id="__span-85-4"><a id="__codelineno-85-4" name="__codelineno-85-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-85-5"><a id="__codelineno-85-5" name="__codelineno-85-5"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-85-6"><a id="__codelineno-85-6" name="__codelineno-85-6"></a><span class="w">            </span><span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
</span><span id="__span-85-7"><a id="__codelineno-85-7" name="__codelineno-85-7"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-85-8"><a id="__codelineno-85-8" name="__codelineno-85-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-85-9"><a id="__codelineno-85-9" name="__codelineno-85-9"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="sort-的寄存器分配">sort 的寄存器分配<a class="headerlink" href="#sort-的寄存器分配" title="Permanent link">&para;</a></h4>
<p>v，n 存储在 x10，x11 中，i，j 分配在 x19，x20 中</p>
<h4 id="为-sort-过程体生成代码">为 sort 过程体生成代码<a class="headerlink" href="#为-sort-过程体生成代码" title="Permanent link">&para;</a></h4>
<p>第一个 for 循环：</p>
<div class="grid">
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-86-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-87-1">1</a></span>
<span class="normal"><a href="#__codelineno-87-2">2</a></span>
<span class="normal"><a href="#__codelineno-87-3">3</a></span>
<span class="normal"><a href="#__codelineno-87-4">4</a></span>
<span class="normal"><a href="#__codelineno-87-5">5</a></span>
<span class="normal"><a href="#__codelineno-87-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1"></a><span class="n">li</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// 伪指令，立即数加载</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2"></a><span class="nl">for1tst:</span><span class="w"> </span><span class="n">bge</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">exit1</span><span class="w">  </span><span class="c1">// i &gt;= n 则退出</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3"></a><span class="o">--</span><span class="w"> </span><span class="n">snip</span><span class="w"> </span><span class="o">--</span><span class="w">  </span><span class="c1">// 第一个 for 循环的 body</span>
</span><span id="__span-87-4"><a id="__codelineno-87-4" name="__codelineno-87-4"></a><span class="n">addi</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-87-5"><a id="__codelineno-87-5" name="__codelineno-87-5"></a><span class="n">j</span><span class="w"> </span><span class="n">for1tst</span>
</span><span id="__span-87-6"><a id="__codelineno-87-6" name="__codelineno-87-6"></a><span class="nl">exit1:</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>第二个 for 循环：</p>
<div class="grid">
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-88-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="n">j</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-89-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-89-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-89-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-89-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-89-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-89-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-89-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-89-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-89-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-89-10">10</a></span>
<span class="normal"><a href="#__codelineno-89-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2"></a><span class="nl">for2tst:</span><span class="w"> </span><span class="n">blt</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="n">exit2</span><span class="w">  </span><span class="c1">// j &lt; 0 则退出</span>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3"></a><span class="n">slli</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x5 = j * 8</span>
</span><span id="__span-89-4"><a id="__codelineno-89-4" name="__codelineno-89-4"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="w">  </span><span class="c1">// x5 = v[j] 的地址</span>
</span><span id="__span-89-5"><a id="__codelineno-89-5" name="__codelineno-89-5"></a><span class="n">ld</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = v[j]</span>
</span><span id="__span-89-6"><a id="__codelineno-89-6" name="__codelineno-89-6"></a><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x7 = v[j + 1]</span>
</span><span id="__span-89-7"><a id="__codelineno-89-7" name="__codelineno-89-7"></a><span class="n">ble</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">exit2</span><span class="w">  </span><span class="c1">// v[j] &lt;= v[j + 1] 则退出</span>
</span><span id="__span-89-8"><a id="__codelineno-89-8" name="__codelineno-89-8"></a><span class="o">--</span><span class="w"> </span><span class="n">snip</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="c1">// 第二个 for 循环的 body</span>
</span><span id="__span-89-9"><a id="__codelineno-89-9" name="__codelineno-89-9"></a><span class="n">addi</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span>
</span><span id="__span-89-10"><a id="__codelineno-89-10" name="__codelineno-89-10"></a><span class="n">j</span><span class="w"> </span><span class="n">for2tst</span>
</span><span id="__span-89-11"><a id="__codelineno-89-11" name="__codelineno-89-11"></a><span class="nl">exit2:</span>
</span></code></pre></div></td></tr></table></div>
</div>
<h4 id="sort-中的过程调用">sort 中的过程调用<a class="headerlink" href="#sort-中的过程调用" title="Permanent link">&para;</a></h4>
<p>第二个 for 循环的 body：</p>
<div class="grid">
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-90-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6"></a><span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-91-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">swap</span>
</span></code></pre></div></td></tr></table></div>
</div>
<h4 id="sort-中的参数传递">sort 中的参数传递<a class="headerlink" href="#sort-中的参数传递" title="Permanent link">&para;</a></h4>
<p>sort 函数中需要使用 x10，x11，而 swap 函数也需要使用。一种解决方法是再过程较早的地方将 sort 的参数复制到其他的寄存器中，这个方法比在栈中保存再取回快得多</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-92-1">1</a></span>
<span class="normal"><a href="#__codelineno-92-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1"></a><span class="n">mv</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// 复制 x10 到 x21 中</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2"></a><span class="n">mv</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span>
</span></code></pre></div></td></tr></table></div>
<p>调用 swap 前，传递值</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-93-1">1</a></span>
<span class="normal"><a href="#__codelineno-93-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1"></a><span class="n">mv</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2"></a><span class="n">mv</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="在-sort-中保存寄存器">在 sort 中保存寄存器<a class="headerlink" href="#在-sort-中保存寄存器" title="Permanent link">&para;</a></h4>
<p>保存返回地址 x1，保留寄存器 x19，x20，x21，x22 也需要保存</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-94-1">1</a></span>
<span class="normal"><a href="#__codelineno-94-2">2</a></span>
<span class="normal"><a href="#__codelineno-94-3">3</a></span>
<span class="normal"><a href="#__codelineno-94-4">4</a></span>
<span class="normal"><a href="#__codelineno-94-5">5</a></span>
<span class="normal"><a href="#__codelineno-94-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">40</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">32</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mh">24</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-94-4"><a id="__codelineno-94-4" name="__codelineno-94-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-94-5"><a id="__codelineno-94-5" name="__codelineno-94-5"></a><span class="n">sd</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-94-6"><a id="__codelineno-94-6" name="__codelineno-94-6"></a><span class="n">sd</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="完整的-sort-过程">完整的 sort 过程<a class="headerlink" href="#完整的-sort-过程" title="Permanent link">&para;</a></h4>
<p>把上面的步骤拼起来</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-95-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-95-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-95-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-95-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-95-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-95-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-95-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-95-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-95-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-95-10">10</a></span>
<span class="normal"><a href="#__codelineno-95-11">11</a></span>
<span class="normal"><a href="#__codelineno-95-12">12</a></span>
<span class="normal"><a href="#__codelineno-95-13">13</a></span>
<span class="normal"><a href="#__codelineno-95-14">14</a></span>
<span class="normal"><a href="#__codelineno-95-15">15</a></span>
<span class="normal"><a href="#__codelineno-95-16">16</a></span>
<span class="normal"><a href="#__codelineno-95-17">17</a></span>
<span class="normal"><a href="#__codelineno-95-18">18</a></span>
<span class="normal"><a href="#__codelineno-95-19">19</a></span>
<span class="normal"><a href="#__codelineno-95-20">20</a></span>
<span class="normal"><a href="#__codelineno-95-21">21</a></span>
<span class="normal"><a href="#__codelineno-95-22">22</a></span>
<span class="normal"><a href="#__codelineno-95-23">23</a></span>
<span class="normal"><a href="#__codelineno-95-24">24</a></span>
<span class="normal"><a href="#__codelineno-95-25">25</a></span>
<span class="normal"><a href="#__codelineno-95-26">26</a></span>
<span class="normal"><a href="#__codelineno-95-27">27</a></span>
<span class="normal"><a href="#__codelineno-95-28">28</a></span>
<span class="normal"><a href="#__codelineno-95-29">29</a></span>
<span class="normal"><a href="#__codelineno-95-30">30</a></span>
<span class="normal"><a href="#__codelineno-95-31">31</a></span>
<span class="normal"><a href="#__codelineno-95-32">32</a></span>
<span class="normal"><a href="#__codelineno-95-33">33</a></span>
<span class="normal"><a href="#__codelineno-95-34">34</a></span>
<span class="normal"><a href="#__codelineno-95-35">35</a></span>
<span class="normal"><a href="#__codelineno-95-36">36</a></span>
<span class="normal"><a href="#__codelineno-95-37">37</a></span>
<span class="normal"><a href="#__codelineno-95-38">38</a></span>
<span class="normal"><a href="#__codelineno-95-39">39</a></span>
<span class="normal"><a href="#__codelineno-95-40">40</a></span>
<span class="normal"><a href="#__codelineno-95-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1"></a><span class="c1">// 保存寄存器</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">40</span>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3"></a><span class="n">sd</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">32</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mh">24</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5"></a><span class="n">sd</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6"></a><span class="n">sd</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7"></a><span class="n">sd</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8"></a><span class="c1">// 过程体</span>
</span><span id="__span-95-9"><a id="__codelineno-95-9" name="__codelineno-95-9"></a><span class="c1">// 复制参数</span>
</span><span id="__span-95-10"><a id="__codelineno-95-10" name="__codelineno-95-10"></a><span class="n">mv</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="w">  </span><span class="c1">// 复制 x10 到 x21 中</span>
</span><span id="__span-95-11"><a id="__codelineno-95-11" name="__codelineno-95-11"></a><span class="n">mv</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span>
</span><span id="__span-95-12"><a id="__codelineno-95-12" name="__codelineno-95-12"></a><span class="c1">// 第一个 for 循环</span>
</span><span id="__span-95-13"><a id="__codelineno-95-13" name="__codelineno-95-13"></a><span class="n">li</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="w">  </span><span class="c1">// 伪指令，立即数加载</span>
</span><span id="__span-95-14"><a id="__codelineno-95-14" name="__codelineno-95-14"></a><span class="nl">for1tst:</span><span class="w"> </span><span class="n">bge</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="n">exit1</span><span class="w">  </span><span class="c1">// i &gt;= n 则退出</span>
</span><span id="__span-95-15"><a id="__codelineno-95-15" name="__codelineno-95-15"></a><span class="c1">// 第二个 for 循环</span>
</span><span id="__span-95-16"><a id="__codelineno-95-16" name="__codelineno-95-16"></a><span class="n">addi</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span>
</span><span id="__span-95-17"><a id="__codelineno-95-17" name="__codelineno-95-17"></a><span class="nl">for2tst:</span><span class="w"> </span><span class="n">blt</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">,</span><span class="w"> </span><span class="n">exit2</span><span class="w">  </span><span class="c1">// j &lt; 0 则退出</span>
</span><span id="__span-95-18"><a id="__codelineno-95-18" name="__codelineno-95-18"></a><span class="n">slli</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="w">  </span><span class="c1">// x5 = j * 8</span>
</span><span id="__span-95-19"><a id="__codelineno-95-19" name="__codelineno-95-19"></a><span class="n">add</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="w">  </span><span class="c1">// x5 = v[j] 的地址</span>
</span><span id="__span-95-20"><a id="__codelineno-95-20" name="__codelineno-95-20"></a><span class="n">ld</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x6 = v[j]</span>
</span><span id="__span-95-21"><a id="__codelineno-95-21" name="__codelineno-95-21"></a><span class="n">ld</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span><span class="w">  </span><span class="c1">// x7 = v[j + 1]</span>
</span><span id="__span-95-22"><a id="__codelineno-95-22" name="__codelineno-95-22"></a><span class="n">ble</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">exit2</span><span class="w">  </span><span class="c1">// v[j] &lt;= v[j + 1] 则退出</span>
</span><span id="__span-95-23"><a id="__codelineno-95-23" name="__codelineno-95-23"></a><span class="c1">// 传递参数，调用 swap</span>
</span><span id="__span-95-24"><a id="__codelineno-95-24" name="__codelineno-95-24"></a><span class="n">mv</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x21</span>
</span><span id="__span-95-25"><a id="__codelineno-95-25" name="__codelineno-95-25"></a><span class="n">mv</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span>
</span><span id="__span-95-26"><a id="__codelineno-95-26" name="__codelineno-95-26"></a><span class="n">jal</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">swap</span>
</span><span id="__span-95-27"><a id="__codelineno-95-27" name="__codelineno-95-27"></a><span class="c1">// 第二个 for 循环末尾</span>
</span><span id="__span-95-28"><a id="__codelineno-95-28" name="__codelineno-95-28"></a><span class="n">addi</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mh">1</span>
</span><span id="__span-95-29"><a id="__codelineno-95-29" name="__codelineno-95-29"></a><span class="n">j</span><span class="w"> </span><span class="n">for2tst</span>
</span><span id="__span-95-30"><a id="__codelineno-95-30" name="__codelineno-95-30"></a><span class="c1">// 第一个 for 循环末尾</span>
</span><span id="__span-95-31"><a id="__codelineno-95-31" name="__codelineno-95-31"></a><span class="nl">exit2:</span><span class="w"> </span><span class="n">addi</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-95-32"><a id="__codelineno-95-32" name="__codelineno-95-32"></a><span class="n">j</span><span class="w"> </span><span class="n">for1tst</span>
</span><span id="__span-95-33"><a id="__codelineno-95-33" name="__codelineno-95-33"></a><span class="c1">// 恢复寄存器</span>
</span><span id="__span-95-34"><a id="__codelineno-95-34" name="__codelineno-95-34"></a><span class="nl">exit1:</span><span class="w"> </span><span class="n">ld</span><span class="w"> </span><span class="n">x19</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-35"><a id="__codelineno-95-35" name="__codelineno-95-35"></a><span class="n">ld</span><span class="w"> </span><span class="n">x20</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-36"><a id="__codelineno-95-36" name="__codelineno-95-36"></a><span class="n">ld</span><span class="w"> </span><span class="n">x21</span><span class="p">,</span><span class="w"> </span><span class="mh">16</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-37"><a id="__codelineno-95-37" name="__codelineno-95-37"></a><span class="n">ld</span><span class="w"> </span><span class="n">x22</span><span class="p">,</span><span class="w"> </span><span class="mh">24</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-38"><a id="__codelineno-95-38" name="__codelineno-95-38"></a><span class="n">ld</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="mh">32</span><span class="p">(</span><span class="n">sp</span><span class="p">)</span>
</span><span id="__span-95-39"><a id="__codelineno-95-39" name="__codelineno-95-39"></a><span class="n">addi</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="mh">40</span>
</span><span id="__span-95-40"><a id="__codelineno-95-40" name="__codelineno-95-40"></a><span class="c1">// 返回 caller</span>
</span><span id="__span-95-41"><a id="__codelineno-95-41" name="__codelineno-95-41"></a><span class="n">jalr</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<h2 id="214-数组与指针">2.14 数组与指针<a class="headerlink" href="#214-数组与指针" title="Permanent link">&para;</a></h2>
<h3 id="2141-用数组实现-clear">2.14.1 用数组实现 clear<a class="headerlink" href="#2141-用数组实现-clear" title="Permanent link">&para;</a></h3>
<p>假设 array，size 保存在 x10，x11。i 保存在 x5</p>
<div class="grid">
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-96-1">1</a></span>
<span class="normal"><a href="#__codelineno-96-2">2</a></span>
<span class="normal"><a href="#__codelineno-96-3">3</a></span>
<span class="normal"><a href="#__codelineno-96-4">4</a></span>
<span class="normal"><a href="#__codelineno-96-5">5</a></span>
<span class="normal"><a href="#__codelineno-96-6">6</a></span>
<span class="normal"><a href="#__codelineno-96-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1"></a><span class="n">clear1</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">array</span><span class="p">[],</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2"></a><span class="p">{</span>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5"></a><span class="w">        </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-97-1">1</a></span>
<span class="normal"><a href="#__codelineno-97-2">2</a></span>
<span class="normal"><a href="#__codelineno-97-3">3</a></span>
<span class="normal"><a href="#__codelineno-97-4">4</a></span>
<span class="normal"><a href="#__codelineno-97-5">5</a></span>
<span class="normal"><a href="#__codelineno-97-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1"></a><span class="n">li</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2"></a><span class="nl">loop1:</span><span class="w"> </span><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span><span class="w">  </span><span class="c1">// array[i] = 0</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6"></a><span class="n">blt</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">loop1</span>
</span></code></pre></div></td></tr></table></div>
</div>
<h3 id="2142-用指针实现-clear">2.14.2 用指针实现 clear<a class="headerlink" href="#2142-用指针实现-clear" title="Permanent link">&para;</a></h3>
<p>array，size 存储在 x10，x11。p 存储在 x5</p>
<div class="grid">
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">c</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-98-1">1</a></span>
<span class="normal"><a href="#__codelineno-98-2">2</a></span>
<span class="normal"><a href="#__codelineno-98-3">3</a></span>
<span class="normal"><a href="#__codelineno-98-4">4</a></span>
<span class="normal"><a href="#__codelineno-98-5">5</a></span>
<span class="normal"><a href="#__codelineno-98-6">6</a></span>
<span class="normal"><a href="#__codelineno-98-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1"></a><span class="n">clear2</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2"></a><span class="p">{</span>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">array</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">array</span><span class="p">[</span><span class="n">size</span><span class="p">];</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5"></a><span class="w">        </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7"></a><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-99-1">1</a></span>
<span class="normal"><a href="#__codelineno-99-2">2</a></span>
<span class="normal"><a href="#__codelineno-99-3">3</a></span>
<span class="normal"><a href="#__codelineno-99-4">4</a></span>
<span class="normal"><a href="#__codelineno-99-5">5</a></span>
<span class="normal"><a href="#__codelineno-99-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1"></a><span class="n">mv</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span>
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2"></a><span class="nl">loop2:</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span>
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4"></a><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span>
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5"></a><span class="n">add</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6"></a><span class="n">bltu</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">loop2</span>
</span></code></pre></div></td></tr></table></div>
</div>
<p>上述代码中，每次循环都会计算一次 <code>&amp;array[size]</code>，可以将其放在循环外面</p>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-100-1">1</a></span>
<span class="normal"><a href="#__codelineno-100-2">2</a></span>
<span class="normal"><a href="#__codelineno-100-3">3</a></span>
<span class="normal"><a href="#__codelineno-100-4">4</a></span>
<span class="normal"><a href="#__codelineno-100-5">5</a></span>
<span class="normal"><a href="#__codelineno-100-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1"></a><span class="n">mv</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2"></a><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span><span id="__span-100-4"><a id="__codelineno-100-4" name="__codelineno-100-4"></a><span class="nl">loop2:</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span>
</span><span id="__span-100-5"><a id="__codelineno-100-5" name="__codelineno-100-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-100-6"><a id="__codelineno-100-6" name="__codelineno-100-6"></a><span class="n">bltu</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">loop2</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="2143-比较两个版本的-clear">2.14.3 比较两个版本的 clear<a class="headerlink" href="#2143-比较两个版本的-clear" title="Permanent link">&para;</a></h3>
<div class="grid">
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V clear1</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-101-1">1</a></span>
<span class="normal"><a href="#__codelineno-101-2">2</a></span>
<span class="normal"><a href="#__codelineno-101-3">3</a></span>
<span class="normal"><a href="#__codelineno-101-4">4</a></span>
<span class="normal"><a href="#__codelineno-101-5">5</a></span>
<span class="normal"><a href="#__codelineno-101-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1"></a><span class="n">li</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2"></a><span class="nl">loop1:</span><span class="w"> </span><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span>
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4"></a><span class="n">sd</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x7</span><span class="p">)</span>
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">1</span>
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6"></a><span class="n">blt</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="n">loop1</span>
</span></code></pre></div></td></tr></table></div>
<div class="language-verilog highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RISC-V clear2</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-102-1">1</a></span>
<span class="normal"><a href="#__codelineno-102-2">2</a></span>
<span class="normal"><a href="#__codelineno-102-3">3</a></span>
<span class="normal"><a href="#__codelineno-102-4">4</a></span>
<span class="normal"><a href="#__codelineno-102-5">5</a></span>
<span class="normal"><a href="#__codelineno-102-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1"></a><span class="n">mv</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2"></a><span class="n">slli</span><span class="w"> </span><span class="n">x6</span><span class="p">,</span><span class="w"> </span><span class="n">x11</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3"></a><span class="n">add</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">x10</span><span class="p">,</span><span class="w"> </span><span class="n">x6</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4"></a><span class="nl">loop2:</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="mh">0</span><span class="p">(</span><span class="n">x5</span><span class="p">)</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5"></a><span class="n">addi</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="mh">8</span>
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6"></a><span class="n">bltu</span><span class="w"> </span><span class="n">x5</span><span class="p">,</span><span class="w"> </span><span class="n">x7</span><span class="p">,</span><span class="w"> </span><span class="n">loop2</span>
</span></code></pre></div></td></tr></table></div>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年3月4日 14:06:02 UTC">2025年3月4日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2024年11月7日 07:10:59 UTC">2024年11月7日</span>
  </span>

    
    
    
  </aside>




<!-- 修改 comments.html https://github.com/squidfunk/mkdocs-material/blob/master/material/templates/partials/comments.html -->

<!-- 若 meta 中 comments 为 false，则不加评论区 -->


<div id="__comments">

<h2>评论区</h2>

<div>欢迎在评论区指出文档错误，为文档提供宝贵意见，或写下你的疑问</div>

<br/>

<!-- Insert generated snippet here -->
<script src="https://giscus.app/client.js"
  data-repo="WintermelonC/WintermelonC_Docs"
  data-repo-id="R_kgDOM7yCjg"
  data-category="General"
  data-category-id="DIC_kwDOM7yCjs4Cj6RZ"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async>
</script>

<!-- Synchronize Giscus theme with palette -->
<script>
  var giscus = document.querySelector("script[src*=giscus]")

  // Set palette on initial load
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate"
      ? "transparent_dark"
      : "light"

    // Instruct Giscus to set theme
    giscus.setAttribute("data-theme", theme) 
  }

  // Register event handlers after documented loaded
  document.addEventListener("DOMContentLoaded", function() {
    var ref = document.querySelector("[data-md-component=palette]")
    ref.addEventListener("change", function() {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate"
          ? "transparent_dark"
          : "light"

        // Instruct Giscus to change theme
        var frame = document.querySelector(".giscus-frame")
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        )
      }
    })
  })
</script>

</div>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../ch1/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 1 Computer Abstractions and Technology">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                1 Computer Abstractions and Technology
              </div>
            </div>
          </a>
        
        
          
          <a href="../ch3/" class="md-footer__link md-footer__link--next" aria-label="下一页: 3 Arithmetic for Computers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                3 Arithmetic for Computers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!-- 修改 copyright.html https://github.com/squidfunk/mkdocs-material/blob/master/material/templates/partials/copyright.html -->
<div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 - 2025 WintermelonC
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
    <!-- 增加 Bootstrap -->
		and
		<a href="https://getbootstrap.com/" target="_blank" rel="noopener">
      Bootstrap
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/WintermelonC" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://space.bilibili.com/1089287731" target="_blank" rel="noopener" title="space.bilibili.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.path", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../../../assets/javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>