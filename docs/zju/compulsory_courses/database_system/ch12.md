# 12 Concurrency Control

!!! tip "说明"

    本文档正在更新中……

!!! info "说明"

    本文档仅涉及部分内容，仅可用于复习重点知识

## 1 Lock-Based Protocols



### 1.1 Pitfalls of Lock-Based Protocols



### 1.2 The Two-Phase Locking Protocol

保证 conflict-serializable schedules

1. Growing Phase：transaction 获得锁而不释放锁

    1. 获得 lock-S
    2. 获得 lock-X
    3. 将 lock-S 转换到 lock-X（upgrade）

2. Shrinking Phase：transaction 释放锁而不获得锁

    1. 释放 lock-S
    2. 释放 lock-X
    3. 将 lock-X 转换到 lock-S（downgrade）

### 1.3 Implementation of Locking


### 1.4 Graph-Based Protocols


#### 1.4.1 Tree Protocol


## * 2 Timestamp-Based Protocols

## * 3 Validation-Based Protocols

## 4 Multiple Granularity

## * 5 Multiversion Schemes

## 6 Deadlock Handling

## 7 Insert and Delete Operations

## * 8 Concurrency in Index Structures